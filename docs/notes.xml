<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Homophony</title>
<link>https://homophony.quest/notes.html</link>
<atom:link href="https://homophony.quest/notes.xml" rel="self" type="application/rss+xml"/>
<description>Music blog for motivation to play more music</description>
<image>
<url>https://homophony.quest/images/notesE_0.jpg</url>
<title>Homophony</title>
<link>https://homophony.quest/notes.html</link>
</image>
<generator>quarto-1.4.549</generator>
<lastBuildDate>Fri, 26 Jan 2024 05:00:00 GMT</lastBuildDate>
<item>
  <title>Steps toward visualizing chord spaces</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/26_1_26_24_space_vis/</link>
  <description><![CDATA[ 




<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> diffusers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DiffusionPipeline</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> transformers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> set_seed</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> PIL <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random</span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ssl</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-8">ssl._create_default_https_context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ssl._create_unverified_context</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#locate library</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#model_id = "./stable-diffusion-v1-5"</span></span>
<span id="cb1-12">model_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dreamshaper-xl-turbo"</span></span>
<span id="cb1-13"></span>
<span id="cb1-14">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DiffusionPipeline.from_pretrained(</span>
<span id="cb1-15">    pretrained_model_name_or_path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../../../bigFiles/huggingface/dreamshaper-xl-turbo/"</span></span>
<span id="cb1-16">)</span>
<span id="cb1-17"></span>
<span id="cb1-18">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline.to(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span>)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recommended if your computer has &lt; 64 GB of RAM</span></span>
<span id="cb1-21">pipeline.enable_attention_slicing(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max"</span>)</span>
<span id="cb1-22"></span>
<span id="cb1-23">prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"synthesizer floating in space. 80s cartoon. retro."</span></span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> s <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>):</span>
<span id="cb1-26">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> n <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]:</span>
<span id="cb1-27">    seed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span></span>
<span id="cb1-28">    num_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-29">    set_seed(seed)</span>
<span id="cb1-30">    </span>
<span id="cb1-31">    image <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline(prompt,height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,num_images_per_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,num_inference_steps<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>num_steps)</span>
<span id="cb1-32">    </span>
<span id="cb1-33">    image_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"images/synth_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.jpeg"</span></span>
<span id="cb1-34">    </span>
<span id="cb1-35">    image_save <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> image.images[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].save(image_name.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(seed,num_steps))</span></code></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/26_1_26_24_space_vis/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>synthesizer floating in space. 80s cartoon. retro. - Dreamshaper v7</p>
</div></div><p>No time today for much explanation. Just some code that produces a visual. Lot’s of things to change up here later.</p>
<ul>
<li>create feature vectors for chords</li>
<li>calculate similarity matrix</li>
<li>find a multi-dimensional scaling solution to plot the chord names in 2-d</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pre-processing to get the chord vectors</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load chord vectors</span></span>
<span id="cb2-5">c_chord_excel <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> rio<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">import</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chord_vectors.xlsx"</span>)</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># grab feature vectors</span></span>
<span id="cb2-8">c_chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>])</span>
<span id="cb2-9"></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># assign row names to the third column containing chord names</span></span>
<span id="cb2-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(c_chord_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define all keys</span></span>
<span id="cb2-14">keys <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Db"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ab"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>)</span>
<span id="cb2-15"></span>
<span id="cb2-16"></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the excel sheet only has chords in C</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through the keys, permute the matrix to get the chords in the next key</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add the permuted matrix to new rows in the overall chord_matrix</span></span>
<span id="cb2-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)) {</span>
<span id="cb2-21"></span>
<span id="cb2-22">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) {</span>
<span id="cb2-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># initialize chord_matrix with C matrix</span></span>
<span id="cb2-24">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_matrix</span>
<span id="cb2-25"></span>
<span id="cb2-26">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb2-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#permute the matrix as a function of iterator</span></span>
<span id="cb2-28">    new_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(c_chord_matrix[, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>],c_chord_matrix[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)] )</span>
<span id="cb2-29"></span>
<span id="cb2-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rename the rows with the new key</span></span>
<span id="cb2-31">    new_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>, keys[i], c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span>
<span id="cb2-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(new_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> new_names</span>
<span id="cb2-33"></span>
<span id="cb2-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># append the new_matrix to chord_matrix</span></span>
<span id="cb2-35">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(chord_matrix,new_matrix)</span>
<span id="cb2-36"></span>
<span id="cb2-37">  }</span>
<span id="cb2-38">}</span>
<span id="cb2-39"></span>
<span id="cb2-40">chord_properties <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb2-41">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(c_chord_excel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>type,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)),</span>
<span id="cb2-42">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(keys, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(c_chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]),</span>
<span id="cb2-43">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chord_names  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_matrix),</span>
<span id="cb2-44">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">synonyms =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>),</span>
<span id="cb2-45">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">database_chord =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb2-46">)</span>
<span id="cb2-47"></span>
<span id="cb2-48">first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix))</span>
<span id="cb2-49">second_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(first_order)</span>
<span id="cb2-50"></span>
<span id="cb2-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># find repeats and build synonym list</span></span>
<span id="cb2-52">repeat_indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb2-53"></span>
<span id="cb2-54">first_occurrence <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb2-55"></span>
<span id="cb2-56"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]){</span>
<span id="cb2-57">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get the current row</span></span>
<span id="cb2-58">  evaluate_row <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> first_order[i,]</span>
<span id="cb2-59"></span>
<span id="cb2-60">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># don't count the current item as a repeat</span></span>
<span id="cb2-61">  evaluate_row[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb2-62"></span>
<span id="cb2-63">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># repeats are the ids for any other 1s found</span></span>
<span id="cb2-64">  repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(evaluate_row <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> )</span>
<span id="cb2-65"></span>
<span id="cb2-66">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(repeats) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb2-67">  }</span>
<span id="cb2-68"></span>
<span id="cb2-69">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(repeats) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb2-70">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#add to list of repeat items</span></span>
<span id="cb2-71">    repeat_indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(repeat_indices,repeats)</span>
<span id="cb2-72"></span>
<span id="cb2-73">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add synonyms</span></span>
<span id="cb2-74">    chord_properties<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>synonyms[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">synonyms =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_matrix)[repeats])</span>
<span id="cb2-75">  }</span>
<span id="cb2-76"></span>
<span id="cb2-77">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> first_occurrence <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>){</span>
<span id="cb2-78">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> repeat_indices <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>){</span>
<span id="cb2-79">      first_occurrence <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(first_occurrence,i)</span>
<span id="cb2-80">      chord_properties<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>database_chord[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb2-81">    }</span>
<span id="cb2-82">  }</span>
<span id="cb2-83">}</span>
<span id="cb2-84"></span>
<span id="cb2-85">chord_properties <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_properties <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-86">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">num_notes =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowSums</span>(chord_matrix),</span>
<span id="cb2-87">         <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">id =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb2-88"></span>
<span id="cb2-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># keep only unique chord, recompute similarities</span></span>
<span id="cb2-90">chord_matrix_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[first_occurrence,]</span>
<span id="cb2-91">first_order_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix_no_repeats))</span>
<span id="cb2-92">second_order_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(first_order_no_repeats)</span>
<span id="cb2-93"></span>
<span id="cb2-94"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove scales and individual notes</span></span>
<span id="cb2-95">only_chords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_properties <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb2-96">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(type<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"scale"</span>,</span>
<span id="cb2-97">         type<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"key"</span>,</span>
<span id="cb2-98">         database_chord <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb2-99"></span>
<span id="cb2-100">first_order_chords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> first_order_no_repeats[only_chords<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord_names,</span>
<span id="cb2-101">                                               only_chords<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord_names]</span>
<span id="cb2-102">second_order_chords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> second_order_no_repeats[only_chords<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord_names,</span>
<span id="cb2-103">                                               only_chords<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord_names]</span></code></pre></div>
</details>
</div>
<p>First-order similarity chord-space using 1-hot vectors.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggplot2)</span>
<span id="cb3-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(ggrepel)</span>
<span id="cb3-3"></span>
<span id="cb3-4">mds_first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cmdscale</span>((first_order<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))</span>
<span id="cb3-5">mds_first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as_tibble</span>(mds_first_order) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-6">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(chord_properties)</span>
<span id="cb3-7"></span>
<span id="cb3-8">mds_first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> mds_first_order <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">mutate</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> forcats<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">fct_relevel</span>(key,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ab"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Db"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>)) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb3-10">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(type <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"scale"</span>)</span>
<span id="cb3-11"></span>
<span id="cb3-12">p1 <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ggplot</span>(mds_first_order, <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">aes</span>(V1, V2, </span>
<span id="cb3-13">                                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">label =</span> chord_names,</span>
<span id="cb3-14">                                  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">color =</span> key))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> </span>
<span id="cb3-15">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_point</span>()<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-16">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">geom_text_repel</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">size=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">max.overlaps =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span></span>
<span id="cb3-17">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">theme_void</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">base_size =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">50</span>)</span>
<span id="cb3-18">p1</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/26_1_26_24_space_vis/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="3840"></p>
</figure>
</div>
</div>
</div>



 ]]></description>
  <category>chord similarity</category>
  <category>datavis</category>
  <guid>https://homophony.quest/blog/26_1_26_24_space_vis/</guid>
  <pubDate>Fri, 26 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/26_1_26_24_space_vis/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Listening to complex tones using sine waves and toneR</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/25_1_25_24_r_sounds/</link>
  <description><![CDATA[ 




<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> diffusers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DiffusionPipeline</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> transformers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> set_seed</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> PIL <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random</span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ssl</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-8">ssl._create_default_https_context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ssl._create_unverified_context</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#locate library</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#model_id = "./stable-diffusion-v1-5"</span></span>
<span id="cb1-12">model_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dreamshaper-xl-turbo"</span></span>
<span id="cb1-13"></span>
<span id="cb1-14">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DiffusionPipeline.from_pretrained(</span>
<span id="cb1-15">    pretrained_model_name_or_path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../../../bigFiles/huggingface/dreamshaper-xl-turbo/"</span></span>
<span id="cb1-16">)</span>
<span id="cb1-17"></span>
<span id="cb1-18">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline.to(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span>)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recommended if your computer has &lt; 64 GB of RAM</span></span>
<span id="cb1-21">pipeline.enable_attention_slicing(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max"</span>)</span>
<span id="cb1-22"></span>
<span id="cb1-23">prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"sine waves. nature. brilliant. sunset. ocean. frequency. complex"</span></span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> s <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>):</span>
<span id="cb1-26">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> n <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]:</span>
<span id="cb1-27">    seed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span></span>
<span id="cb1-28">    num_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-29">    set_seed(seed)</span>
<span id="cb1-30">    </span>
<span id="cb1-31">    image <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline(prompt,height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,num_images_per_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,num_inference_steps<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>num_steps)</span>
<span id="cb1-32">    </span>
<span id="cb1-33">    image_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"images/synth_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.jpeg"</span></span>
<span id="cb1-34">    </span>
<span id="cb1-35">    image_save <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> image.images[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].save(image_name.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(seed,num_steps))</span></code></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/25_1_25_24_r_sounds/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>musical pattern. music wallpaper. intense music trip. music everywhere. - Dreamshaper v7</p>
</div></div><p>In previous posts I’ve been messing around with analyzing chord similarity using a vector space. My plan for this post is render chords as complex tones using R and the {toneR} package, and then listen to things.</p>
<p>The code for this is taking me back to grad school. I used to run experiments involving complex tones with missing fundamentals, and I used Matlab to create those tones from sine waves.</p>
<p>Here’s some R code will generate a complex tone as a sum of a series of sine waves, each at different frequencies and amplitudes.</p>
<p>The result is a C7 chord, rendered as a complex tone, with the frequency for each note getting equal amplitude in the summed sine wave.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tuneR)</span>
<span id="cb2-2"></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Function to generate a complex tone</span></span>
<span id="cb2-5">generate_complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span></span>
<span id="cb2-6">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(duration,</span>
<span id="cb2-7">           sampling_rate,</span>
<span id="cb2-8">           frequencies,</span>
<span id="cb2-9">           amplitudes) {</span>
<span id="cb2-10">    time_points <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> sampling_rate)</span>
<span id="cb2-11">    complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sapply</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_along</span>(frequencies), </span>
<span id="cb2-12">                           <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i) {</span>
<span id="cb2-13">      amplitudes[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sin</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> pi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> frequencies[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> time_points)</span>
<span id="cb2-14">                             }</span>
<span id="cb2-15">      )</span>
<span id="cb2-16">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowSums</span>(complex_tone))</span>
<span id="cb2-17">  }</span>
<span id="cb2-18"></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb2-20">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb2-21">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb2-22">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb2-23">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb2-24">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb2-25">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb2-26">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb2-27">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb2-28">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb2-29">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb2-30">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb2-31">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb2-32">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb2-33">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb2-34"></span>
<span id="cb2-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># set amplitudes</span></span>
<span id="cb2-36"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># 12 amplitudes, one for each note from C to B</span></span>
<span id="cb2-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># this makes a C7 chord</span></span>
<span id="cb2-38">amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb2-39"></span>
<span id="cb2-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb2-41">complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration, </span>
<span id="cb2-42">                                      sampling_rate, </span>
<span id="cb2-43">                                      frequencies, </span>
<span id="cb2-44">                                      amplitudes)</span>
<span id="cb2-45"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb2-46">complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb2-47">complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb2-48"></span>
<span id="cb2-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb2-50">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb2-51">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> complex_tone,</span>
<span id="cb2-52">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> complex_tone,</span>
<span id="cb2-53">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb2-54">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb2-55">)</span>
<span id="cb2-56"></span>
<span id="cb2-57"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7.wav"</span>)</span></code></pre></div>
</details>
</div>
<p><audio controls=""> <source src="C7.wav" type="audio/wav"> </audio></p>
<section id="a-series-of-similar-chords" class="level2">
<h2 class="anchored" data-anchor-id="a-series-of-similar-chords">A series of similar chords</h2>
<p>I’m pretty sure what I’m about to make is going to sound janky, oh well.</p>
<p>Step 1: load in the chord vector space I’ve been using to compute similarities between chord patterns.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pre-processing to get the chord vectors</span></span>
<span id="cb3-3"></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load chord vectors</span></span>
<span id="cb3-5">c_chord_excel <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> rio<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">import</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chord_vectors.xlsx"</span>)</span>
<span id="cb3-6"></span>
<span id="cb3-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># grab feature vectors</span></span>
<span id="cb3-8">c_chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>])</span>
<span id="cb3-9"></span>
<span id="cb3-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># assign row names to the third column containing chord names</span></span>
<span id="cb3-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(c_chord_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb3-12"></span>
<span id="cb3-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define all keys</span></span>
<span id="cb3-14">keys <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Db"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ab"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>)</span>
<span id="cb3-15"></span>
<span id="cb3-16"></span>
<span id="cb3-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the excel sheet only has chords in C</span></span>
<span id="cb3-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through the keys, permute the matrix to get the chords in the next key</span></span>
<span id="cb3-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add the permuted matrix to new rows in the overall chord_matrix</span></span>
<span id="cb3-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)) {</span>
<span id="cb3-21">  </span>
<span id="cb3-22">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) {</span>
<span id="cb3-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># initialize chord_matrix with C matrix</span></span>
<span id="cb3-24">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_matrix</span>
<span id="cb3-25">    </span>
<span id="cb3-26">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb3-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#permute the matrix as a function of iterator</span></span>
<span id="cb3-28">    new_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(c_chord_matrix[, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>],c_chord_matrix[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)] )</span>
<span id="cb3-29">    </span>
<span id="cb3-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rename the rows with the new key</span></span>
<span id="cb3-31">    new_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>, keys[i], c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span>
<span id="cb3-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(new_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> new_names</span>
<span id="cb3-33">    </span>
<span id="cb3-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># append the new_matrix to chord_matrix</span></span>
<span id="cb3-35">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(chord_matrix,new_matrix)</span>
<span id="cb3-36">  </span>
<span id="cb3-37">    }</span>
<span id="cb3-38">}</span></code></pre></div>
</details>
</div>
<p>Step 2: compute the cosine similarities between all chords</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1">first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix))</span>
<span id="cb4-2">second_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(first_order)</span></code></pre></div>
</details>
</div>
<p>Step 3: Pick a starting chord and get the list of all other chords, ordered in terms of decreasing similarity. I’ll start with C7. This also prints the first 10, but I there are hundreds more in a row. Also using second-order similarity here for fun.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C7'</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing=</span>T)</span>
<span id="cb5-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(chord_similarities[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>])</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>           C7            C9        C7(b9)       Gb7b9b5          Edim 
    1.0000000     0.9763873     0.9701562     0.9691460     0.9633453 
C major triad       C9(#11)       C9 (13)       Em7(b5)           Gm6 
    0.9597563     0.9528986     0.9527819     0.9401221     0.9401221 </code></pre>
</div>
</div>
<p>Step 4: This is what I’ve been waiting for. Time for some teeny tiny steps. Basically, the plan is to generate a complex tone for each chord, in order of decreasing similarity, then stitch them together and then listen to them.</p>
<p>I’m going to experiment with some of the parameters, like duration, and see what happens. Let’s also try the first 10 chords.</p>
<p>Issue tracker: - try shorter duration per chord - clicks between tones need smoothing - add amplitude envelopes at beginning and end - learned about the {av} package! looks like a wrapper for ffmpeg, can use this to convert wavs to mp3</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># envelope generator function</span></span>
<span id="cb7-2">vector_envelope <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(input_vector,proportion){</span>
<span id="cb7-3">  window <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(input_vector)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>proportion)</span>
<span id="cb7-4">  up <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> window)</span>
<span id="cb7-5">  down <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> window)</span>
<span id="cb7-6">  input_vector[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>window] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> input_vector[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>window]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>up</span>
<span id="cb7-7">  input_vector[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(input_vector)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(window<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(input_vector)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> input_vector[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(input_vector)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(window<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(input_vector)]<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>down</span>
<span id="cb7-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(input_vector)</span>
<span id="cb7-9">}</span></code></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb8-2">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb8-3">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb8-4">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb8-5">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb8-6">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb8-7">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb8-8">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb8-9">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb8-10">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb8-11">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb8-12">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb8-13">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb8-14">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb8-15">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb8-16"></span>
<span id="cb8-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through chords</span></span>
<span id="cb8-18"></span>
<span id="cb8-19"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>) {</span>
<span id="cb8-20">  amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(chord_similarities[i]),]</span>
<span id="cb8-21">  </span>
<span id="cb8-22">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb8-23">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration,</span>
<span id="cb8-24">                                        sampling_rate,</span>
<span id="cb8-25">                                        frequencies,</span>
<span id="cb8-26">                                        amplitudes)</span>
<span id="cb8-27">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb8-28">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb8-29">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb8-30">  </span>
<span id="cb8-31">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector_envelope</span>(complex_tone,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb8-32">  </span>
<span id="cb8-33">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>){</span>
<span id="cb8-34">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone</span>
<span id="cb8-35">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb8-36">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##smoothing</span></span>
<span id="cb8-37">    smooth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb8-38">    </span>
<span id="cb8-39">    tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> complex_tone[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>smooth])</span>
<span id="cb8-40">    </span>
<span id="cb8-41">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tone_series, complex_tone[(smooth<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)])</span>
<span id="cb8-42">    </span>
<span id="cb8-43">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#tone_series &lt;- c(tone_series,complex_tone)</span></span>
<span id="cb8-44">  }</span>
<span id="cb8-45">  </span>
<span id="cb8-46">}</span>
<span id="cb8-47"></span>
<span id="cb8-48"></span>
<span id="cb8-49"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb8-50">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb8-51">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> tone_series,</span>
<span id="cb8-52">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> tone_series,</span>
<span id="cb8-53">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb8-54">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb8-55">)</span>
<span id="cb8-56"></span>
<span id="cb8-57">sound_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7_series_10"</span></span>
<span id="cb8-58"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span>
<span id="cb8-59">av<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">av_audio_convert</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".mp3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb8-60"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.remove</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span></code></pre></div>
</details>
</div>
<p><audio controls=""> <source src="C7_series_10.mp3" type="audio/wav"> </audio></p>
<p>This one runs through the first 20 most similar chords to C7. The chords don’transition super smoothly (no portamento), but I got rid of then clicks using envelopes. It’s been a while since I did the math for audio signal processing. The last 10 or so chords all sound the same because the database has lots of chord identities (same note pattern under a different name).</p>
</section>
<section id="more-experiments" class="level2">
<h2 class="anchored" data-anchor-id="more-experiments">More experiments</h2>
<p>Remove identical chord patterns</p>
<p>I botched this so many times…kept coming back to fix little problems.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1">chord_properties <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb9-2">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(c_chord_excel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>type,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)),</span>
<span id="cb9-3">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(keys, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(c_chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]),</span>
<span id="cb9-4">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chord_names  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_matrix),</span>
<span id="cb9-5">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">synonyms =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>)</span>
<span id="cb9-6">)</span>
<span id="cb9-7"></span>
<span id="cb9-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># find repeats and build synonym list</span></span>
<span id="cb9-9">repeat_indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb9-10">chord_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>()</span>
<span id="cb9-11"></span>
<span id="cb9-12">first_occurrence <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb9-13"></span>
<span id="cb9-14"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(first_order)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]){</span>
<span id="cb9-15">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get the current row</span></span>
<span id="cb9-16">  evaluate_row <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> first_order[i,]</span>
<span id="cb9-17">  </span>
<span id="cb9-18">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># don't count the current item as a repeat</span></span>
<span id="cb9-19">  evaluate_row[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb9-20">  </span>
<span id="cb9-21">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># repeats are the ids for any other 1s found</span></span>
<span id="cb9-22">  repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(evaluate_row <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> )</span>
<span id="cb9-23">  </span>
<span id="cb9-24">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(repeats) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb9-25">  }</span>
<span id="cb9-26">  </span>
<span id="cb9-27">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(repeats) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb9-28">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#add to list of repeat items</span></span>
<span id="cb9-29">    repeat_indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(repeat_indices,repeats)</span>
<span id="cb9-30">    </span>
<span id="cb9-31">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add synonyms</span></span>
<span id="cb9-32">    chord_properties<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>synonyms[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">synonyms =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(first_order)[repeats])</span>
<span id="cb9-33">  }</span>
<span id="cb9-34">  </span>
<span id="cb9-35">   <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> first_occurrence <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>){</span>
<span id="cb9-36">     <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> repeat_indices <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>){</span>
<span id="cb9-37">       first_occurrence <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(first_occurrence,i)</span>
<span id="cb9-38">     }</span>
<span id="cb9-39">  }</span>
<span id="cb9-40">}</span>
<span id="cb9-41"></span>
<span id="cb9-42"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove repeats, recompute similarities</span></span>
<span id="cb9-43">chord_matrix_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[first_occurrence,]</span>
<span id="cb9-44"></span>
<span id="cb9-45">first_order_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix_no_repeats))</span>
<span id="cb9-46">second_order_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(first_order_no_repeats)</span></code></pre></div>
</details>
</div>
<p>Listen to C7 in descending similarity with no repeat chords.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C7'</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing=</span>T)</span>
<span id="cb10-2"></span>
<span id="cb10-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb10-4">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb10-5">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb10-6">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb10-7">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb10-8">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb10-9">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb10-10">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb10-11">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb10-12">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb10-13">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb10-14">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb10-15">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb10-16">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb10-17">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb10-18"></span>
<span id="cb10-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through chords</span></span>
<span id="cb10-20"></span>
<span id="cb10-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>) {</span>
<span id="cb10-22">  amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(chord_similarities[i]),]</span>
<span id="cb10-23">  </span>
<span id="cb10-24">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb10-25">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration,</span>
<span id="cb10-26">                                        sampling_rate,</span>
<span id="cb10-27">                                        frequencies,</span>
<span id="cb10-28">                                        amplitudes)</span>
<span id="cb10-29">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb10-30">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb10-31">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb10-32">  </span>
<span id="cb10-33">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector_envelope</span>(complex_tone,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb10-34">  </span>
<span id="cb10-35">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>){</span>
<span id="cb10-36">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone</span>
<span id="cb10-37">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb10-38">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##smoothing</span></span>
<span id="cb10-39">    smooth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb10-40">    </span>
<span id="cb10-41">    tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> complex_tone[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>smooth])</span>
<span id="cb10-42">    </span>
<span id="cb10-43">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tone_series, complex_tone[(smooth<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)])</span>
<span id="cb10-44">    </span>
<span id="cb10-45">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#tone_series &lt;- c(tone_series,complex_tone)</span></span>
<span id="cb10-46">  }</span>
<span id="cb10-47">  </span>
<span id="cb10-48">}</span>
<span id="cb10-49"></span>
<span id="cb10-50"></span>
<span id="cb10-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb10-52">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb10-53">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> tone_series,</span>
<span id="cb10-54">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> tone_series,</span>
<span id="cb10-55">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb10-56">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb10-57">)</span>
<span id="cb10-58"></span>
<span id="cb10-59">sound_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7_series_30"</span></span>
<span id="cb10-60"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span>
<span id="cb10-61">av<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">av_audio_convert</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".mp3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb10-62"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.remove</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span></code></pre></div>
</details>
</div>
<p><audio controls=""> <source src="C7_series_30.mp3" type="audio/wav"> </audio></p>
<p>Taking bigger steps (10) between each chord in terms of similarity.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C7'</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing=</span>T)</span>
<span id="cb11-2"></span>
<span id="cb11-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb11-4">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb11-5">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb11-6">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb11-7">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb11-8">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb11-9">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb11-10">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb11-11">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb11-12">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb11-13">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb11-14">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb11-15">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb11-16">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb11-17">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb11-18"></span>
<span id="cb11-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through chords</span></span>
<span id="cb11-20"></span>
<span id="cb11-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) {</span>
<span id="cb11-22">  amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(chord_similarities[i]),]</span>
<span id="cb11-23">  </span>
<span id="cb11-24">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb11-25">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration,</span>
<span id="cb11-26">                                        sampling_rate,</span>
<span id="cb11-27">                                        frequencies,</span>
<span id="cb11-28">                                        amplitudes)</span>
<span id="cb11-29">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb11-30">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb11-31">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb11-32">  </span>
<span id="cb11-33">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector_envelope</span>(complex_tone,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb11-34">  </span>
<span id="cb11-35">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>){</span>
<span id="cb11-36">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone</span>
<span id="cb11-37">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb11-38">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##smoothing</span></span>
<span id="cb11-39">    smooth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb11-40">    </span>
<span id="cb11-41">    tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> complex_tone[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>smooth])</span>
<span id="cb11-42">    </span>
<span id="cb11-43">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tone_series, complex_tone[(smooth<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)])</span>
<span id="cb11-44">    </span>
<span id="cb11-45">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#tone_series &lt;- c(tone_series,complex_tone)</span></span>
<span id="cb11-46">  }</span>
<span id="cb11-47">  </span>
<span id="cb11-48">}</span>
<span id="cb11-49"></span>
<span id="cb11-50"></span>
<span id="cb11-51"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb11-52">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb11-53">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> tone_series,</span>
<span id="cb11-54">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> tone_series,</span>
<span id="cb11-55">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb11-56">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb11-57">)</span>
<span id="cb11-58"></span>
<span id="cb11-59">sound_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7_series_30b"</span></span>
<span id="cb11-60"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span>
<span id="cb11-61">av<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">av_audio_convert</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".mp3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb11-62"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.remove</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span></code></pre></div>
</details>
</div>
<p><audio controls=""> <source src="C7_series_30b.mp3" type="audio/wav"> </audio></p>
<p>Mildly interesting. These sine waves are tough on the ears though.</p>
<hr>
<p>The chord vectors only have 12 features, so they abstract over note positions, chord inversions, voicings, octaves, etc. These experiments might sound more interesting if I randomly assigned frequencies to different octaves to spread out the sound a little bit.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C7'</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing=</span>T)</span>
<span id="cb12-2"></span>
<span id="cb12-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb12-4">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb12-5">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb12-6">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb12-7">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb12-8">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb12-9">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb12-10">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb12-11">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb12-12">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb12-13">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb12-14">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb12-15">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb12-16">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb12-17">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb12-18"></span>
<span id="cb12-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through chords</span></span>
<span id="cb12-20"></span>
<span id="cb12-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">300</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>)) {</span>
<span id="cb12-22">  amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(chord_similarities[i]),]</span>
<span id="cb12-23">  </span>
<span id="cb12-24">  random_frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>frequencies</span>
<span id="cb12-25">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb12-26">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration,</span>
<span id="cb12-27">                                        sampling_rate,</span>
<span id="cb12-28">                                        random_frequencies,</span>
<span id="cb12-29">                                        amplitudes)</span>
<span id="cb12-30">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb12-31">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb12-32">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb12-33">  </span>
<span id="cb12-34">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector_envelope</span>(complex_tone,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb12-35">  </span>
<span id="cb12-36">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>){</span>
<span id="cb12-37">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone</span>
<span id="cb12-38">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb12-39">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##smoothing</span></span>
<span id="cb12-40">    smooth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb12-41">    </span>
<span id="cb12-42">    tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> complex_tone[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>smooth])</span>
<span id="cb12-43">    </span>
<span id="cb12-44">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tone_series, complex_tone[(smooth<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)])</span>
<span id="cb12-45">    </span>
<span id="cb12-46">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#tone_series &lt;- c(tone_series,complex_tone)</span></span>
<span id="cb12-47">  }</span>
<span id="cb12-48">  </span>
<span id="cb12-49">}</span>
<span id="cb12-50"></span>
<span id="cb12-51"></span>
<span id="cb12-52"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb12-53">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb12-54">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> tone_series,</span>
<span id="cb12-55">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> tone_series,</span>
<span id="cb12-56">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb12-57">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb12-58">)</span>
<span id="cb12-59"></span>
<span id="cb12-60">sound_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7_series_30c"</span></span>
<span id="cb12-61"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span>
<span id="cb12-62">av<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">av_audio_convert</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".mp3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb12-63"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.remove</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span></code></pre></div>
</details>
</div>
<p><audio controls=""> <source src="C7_series_30c.mp3" type="audio/wav"> </audio></p>
<p>sounds more interesting. need to refactor the code a bit so I delete the wav file and save the mp3</p>
<hr>
<p>Let’s start somewhere out there, and then move toward C7.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C7'</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing=</span>T)</span>
<span id="cb13-2"></span>
<span id="cb13-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb13-4">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb13-5">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb13-6">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb13-7">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb13-8">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb13-9">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb13-10">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb13-11">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb13-12">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb13-13">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb13-14">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb13-15">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb13-16">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb13-17">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb13-18"></span>
<span id="cb13-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through chords</span></span>
<span id="cb13-20">counter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb13-21"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">301</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)) {</span>
<span id="cb13-22">  counter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> counter<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb13-23">  amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(chord_similarities[i]),]</span>
<span id="cb13-24">  </span>
<span id="cb13-25">  random_frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>),<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>frequencies</span>
<span id="cb13-26">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb13-27">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration,</span>
<span id="cb13-28">                                        sampling_rate,</span>
<span id="cb13-29">                                        random_frequencies,</span>
<span id="cb13-30">                                        amplitudes)</span>
<span id="cb13-31">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb13-32">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb13-33">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb13-34">  </span>
<span id="cb13-35">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector_envelope</span>(complex_tone,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb13-36">  </span>
<span id="cb13-37">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(counter <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>){</span>
<span id="cb13-38">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone</span>
<span id="cb13-39">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb13-40">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##smoothing</span></span>
<span id="cb13-41">    smooth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb13-42">    </span>
<span id="cb13-43">    tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> complex_tone[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>smooth])</span>
<span id="cb13-44">    </span>
<span id="cb13-45">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tone_series, complex_tone[(smooth<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)])</span>
<span id="cb13-46">    </span>
<span id="cb13-47">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#tone_series &lt;- c(tone_series,complex_tone)</span></span>
<span id="cb13-48">  }</span>
<span id="cb13-49">  </span>
<span id="cb13-50">}</span>
<span id="cb13-51"></span>
<span id="cb13-52"></span>
<span id="cb13-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb13-54">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb13-55">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> tone_series,</span>
<span id="cb13-56">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> tone_series,</span>
<span id="cb13-57">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb13-58">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb13-59">)</span>
<span id="cb13-60"></span>
<span id="cb13-61">sound_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7_series_30d"</span></span>
<span id="cb13-62"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span>
<span id="cb13-63">av<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">av_audio_convert</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".mp3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span>
<span id="cb13-64"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.remove</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span></code></pre></div>
</details>
</div>
<p><audio controls=""> <source src="C7_series_30d.mp3" type="audio/wav"> </audio></p>
<p>That goes for almost a minute, not sure If I got the feeling I was headed toward C7.</p>
</section>
<section id="stepping-distances-between-chords" class="level2">
<h2 class="anchored" data-anchor-id="stepping-distances-between-chords">Stepping distances between chords</h2>
<p>NOTE: This section is rough because I keep going back and fixing code, and the answers change.</p>
<p>I was going to start working on an endless chord progression algorithm, but I realized I needed to pause and figure this out instead.</p>
<p>The issue is to consider movement from one chord to another in the vector space. In the above examples I was moving away from C7 or toward C7, simply on the basis of the similarity scores from other chords.</p>
<p>What if I wanted to move between two different chords, say a C major triad, and a G major triad.</p>
<p>It’s still the morning, so my vector space math isn’t totally working.</p>
<p>I’m at C major triad in the multi-dimensional vector space. I see G major triad over there as another point in vector space. I could go straight there. Or, I could go anywhere else from C before going to G. With those options out of the way, let’s do equal-interval steps.</p>
<p>Starting simple. Choose the C major chord, sort it by decreasing similarity. Find, the G major triad in the list. Print the chord that is halfway between the two.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">starting_chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C major triad"</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> T)</span>
<span id="cb14-2"></span>
<span id="cb14-3">target_id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(starting_chord_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'G major triad'</span>)</span>
<span id="cb14-4"></span>
<span id="cb14-5">middle_chord <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> starting_chord_similarities[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(target_id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)]</span>
<span id="cb14-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(middle_chord)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>     Cm13 
0.8095027 </code></pre>
</div>
</div>
<p>This one works fine between C and G</p>
<p>another mistake:I had made a mistake earlier in the code that removed repeats, I previously got a D 9 (13), which sounded good. The Dm13(#11) is harded on the ears.</p>
<p>From before the fix: I played C major triad, D 9 (13), and G major triad on a piano and it sounded great! Neat.</p>
<p>I’m curious what some of the other chords near this spot are like.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">starting_chord_similarities[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(target_id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(target_id<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>      Ab∆9(#11)       Gm13(#11)       Cm13(#11)            Cm13         F9(#11) 
      0.8113597       0.8111463       0.8101535       0.8095027       0.8088325 
C melodic minor      Em (add 9) 
      0.8085356       0.8084651 </code></pre>
</div>
</div>
<p>After another fix, mostly look fine. Good that there are good options!</p>
<p>After fix: The Ab∆9 sounds great in between C and G. The Eb7(b9) works very well. I was almost worried this would start breaking, but still sounding good.</p>
<p>From before the fix: Nice, all of those work pretty well. I might need to switch gears today and make a tool to compute these while I’m at the piano.</p>
<p>But let’s persist a little longer.</p>
<p>What if we want to get there in more equal interval steps.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">starting_chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C major triad"</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> T)</span>
<span id="cb18-2"></span>
<span id="cb18-3">target_id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(starting_chord_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'G major triad'</span>)</span>
<span id="cb18-4"></span>
<span id="cb18-5">num_steps <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb18-6"></span>
<span id="cb18-7">progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> starting_chord_similarities[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,target_id,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>num_steps ))]</span>
<span id="cb18-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(progression)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>C major triad      Edim(∆7)          Cm13        C note G major triad 
    1.0000000     0.8436963     0.8095027     0.7804147     0.7302693 </code></pre>
</div>
</div>
<p>This is pretty cool, damn. Sometimes I’m getting back scales instead of chords, so I’d need to clean this up a little bit.</p>
<p>I’m using existing chords in the space as the locations for intermediate chords. It would be interesting to add a little noise into the process so that some the chords are not quite “right”. Also, interesting to explore unequal steps.</p>
<p>The method I’m using is not necessarily finding the exact middle between two chords in chord space, but that’s OK these ones sound good.</p>
<p>Also, not necessarily getting symmetrical answers. fun.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1">starting_chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order_no_repeats[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G major triad"</span>,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> T)</span>
<span id="cb20-2"></span>
<span id="cb20-3">target_id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(starting_chord_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C major triad'</span>)</span>
<span id="cb20-4"></span>
<span id="cb20-5">num_steps <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb20-6"></span>
<span id="cb20-7">progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> starting_chord_similarities[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,target_id,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>num_steps ))]</span>
<span id="cb20-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(progression)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>G major triad      Bdim(∆7)  C Mixolydian        G note C major triad 
    1.0000000     0.8436963     0.8095027     0.7804147     0.7302693 </code></pre>
</div>
</div>
<hr>
<p>using this a chord progression calculator. Had to switch to the similarity matrix with lots of repeat chords.</p>
<p>Overall, I’d like to refine this chord vector space “intermediate” chord finder. It has potential. But, lots of little issues right now.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1">start_chord <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D7"</span></span>
<span id="cb22-2">end_chord <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G7"</span></span>
<span id="cb22-3"></span>
<span id="cb22-4">starting_chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(second_order[start_chord,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> T)</span>
<span id="cb22-5"></span>
<span id="cb22-6">target_id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(starting_chord_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> end_chord)</span>
<span id="cb22-7"></span>
<span id="cb22-8">num_steps <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb22-9"></span>
<span id="cb22-10">progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> starting_chord_similarities[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,target_id,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>num_steps ))]</span>
<span id="cb22-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(progression)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       D7   D∆9(13)        G7 
1.0000000 0.8595150 0.7792604 </code></pre>
</div>
</div>
</section>
<section id="improving-an-intermediate-chord-finder-function" class="level2">
<h2 class="anchored" data-anchor-id="improving-an-intermediate-chord-finder-function">Improving an intermediate chord finder function</h2>
<p>I need to clean up a bunch of things. Ideally, I want a function that takes a chord similarity matrix, a start and end chord, and computes intermediate chords and returns them.</p>
<ul>
<li>delete non-unique chord, lots of bugs but seems fine now</li>
<li>made synonym list for deleted chords</li>
<li>not yet implemented, search by synonym</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb24-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pre-processing to get the chord vectors</span></span>
<span id="cb24-3"></span>
<span id="cb24-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load chord vectors</span></span>
<span id="cb24-5">c_chord_excel <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> rio<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">import</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chord_vectors.xlsx"</span>)</span>
<span id="cb24-6"></span>
<span id="cb24-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># grab feature vectors</span></span>
<span id="cb24-8">c_chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>])</span>
<span id="cb24-9"></span>
<span id="cb24-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># assign row names to the third column containing chord names</span></span>
<span id="cb24-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(c_chord_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb24-12"></span>
<span id="cb24-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define all keys</span></span>
<span id="cb24-14">keys <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Db"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ab"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>)</span>
<span id="cb24-15"></span>
<span id="cb24-16"></span>
<span id="cb24-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the excel sheet only has chords in C</span></span>
<span id="cb24-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through the keys, permute the matrix to get the chords in the next key</span></span>
<span id="cb24-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add the permuted matrix to new rows in the overall chord_matrix</span></span>
<span id="cb24-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)) {</span>
<span id="cb24-21"></span>
<span id="cb24-22">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) {</span>
<span id="cb24-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># initialize chord_matrix with C matrix</span></span>
<span id="cb24-24">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_matrix</span>
<span id="cb24-25"></span>
<span id="cb24-26">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb24-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#permute the matrix as a function of iterator</span></span>
<span id="cb24-28">    new_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(c_chord_matrix[, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>],c_chord_matrix[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)] )</span>
<span id="cb24-29"></span>
<span id="cb24-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rename the rows with the new key</span></span>
<span id="cb24-31">    new_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>, keys[i], c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span>
<span id="cb24-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(new_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> new_names</span>
<span id="cb24-33"></span>
<span id="cb24-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># append the new_matrix to chord_matrix</span></span>
<span id="cb24-35">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(chord_matrix,new_matrix)</span>
<span id="cb24-36"></span>
<span id="cb24-37">  }</span>
<span id="cb24-38">}</span>
<span id="cb24-39"></span>
<span id="cb24-40">chord_properties <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb24-41">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(c_chord_excel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>type,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)),</span>
<span id="cb24-42">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(keys, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(c_chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]),</span>
<span id="cb24-43">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chord_names  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_matrix),</span>
<span id="cb24-44">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">synonyms =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NA</span>),</span>
<span id="cb24-45">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">database_chord =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span></span>
<span id="cb24-46">)</span>
<span id="cb24-47"></span>
<span id="cb24-48">first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix))</span>
<span id="cb24-49"></span>
<span id="cb24-50"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># find repeats and build synonym list</span></span>
<span id="cb24-51">repeat_indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb24-52"></span>
<span id="cb24-53">first_occurrence <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>()</span>
<span id="cb24-54"></span>
<span id="cb24-55"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]){</span>
<span id="cb24-56">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># get the current row</span></span>
<span id="cb24-57">  evaluate_row <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> first_order[i,]</span>
<span id="cb24-58"></span>
<span id="cb24-59">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># don't count the current item as a repeat</span></span>
<span id="cb24-60">  evaluate_row[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb24-61"></span>
<span id="cb24-62">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># repeats are the ids for any other 1s found</span></span>
<span id="cb24-63">  repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(evaluate_row <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> )</span>
<span id="cb24-64"></span>
<span id="cb24-65">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(repeats) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb24-66">  }</span>
<span id="cb24-67"></span>
<span id="cb24-68">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(repeats) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">&gt;</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>){</span>
<span id="cb24-69">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#add to list of repeat items</span></span>
<span id="cb24-70">    repeat_indices <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(repeat_indices,repeats)</span>
<span id="cb24-71"></span>
<span id="cb24-72">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add synonyms</span></span>
<span id="cb24-73">    chord_properties<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>synonyms[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">synonyms =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_matrix)[repeats])</span>
<span id="cb24-74">  }</span>
<span id="cb24-75"></span>
<span id="cb24-76">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> first_occurrence <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>){</span>
<span id="cb24-77">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%in%</span> repeat_indices <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>){</span>
<span id="cb24-78">      first_occurrence <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(first_occurrence,i)</span>
<span id="cb24-79">      chord_properties<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>database_chord[i] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span></span>
<span id="cb24-80">    }</span>
<span id="cb24-81">  }</span>
<span id="cb24-82">}</span>
<span id="cb24-83"></span>
<span id="cb24-84"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># keep only unique chord, recompute similarities</span></span>
<span id="cb24-85">chord_matrix_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[first_occurrence,]</span>
<span id="cb24-86">first_order_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix_no_repeats))</span>
<span id="cb24-87">second_order_no_repeats <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(first_order_no_repeats)</span>
<span id="cb24-88"></span>
<span id="cb24-89"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># remove scales and individual notes</span></span>
<span id="cb24-90">only_chords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_properties <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb24-91">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">filter</span>(type<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"scale"</span>,</span>
<span id="cb24-92">         type<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">!=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"key"</span>,</span>
<span id="cb24-93">         database_chord <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span>
<span id="cb24-94"></span>
<span id="cb24-95">second_order_chords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> second_order_no_repeats[only_chords<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord_names,</span>
<span id="cb24-96">                                               only_chords<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord_names]</span>
<span id="cb24-97"></span>
<span id="cb24-98"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#################################</span></span>
<span id="cb24-99"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># FUNCTIONS</span></span>
<span id="cb24-100"><span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">#################################</span></span>
<span id="cb24-101"></span>
<span id="cb24-102">generate_intermediate_chords <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(start,</span>
<span id="cb24-103">                                         target,</span>
<span id="cb24-104">                                         steps,</span>
<span id="cb24-105">                                         chord_similarity_matrix</span>
<span id="cb24-106">){</span>
<span id="cb24-107">  ordered_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(chord_similarity_matrix[start,],<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span>T)</span>
<span id="cb24-108">  target_id <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">which</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(ordered_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> target)</span>
<span id="cb24-109">  progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> ordered_similarities[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">floor</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,target_id,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">length.out =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>steps ))]</span>
<span id="cb24-110">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(progression)</span>
<span id="cb24-111">}</span>
<span id="cb24-112"></span>
<span id="cb24-113"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_intermediate_chords</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G7"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">steps =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, second_order_chords)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       C7      Gsus  D13susb9   Em7(11)        G7 
1.0000000 0.8677997 0.8211606 0.7944620 0.7368894 </code></pre>
</div>
</div>
<p>That’s good enough for now. I have a bunch more things I’d want to add to this function</p>
<ul>
<li>add option to print more choices (near neighbors)</li>
<li>add option to choose chords with X number of notes</li>
</ul>
<section id="listening-to-a-progression" class="level3">
<h3 class="anchored" data-anchor-id="listening-to-a-progression">listening to a progression</h3>
<p>From C7 to G7</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">chord_progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_intermediate_chords</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G7"</span>, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">steps =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>, second_order_chords)</span>
<span id="cb26-2">chord_progression <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(chord_progression[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>],</span>
<span id="cb26-3">                       chord_progression[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>],</span>
<span id="cb26-4">                       chord_progression</span>
<span id="cb26-5">                       )</span>
<span id="cb26-6"></span>
<span id="cb26-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb26-8">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb26-9">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb26-10">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Middle C, frequencies of sine waves in Hz</span></span>
<span id="cb26-11">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>, <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># D</span></span>
<span id="cb26-12">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb26-13">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb26-14">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb26-15">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb26-16">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb26-17">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb26-18">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb26-19">                 <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb26-20">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb26-21">                 <span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)</span>
<span id="cb26-22"></span>
<span id="cb26-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through chords</span></span>
<span id="cb26-24">counter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span></span>
<span id="cb26-25"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(chord_progression)) {</span>
<span id="cb26-26">  counter <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> counter<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb26-27">  amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">names</span>(chord_progression[i]),]</span>
<span id="cb26-28">  </span>
<span id="cb26-29">  random_frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>),<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">replace=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>frequencies</span>
<span id="cb26-30">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb26-31">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration,</span>
<span id="cb26-32">                                        sampling_rate,</span>
<span id="cb26-33">                                        random_frequencies,</span>
<span id="cb26-34">                                        amplitudes)</span>
<span id="cb26-35">  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># normalize for 16 bit</span></span>
<span id="cb26-36">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb26-37">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb26-38">  </span>
<span id="cb26-39">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">vector_envelope</span>(complex_tone,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>)</span>
<span id="cb26-40">  </span>
<span id="cb26-41">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span>(counter <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>){</span>
<span id="cb26-42">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone</span>
<span id="cb26-43">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb26-44">    <span class="do" style="color: #5E5E5E;
background-color: null;
font-style: italic;">##smoothing</span></span>
<span id="cb26-45">    smooth <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)</span>
<span id="cb26-46">    </span>
<span id="cb26-47">    tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> (tone_series[(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(smooth<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">-1</span>))<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(tone_series)] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> complex_tone[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>smooth])</span>
<span id="cb26-48">    </span>
<span id="cb26-49">    tone_series <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(tone_series, complex_tone[(smooth<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(complex_tone)])</span>
<span id="cb26-50">    </span>
<span id="cb26-51">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#tone_series &lt;- c(tone_series,complex_tone)</span></span>
<span id="cb26-52">  }</span>
<span id="cb26-53">  </span>
<span id="cb26-54">}</span>
<span id="cb26-55"></span>
<span id="cb26-56"></span>
<span id="cb26-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># use tuneR to convert to wave</span></span>
<span id="cb26-58">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(</span>
<span id="cb26-59">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> tone_series,</span>
<span id="cb26-60">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> tone_series,</span>
<span id="cb26-61">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate,</span>
<span id="cb26-62">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span></span>
<span id="cb26-63">)</span>
<span id="cb26-64"></span>
<span id="cb26-65">sound_name <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C7toG7"</span></span>
<span id="cb26-66"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">writeWave</span>(wave,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span>
<span id="cb26-67">av<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">av_audio_convert</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>),<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".mp3"</span>), <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">verbose=</span><span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">FALSE</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "/Users/mattcrump/Github/homophony.github.io/blog/25_1_25_24_r_sounds/C7toG7.mp3"</code></pre>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">file.remove</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">paste0</span>(sound_name,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">".wav"</span>))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
<p><audio controls=""> <source src="C7toG7.mp3" type="audio/wav"> </audio></p>
<p>I think I am nearing the end of wanting to listen to things in terms of sine waves. Maybe I’ll try midi later.</p>
</section>
</section>
<section id="endless-progression" class="level2">
<h2 class="anchored" data-anchor-id="endless-progression">Endless progression</h2>
<p>Didn’t get this far today.</p>
<p>Goals:</p>
<ul>
<li>start on some chord</li>
<li>move away from the chord in similarity terms</li>
<li>after some steps, re-center on the current chord</li>
</ul>


</section>

 ]]></description>
  <category>computer music</category>
  <category>tuneR</category>
  <category>R music</category>
  <guid>https://homophony.quest/blog/25_1_25_24_r_sounds/</guid>
  <pubDate>Wed, 24 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/25_1_25_24_r_sounds/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Week of 1/21 - 1/27 daily practice post</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/24_1_24_24_weekly_practice/</link>
  <description><![CDATA[ 




<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> diffusers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DiffusionPipeline</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> transformers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> set_seed</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> PIL <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random</span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ssl</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-8">ssl._create_default_https_context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ssl._create_unverified_context</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#locate library</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#model_id = "./stable-diffusion-v1-5"</span></span>
<span id="cb1-12">model_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dreamshaper-xl-turbo"</span></span>
<span id="cb1-13"></span>
<span id="cb1-14">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DiffusionPipeline.from_pretrained(</span>
<span id="cb1-15">    pretrained_model_name_or_path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../../../bigFiles/huggingface/dreamshaper-xl-turbo/"</span></span>
<span id="cb1-16">)</span>
<span id="cb1-17"></span>
<span id="cb1-18">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline.to(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span>)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recommended if your computer has &lt; 64 GB of RAM</span></span>
<span id="cb1-21">pipeline.enable_attention_slicing(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max"</span>)</span>
<span id="cb1-22"></span>
<span id="cb1-23">prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"musical pattern. music wallpaper. intense music trip. music everywhere."</span></span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> s <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>):</span>
<span id="cb1-26">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> n <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]:</span>
<span id="cb1-27">    seed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span></span>
<span id="cb1-28">    num_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-29">    set_seed(seed)</span>
<span id="cb1-30">    </span>
<span id="cb1-31">    image <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline(prompt,height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,num_images_per_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,num_inference_steps<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>num_steps)</span>
<span id="cb1-32">    </span>
<span id="cb1-33">    image_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"images/synth_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.jpeg"</span></span>
<span id="cb1-34">    </span>
<span id="cb1-35">    image_save <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> image.images[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].save(image_name.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(seed,num_steps))</span></code></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/24_1_24_24_weekly_practice/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>musical pattern. music wallpaper. intense music trip. music everywhere. - Dreamshaper v7</p>
</div></div><p>Trying out a single post to record daily practice exercises that I will continue to update throughout a week. It’s 1/24 and I will have to reconstruct what might have happened earlier this week.</p>
<section id="section" class="level2">
<h2 class="anchored" data-anchor-id="section">1/21</h2>
<ul>
<li>did a couple of chord reaction time tests</li>
<li>got into the 7b5 chords a little bit, playing them in all keys very slowly</li>
</ul>
</section>
<section id="section-1" class="level2">
<h2 class="anchored" data-anchor-id="section-1">1/22</h2>
<ul>
<li>Drilled 7b5 chords a bunch</li>
</ul>
</section>
<section id="section-2" class="level2">
<h2 class="anchored" data-anchor-id="section-2">1/23</h2>
<ul>
<li>missed a day really oops</li>
<li>played “all of me” a couple times</li>
</ul>
</section>
<section id="section-3" class="level2">
<h2 class="anchored" data-anchor-id="section-3">1/24</h2>
<p>Major triads</p>
<p>Went through all of the below in all keys, anti-clockwise through circle of fifths</p>
<ul>
<li>play them once</li>
<li>played the triad in right hand, with different bass notes from the triad</li>
<li>played the triad up through keyboard through the inversions</li>
<li>played the triad down through the inversions</li>
<li>played the triad once, on the first inversion</li>
<li>played the triad once, on the second inversion</li>
</ul>
<p>I didn’t make too many mistakes, but I was more rusty at this then I thought I would be. I’m still slow on Db and Ab.</p>
<p>Starting on the different inversions is interesting. When I’m really into a jam, I don’t think about what inversions to play and they just happen (on a good day). But, in this case, I’m not used to deliberately trying to play a specific triad in a specific inversion. Playing the second inversion was hardest for some reason.</p>
</section>
<section id="section-4" class="level2">
<h2 class="anchored" data-anchor-id="section-4">1/25</h2>
<p>Found a lead sheet for Nate Smith’s Retold. Love this song. Challenging 9/8 rhythm. Messed about with this for a while.</p>
</section>
<section id="section-5" class="level2">
<h2 class="anchored" data-anchor-id="section-5">1/26</h2>
<p>More retold</p>
</section>
<section id="section-6" class="level2">
<h2 class="anchored" data-anchor-id="section-6">1/27</h2>
<p>Thinking more about symmetry, scales, chords and the circle of fifths.</p>
<ul>
<li>Started on C.
<ul>
<li>add G and F, the next notes going clock-wise or anti-clockwise
<ul>
<li>This creates Csus, F (add 9), Gsus7 (without the iii or V)</li>
</ul></li>
<li>add D and Bb
<ul>
<li>scale = C D F G Bb (a 5 note scale)</li>
</ul></li>
<li>add A and Eb
<ul>
<li>scale = C D Eb F G A Bb (7 note scale)</li>
</ul></li>
<li>add E and Ab
<ul>
<li>scale = C D Eb E F G Ab A Bb (9 note scale)</li>
<li>messed about with building chords here</li>
<li>Chords with C (F Bb Eb Ab) are built off the anti-clockwise circle of fifths</li>
<li>Chords with C (G D A E) are built off the clockwise circle</li>
</ul></li>
</ul></li>
</ul>


</section>

 ]]></description>
  <category>piano practice</category>
  <guid>https://homophony.quest/blog/24_1_24_24_weekly_practice/</guid>
  <pubDate>Wed, 24 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/24_1_24_24_weekly_practice/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Minerva and expectancy from a chord vector space</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/23_1_23_24_minerva/</link>
  <description><![CDATA[ 




<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> diffusers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> DiffusionPipeline</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> transformers <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> set_seed</span>
<span id="cb1-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> PIL <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> Image</span>
<span id="cb1-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> torch</span>
<span id="cb1-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random</span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> ssl</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> os</span>
<span id="cb1-8">ssl._create_default_https_context <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ssl._create_unverified_context</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#locate library</span></span>
<span id="cb1-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#model_id = "./stable-diffusion-v1-5"</span></span>
<span id="cb1-12">model_id <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"dreamshaper-xl-turbo"</span></span>
<span id="cb1-13"></span>
<span id="cb1-14">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> DiffusionPipeline.from_pretrained(</span>
<span id="cb1-15">    pretrained_model_name_or_path <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"../../../../bigFiles/huggingface/dreamshaper-xl-turbo/"</span></span>
<span id="cb1-16">)</span>
<span id="cb1-17"></span>
<span id="cb1-18">pipeline <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline.to(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"mps"</span>)</span>
<span id="cb1-19"></span>
<span id="cb1-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Recommended if your computer has &lt; 64 GB of RAM</span></span>
<span id="cb1-21">pipeline.enable_attention_slicing(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"max"</span>)</span>
<span id="cb1-22"></span>
<span id="cb1-23">prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Minerva robot of wisdom. binary codes. thundercat cartoon. music. music theory. conceptual. reverberation. resonance. colorful."</span></span>
<span id="cb1-24"></span>
<span id="cb1-25"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> s <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">30</span>):</span>
<span id="cb1-26">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> n <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>]:</span>
<span id="cb1-27">    seed <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> s<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">21</span></span>
<span id="cb1-28">    num_steps <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> n<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb1-29">    set_seed(seed)</span>
<span id="cb1-30">    </span>
<span id="cb1-31">    image <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> pipeline(prompt,height <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,width <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1024</span>,num_images_per_prompt <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,num_inference_steps<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>num_steps)</span>
<span id="cb1-32">    </span>
<span id="cb1-33">    image_name <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"images/synth_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">_</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{}</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">.jpeg"</span></span>
<span id="cb1-34">    </span>
<span id="cb1-35">    image_save <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> image.images[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>].save(image_name.<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">format</span>(seed,num_steps))</span></code></pre></div>
</details>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/23_1_23_24_minerva/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Minerva robot of wisdom. binary codes. thundercat cartoon. music. music theory. conceptual. reverberation. resonance. colorful.</p>
</div></div><p>This is a scratchpad post with R code to explore some esoteric computational modeling ideas. I want to get coding, but will put a bit of context around this.</p>
<p>My plan is to take the chord vector space I made yesterday (see last post), and put it into the memory of a MINERVA-II model. Then, I’m going to probe the model with various input patterns, and see what comes out.</p>
<p>I wish I had time to review MINERVA-II in more depth here, but I don’t. Very quickly, MINERVA-II is an instance-based model of human memory processes by Douglas Hintzman <span class="citation" data-cites="hintzman1984">(Hintzman 1984)</span>. This model was inspired by Richard Semon’s memory theory <span class="citation" data-cites="semon1923">(Semon 1923)</span>, which I find very poetic. Semon made up his own terms so that he could more precisely state his theoretical ideas, including words like engram, engraphic, and homophony.</p>
<p>The basic idea is that people store the patterns of individual experiences in memory. And, a current pattern can retrieve old memories by similarity. MINERVA-II uses a resonance metaphor. A pattern is presented to a memory system. The pattern activates all of the traces in memory, in proportion to their similarity to the pattern. In this way, memory is call and response process. The pattern of the present moment resonates with the memory system bringing forth a chorus of activated traces. This memory response is called the echo. The resonance between the structure of the pattern in the present moment and similar traces from the past is what Richard Semon called homophony. I have some <a href="https://www.crumplab.com/cognition/articles/modules/L11_Instance_Theory.html">lecture material on these concepts in my intro to cognition course</a>.</p>
<p>Now onto the R code. Memory is the chord vector matrix. I can “probe” the model by giving it any feature vector as an input. The input probe activates every chord in memory by it’s similarity (using the vector cosine). The memory responds as a similarity weighted sum. All of traces are multiplied by their similarity, and then summed up into a single feature vector, called the echo.</p>
<section id="loading-the-chord-vector-space" class="level2">
<h2 class="anchored" data-anchor-id="loading-the-chord-vector-space">Loading the chord vector space</h2>
<p>The excel file for the chord vector space is available from the <a href="https://github.com/homophony/homophony.github.io/tree/main">github repo for this blog</a>.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tidyverse)</span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># pre-processing to get the chord vectors</span></span>
<span id="cb2-3"></span>
<span id="cb2-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># load chord vectors</span></span>
<span id="cb2-5">c_chord_excel <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> rio<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">import</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chord_vectors.xlsx"</span>)</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># grab feature vectors</span></span>
<span id="cb2-8">c_chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>])</span>
<span id="cb2-9"></span>
<span id="cb2-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># assign row names to the third column containing chord names</span></span>
<span id="cb2-11"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(c_chord_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb2-12"></span>
<span id="cb2-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define all keys</span></span>
<span id="cb2-14">keys <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Db"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ab"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>)</span>
<span id="cb2-15"></span>
<span id="cb2-16"></span>
<span id="cb2-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the excel sheet only has chords in C</span></span>
<span id="cb2-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through the keys, permute the matrix to get the chords in the next key</span></span>
<span id="cb2-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add the permuted matrix to new rows in the overall chord_matrix</span></span>
<span id="cb2-20"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)) {</span>
<span id="cb2-21">  </span>
<span id="cb2-22">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) {</span>
<span id="cb2-23">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># initialize chord_matrix with C matrix</span></span>
<span id="cb2-24">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_matrix</span>
<span id="cb2-25">    </span>
<span id="cb2-26">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb2-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#permute the matrix as a function of iterator</span></span>
<span id="cb2-28">    new_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(c_chord_matrix[, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>],c_chord_matrix[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)] )</span>
<span id="cb2-29">    </span>
<span id="cb2-30">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rename the rows with the new key</span></span>
<span id="cb2-31">    new_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>, keys[i], c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span>
<span id="cb2-32">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(new_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> new_names</span>
<span id="cb2-33">    </span>
<span id="cb2-34">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># append the new_matrix to chord_matrix</span></span>
<span id="cb2-35">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(chord_matrix,new_matrix)</span>
<span id="cb2-36">  </span>
<span id="cb2-37">    }</span>
<span id="cb2-38">}</span></code></pre></div>
</details>
</div>
<p>Each chord is represented as a vector with 12 features, corresponding to each of the 12 possible notes. If a note is in a chord, then the note feature gets a 1 in the vector. All other features are set to 0.</p>
<p>The first 10 rows look like this:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1">knitr<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">kable</span>(c_chord_excel[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,])</span></code></pre></div>
</details>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 5%">
<col style="width: 19%">
<col style="width: 20%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">key</th>
<th style="text-align: left;">type</th>
<th style="text-align: left;">item</th>
<th style="text-align: right;">C</th>
<th style="text-align: right;">Db</th>
<th style="text-align: right;">D</th>
<th style="text-align: right;">Eb</th>
<th style="text-align: right;">E</th>
<th style="text-align: right;">F</th>
<th style="text-align: right;">Gb</th>
<th style="text-align: right;">G</th>
<th style="text-align: right;">Ab</th>
<th style="text-align: right;">A</th>
<th style="text-align: right;">Bb</th>
<th style="text-align: right;">B</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">key</td>
<td style="text-align: left;">C note</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">scale</td>
<td style="text-align: left;">C major scale</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C major triad</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C minor triad</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">Cm6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C (add 9)</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">Cm (add 9)</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">dominant 7th</td>
<td style="text-align: left;">C7</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">dominant 7th</td>
<td style="text-align: left;">C9</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>The vector space includes one feature vector for all of the following chords and scales:</p>
<p>C note, C major scale, C major triad, C minor triad, C6, Cm6, C (add 9), Cm (add 9), C7, C9, C9(#11), C9 (13), C13 (#11), C∆7, C∆9, C∆9(#11), C∆9(13), C∆7(#5), C∆7(b5), Cm7, Cm9, Cm11, Cm7(11), Cm13, Cm13(#11), Cm7(b5), Cm9(b5), Cm11(b5), Csus, C7sus, C9sus, C13sus, C7susb9, C13susb9, C7(b5), C7(#5), C7(b9), C7#9b5, C7#9#5, C7b9b5, C7b9#5, Cm∆7, Cm∆9, Cdim, Co7, Cdim(∆7), C7#11#9, C chromatic, C whole-tone, C major pentatonic, C minor pentatonic, C Ionian, C Dorian, C Phrygian, C Lydian, C Mixolydian, C Aeolian, C Locrian, C maj 6th diminished, C melodic minor, C half-step/whole-step, C whole-step/half-step, C Blues</p>
<p>The above shows everything in the key of C. The matrix contains all of the above in all of the keys. For a total of 756 patterns to be stored in the memory matrix.</p>
<p>In the next sections I’ll be giving this model an input pattern as a “reminder cue”, and then computing what the model “remembers” based on the cue. This is a way of asking about associations or expectations between one pattern and a history of other patterns. The answers the model gives back are entirely dependent on the nature of the memory traces.</p>
<p>The current set of chord vectors is very unlike my own musical experience. If I tried to capture my own musical experience as a series of individual traces, I would be inputting one feature vector for every chord, note, scale, or let’s say short phrase, that I have ever played in my entire life. That collection of traces would be severely biased in terms key, as I way over played things in CFGDA in my life.</p>
<p>The chord vector space I’m using here is more like an uniform agent who played every chord and scale equally frequently in all keys. So, the expectations returned by the model are in relation to that kind of unbiased musical history.</p>
</section>
<section id="minerva-ii-modeling" class="level2">
<h2 class="anchored" data-anchor-id="minerva-ii-modeling">MINERVA II modeling</h2>
<section id="probe-with-a-c-note" class="level3">
<h3 class="anchored" data-anchor-id="probe-with-a-c-note">Probe with a C note</h3>
<p>The following code shows the basic steps in probing the memory with a cue pattern. I used a C note, which is coded as a single 1, followed by 11 zeros.</p>
<p>The cosine similarity between the probe and all patterns in memory is computed. There is a possibility of “tuning” the similarities by raising them to an exponent, but I’ll talk about that later.</p>
<p>The individual patterns in memory are multiplied by their similarity to the probe. This allows the cue to selectively retrieve memories that contain features in the cue. For example, traces that have 0 similarity to the cue will be multiplied by 0, and thus eliminated from the echo. The echo is produced by summing the similarity weighted traces.</p>
<p>The values in the echo are additive and can get very large. In the last step I divide all of the values in the echo by the maximum value to squish them between 0 and 1.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb4-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb4-3"></span>
<span id="cb4-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe with a C</span></span>
<span id="cb4-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Each of the 12 spots is a note, starting on C</span></span>
<span id="cb4-6">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb4-7"></span>
<span id="cb4-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb4-9">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb4-10"></span>
<span id="cb4-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb4-12">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb4-13"></span>
<span id="cb4-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb4-15">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb4-16"></span>
<span id="cb4-17">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.2163667 0.4790949 0.4772587 0.4200609 0.5390773 0.3656121 0.5390773 
       Ab         A        Bb         B 
0.4200609 0.4772587 0.4790949 0.2163667 </code></pre>
</div>
</div>
<p>I like to think of the echo as the reminder values. Given the model hears a C, it is reminded of things that have a C in them. The echo is a similarity weighted sum of all of those things.</p>
</section>
<section id="full-cacophony" class="level3">
<h3 class="anchored" data-anchor-id="full-cacophony">Full cacophony</h3>
<p>A couple short detours before going in a more musical direction with this.</p>
<p>The echo in MINERVA-II is the concept that memory retrieval acts like a chorus of singers, where each singer is an individual memory trace.</p>
<p>Consider what would happen if memory was totally unselective and everything was retrieved all at once.</p>
<p>In the model, this would be like hearing all of the chords in the memory all at once. This can be represented by summing every trace together into one echo. This is the same as summing down the columns of the matrix like so:</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>(memory)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  C  Db   D  Eb   E   F  Gb   G  Ab   A  Bb   B 
338 338 338 338 338 338 338 338 338 338 338 338 </code></pre>
</div>
</div>
<p>Each note appears 338 times across all of the chords in memory. If they were all played at once, the echo would sound like every note played simultaneously with a loudness of 338. If I normalize the echo by dividing by 338, I’d get all 1s, which would be saying play all the notes at 100% amplitude. In other words, if memory reminded you of everything, everywhere, all at once, it sounds like full cacophony.</p>
</section>
<section id="the-sound-of-unbiased-memory-from-c" class="level3">
<h3 class="anchored" data-anchor-id="the-sound-of-unbiased-memory-from-c">The sound of unbiased memory from C</h3>
<p>MINERVA-II allows for selective retrieval of prior memories. The primary mechanism is that a probe pattern activates memories by similarity.</p>
<p>In this example, I apply the <code>ceiling()</code> function to the similarities and transform any positive value to 1, and leave the 0s at 0.</p>
<p>I’m using the C probe, so any chord pattern that has a C element in it will get a 1, and any chord pattern that does not have a C in it will get a 0.</p>
<p>I calculate both the echo and the normalized echo.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb8-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb8-3"></span>
<span id="cb8-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe with a C</span></span>
<span id="cb8-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Each of the 12 spots is a note, starting on C</span></span>
<span id="cb8-6">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb8-7"></span>
<span id="cb8-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb8-9">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb8-10"></span>
<span id="cb8-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># force similarities to 0 or 1</span></span>
<span id="cb8-12">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">ceiling</span>(similarities)</span>
<span id="cb8-13"></span>
<span id="cb8-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb8-15">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  C  Db   D  Eb   E   F  Gb   G  Ab   A  Bb   B 
338  81 172 169 148 191 130 191 148 169 172  81 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb10-2">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.2396450 0.5088757 0.5000000 0.4378698 0.5650888 0.3846154 0.5650888 
       Ab         A        Bb         B 
0.4378698 0.5000000 0.5088757 0.2396450 </code></pre>
</div>
</div>
<p>The first echo is basically co-occurrence context vector containing the co-occurrence frequency between C and the other notes, counting across all of the patterns in memory. The second echo is the same information, just in terms of proportion to the largest value.</p>
<p>C always co-occurs with itself. C co-occurs next most often with G and F, and then Bb and D etc.</p>
<p>This echo is not as cacophonous as hearing every single chord in memory played at the same time. However, i’m guessing this would still sound pretty cacophonous, as it is the sound of about 338 patterns that all contain a C played at the same time.</p>
<p>At some point, hopefully today, I’d like to synthesize tones using these echo values for note amplitude and hear what they sound like.</p>
</section>
<section id="increasingly-selective-echoes-of-c" class="level3">
<h3 class="anchored" data-anchor-id="increasingly-selective-echoes-of-c">Increasingly selective echoes of C</h3>
<p>MINERVA-II has a few options for controlling how many memories get added into the echo. After computing similarities between the probe and memory traces, the similarities can be raised to a power before weighting the traces. As the exponent increases, smaller similarity values get squashed into 0 and become effectively 0. Larger similarity values remain proportionally larger. Perfectly similar traces remain at 1 regardless of the exponent.</p>
<p>The bottom line is that as the power is raised, fewer traces (only the most similar) are allowed to contribute to the echo. As a result, the echo becomes much less cacophonous.</p>
<p>The code below shows what happens when the probe is a C, and the exponent is raised to 1, 3, 11, and 51.</p>
<p>When the exponent is small, C is the loudest feature in the echo, but many other notes have some loudness too.</p>
<p>When the exponent is increased, the C remains the loudest, but the other notes get softer.</p>
<p>In the case of this vector space, driving up the exponent really, really high, essentially causes only the identical patterns in memory to be retrieved. In the extreme, the C retrieves itself, and there are not other sounds of co-occurrence.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb12-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe with a C</span></span>
<span id="cb12-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Each of the 12 spots is a note, starting on C</span></span>
<span id="cb12-6">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>)</span>
<span id="cb12-7"></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb12-9">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb12-10"></span>
<span id="cb12-11">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)))</span>
<span id="cb12-12">echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.2163667 0.4790949 0.4772587 0.4200609 0.5390773 0.3656121 0.5390773 
       Ab         A        Bb         B 
0.4200609 0.4772587 0.4790949 0.2163667 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>)))</span>
<span id="cb14-2">echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.1731107 0.4114787 0.4288597 0.3797730 0.4798933 0.3271873 0.4798933 
       Ab         A        Bb         B 
0.3797730 0.4288597 0.4114787 0.1731107 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>)))</span>
<span id="cb16-2">echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>          C          Db           D          Eb           E           F 
1.000000000 0.005599951 0.016650339 0.025743877 0.020721170 0.026529044 
         Gb           G          Ab           A          Bb           B 
0.018535963 0.026529044 0.020721170 0.025743877 0.016650339 0.005599951 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">51</span>)))</span>
<span id="cb18-2"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">round</span>(echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo)))</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code> C Db  D Eb  E  F Gb  G Ab  A Bb  B 
 1  0  0  0  0  0  0  0  0  0  0  0 </code></pre>
</div>
</div>
</section>
</section>
<section id="messing-around" class="level2">
<h2 class="anchored" data-anchor-id="messing-around">Messing around</h2>
<p>I’m using this code block to try different probe patterns and see what happens. In general, the echo contains the elements of the probe, and then partial activation of other elements in approximate orders that seem to make musical sense.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb20-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb20-3"></span>
<span id="cb20-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb20-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C major triad'</span>,]</span>
<span id="cb20-6"></span>
<span id="cb20-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb20-8">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb20-9"></span>
<span id="cb20-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb20-11">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb20-12"></span>
<span id="cb20-13">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb20-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb20-15"></span>
<span id="cb20-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(echo,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        G         C         E         A         D        Bb         F         B 
1.0000000 0.9648918 0.9283912 0.6326961 0.6308542 0.4828259 0.4436583 0.4141189 
       Gb        Eb        Db        Ab 
0.3390815 0.3329919 0.3127329 0.3109608 </code></pre>
</div>
</div>
<section id="adding-probes-together" class="level3">
<h3 class="anchored" data-anchor-id="adding-probes-together">Adding probes together</h3>
<p>Let’s say one is playing a Dm7 chord in the left hand, and a G as part of a melody line. A probe could be constructed by adding together the vector for Dm7 and G. I’m also sorting the echo by feature intensity. I wonder if the order of notes in the echo could work for figuring out which scales to play over what chords and situations.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb22-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb22-3"></span>
<span id="cb22-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb22-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>(chord_matrix[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Dm7'</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'G note'</span>),])</span>
<span id="cb22-6"></span>
<span id="cb22-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb22-8">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb22-9"></span>
<span id="cb22-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb22-11">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb22-12"></span>
<span id="cb22-13">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb22-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb22-15"></span>
<span id="cb22-16"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sort</span>(echo,<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">decreasing =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>)</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C         D         G         F         A         E        Bb        Eb 
1.0000000 0.9970230 0.9948008 0.9326157 0.9326157 0.5419088 0.5419088 0.4465277 
        B        Ab        Gb        Db 
0.4378429 0.3103659 0.2854669 0.2686588 </code></pre>
</div>
</div>
</section>
<section id="discrepancy" class="level3">
<h3 class="anchored" data-anchor-id="discrepancy">Discrepancy</h3>
<p>The echo contains partial activations of non-probe features. These in some sense represent an expectation about what elements usually co-occur with the probe features in the stored memory traces.</p>
<p>It may be interesting to compute a discrepancy vector, which is a difference between the pattern in the probe and the echo.</p>
<p>These differences in expectation might be interesting to think about in terms of musical tension and resolution.</p>
<p>random notes:</p>
<ul>
<li>subtraction introduces negative values and negative similarity</li>
<li>which way to subtract? probe-echo or echo-probe</li>
</ul>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb24" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb24-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb24-3"></span>
<span id="cb24-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb24-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C note'</span>,]</span>
<span id="cb24-6"></span>
<span id="cb24-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb24-8">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb24-9"></span>
<span id="cb24-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb24-11">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb24-12"></span>
<span id="cb24-13">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb24-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb24-15">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.2163667 0.4790949 0.4772587 0.4200609 0.5390773 0.3656121 0.5390773 
       Ab         A        Bb         B 
0.4200609 0.4772587 0.4790949 0.2163667 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1">discrepancy <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>probe</span>
<span id="cb26-2">discrepancy</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
0.0000000 0.2163667 0.4790949 0.4772587 0.4200609 0.5390773 0.3656121 0.5390773 
       Ab         A        Bb         B 
0.4200609 0.4772587 0.4790949 0.2163667 </code></pre>
</div>
</div>
<p>In this case the discrepancy vector has activation across all notes except C. Although the activation is not uniform, this discrepancy vector is similar to the chromatic scale, which is all of the notes.</p>
<p>Submitting the discrepancy vector as a probe to memory, and then listing the top 10 most similar traces in memory as a way to interpret the vector in terms of the chord patterns.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> discrepancy</span>
<span id="cb28-2"></span>
<span id="cb28-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb28-4">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb28-5"></span>
<span id="cb28-6">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chords =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(similarities),</span>
<span id="cb28-7">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">similarities =</span> similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb28-8">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(similarities))</span>
<span id="cb28-9">df[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>,]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                   chords similarities
C chromatic   C chromatic    0.9274934
Db chromatic Db chromatic    0.9274934
D chromatic   D chromatic    0.9274934
Eb chromatic Eb chromatic    0.9274934
E chromatic   E chromatic    0.9274934
F chromatic   F chromatic    0.9274934
Gb chromatic Gb chromatic    0.9274934
G chromatic   G chromatic    0.9274934
Ab chromatic Ab chromatic    0.9274934
A chromatic   A chromatic    0.9274934</code></pre>
</div>
</div>
<p>Adding the echo to probe. After hearing a note the model retrieves the echo as a response. In this new moment the original note and the retrieved chorus are a new combined probe.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb30" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb30-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb30-3"></span>
<span id="cb30-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb30-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C note'</span>,]</span>
<span id="cb30-6"></span>
<span id="cb30-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb30-8">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb30-9"></span>
<span id="cb30-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb30-11">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb30-12"></span>
<span id="cb30-13">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb30-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb30-15">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.2163667 0.4790949 0.4772587 0.4200609 0.5390773 0.3656121 0.5390773 
       Ab         A        Bb         B 
0.4200609 0.4772587 0.4790949 0.2163667 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb32" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add echo to probe</span></span>
<span id="cb32-2">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> probe<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span>echo</span>
<span id="cb32-3"></span>
<span id="cb32-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb32-5">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb32-6"></span>
<span id="cb32-7">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span></span>
<span id="cb32-8"></span>
<span id="cb32-9">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb32-10">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb32-11">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
1.0000000 0.6284936 0.7864139 0.7701819 0.7288598 0.8174667 0.6928161 0.8174667 
       Ab         A        Bb         B 
0.7288598 0.7701819 0.7864139 0.6284936 </code></pre>
</div>
</div>
<p>This is like having steps of iterative retrieval. A variation is to get the retrieved echo and then submit the echo as the probe. What happens is that the echo fills up with more general co-occurrence information.</p>
</section>
<section id="echo-meaning" class="level3">
<h3 class="anchored" data-anchor-id="echo-meaning">Echo meaning</h3>
<p>The echo is a feature vector in the same space as the chords. In general, the echo will contain more activation across all elements compared to any individual chord. This is because the echo sums over many chords, and typically sums over enough chords that all notes end up in the sum.</p>
<p>In this sense, the fact that an echo usually has partial activation across all notes, makes the pattern in the echo similar to the chromatic scale, which has all notes. This is not a particularly interesting or nuanced meaning of the echo. If the echo was all 1s, then it would be the chromatic scale.</p>
<p>The activation values in the echo depend on the activation function that raises similarity to a power. A given echo can be interpreted in terms of the original chord vectors by calculating similarity between the echo and all of the chords, and then looking at the chords that are most similar. When the exponent is small, the most similar chords returned are all the chromatic scales (which are identical), and other chords with lots of notes in them.</p>
<p>As the exponent is raised higher, the pattern in the echo grows more similar to the probe pattern (with some extra activations), and the echo becomes similar to different patterns of chords, eventually honing in on the same ordering as the probe pattern would have.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb34" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb34-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb34-3"></span>
<span id="cb34-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb34-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C note'</span>,]</span>
<span id="cb34-6"></span>
<span id="cb34-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb34-8">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb34-9"></span>
<span id="cb34-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb34-11">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">9</span></span>
<span id="cb34-12"></span>
<span id="cb34-13">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb34-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb34-15">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>         C         Db          D         Eb          E          F         Gb 
1.00000000 0.02269835 0.06352622 0.08694634 0.07307524 0.09134910 0.06433469 
         G         Ab          A         Bb          B 
0.09134910 0.07307524 0.08694634 0.06352622 0.02269835 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb36" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1">echo_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(echo,memory)</span>
<span id="cb36-2">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chords =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(echo_similarities),</span>
<span id="cb36-3">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">similarities =</span> echo_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb36-4">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(echo_similarities))</span>
<span id="cb36-5">df[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                       chords similarities
C note                 C note    0.9732485
Csus                     Csus    0.6645644
C minor triad   C minor triad    0.6620904
F major triad   F major triad    0.6620904
Adim                     Adim    0.6596165
C major triad   C major triad    0.6542962
F minor triad   F minor triad    0.6542962
Ab major triad Ab major triad    0.6518223
A minor triad   A minor triad    0.6518223
Fsus                     Fsus    0.6489305
Gsus                     Gsus    0.6489305
Cdim                     Cdim    0.6469109
Gbdim                   Gbdim    0.6469109
F (add 9)           F (add 9)    0.6178398
Cm6                       Cm6    0.6156973
F7                         F7    0.6156973
Am7(b5)               Am7(b5)    0.6156973
Fm (add 9)         Fm (add 9)    0.6110898
C6                         C6    0.6089473
F∆7                       F∆7    0.6089473</code></pre>
</div>
</div>
<p>In this variation the echo is submitted as the probe to generate a second echo. The first echo is already very general because even a single C note is in many chords. The second echo is extremely general because it has positive similarity to all chords. The values in the second echo can be thought of as reflecting very general expectations about note co-occurrence. The first echo also has some of these very general expectations.</p>
<p>What happens here is some proportion of the second echo, which represents super general features, is subtracted from the first echo. This allows the first echo to reflect more nuanced and specific expectations given the probe.</p>
<p>It seems necessary to turn this into a shiny app or something, where the parameters can be wiggled around as a way to explore whether there are interesting things going on.</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb38" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb38-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb38-3"></span>
<span id="cb38-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb38-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'Dm7'</span>,]</span>
<span id="cb38-6"></span>
<span id="cb38-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb38-8">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb38-9"></span>
<span id="cb38-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb38-11">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb38-12"></span>
<span id="cb38-13">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb38-14">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb38-15">echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
0.9918638 0.2479850 1.0000000 0.4178599 0.5037347 0.9766951 0.3491312 0.7242753 
       Ab         A        Bb         B 
0.3603990 0.9657370 0.4859291 0.4261934 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb40" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add echo to probe</span></span>
<span id="cb40-2">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo</span>
<span id="cb40-3"></span>
<span id="cb40-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb40-5">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb40-6"></span>
<span id="cb40-7">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb40-8"></span>
<span id="cb40-9">second_echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb40-10">second_echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> second_echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(second_echo))</span>
<span id="cb40-11">second_echo</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>        C        Db         D        Eb         E         F        Gb         G 
0.9946912 0.5014757 1.0000000 0.6381784 0.7237607 0.9389013 0.5636836 0.9371725 
       Ab         A        Bb         B 
0.5704482 0.9385442 0.7156892 0.6432196 </code></pre>
</div>
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb42" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># subtract a weighted portion of second echo</span></span>
<span id="cb42-2">more_specific_echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>(.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>second_echo)</span>
<span id="cb42-3"></span>
<span id="cb42-4">echo_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(more_specific_echo,memory)</span>
<span id="cb42-5">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chords =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(echo_similarities),</span>
<span id="cb42-6">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">similarities =</span> echo_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb42-7">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(echo_similarities))</span>
<span id="cb42-8">df[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">20</span>,]</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                               chords similarities
Dm7                               Dm7    0.8386204
F6                                 F6    0.8386204
D minor triad           D minor triad    0.7413557
F major triad           F major triad    0.7368539
Dm7(11)                       Dm7(11)    0.7272550
D minor pentatonic D minor pentatonic    0.7272550
F major pentatonic F major pentatonic    0.7272550
G9sus                           G9sus    0.7272550
Dm9                               Dm9    0.6825942
Bb∆9                             Bb∆9    0.6724193
D7#11#9                       D7#11#9    0.6640474
F (add 9)                   F (add 9)    0.6126096
Dm11                             Dm11    0.6022796
G13sus                         G13sus    0.6022796
G7sus                           G7sus    0.5976717
C13sus                         C13sus    0.5929913
Gm11                             Gm11    0.5929913
F9 (13)                       F9 (13)    0.5880307
D7sus                           D7sus    0.5869733
D Blues                       D Blues    0.5853489</code></pre>
</div>
</div>
<p>Lots of breadcrumbs here to follow up on later. Ultimately, I didn’t get close to what I was hoping to accomplish. Making a note here that it would be interesting if this type of analysis could provide insight into chord movement from one to another.</p>
<hr>
<p>Some code for listening to echoes in terms of complex tones made from sine waves, with sine wave amplitude for each note set by the echo intensity for each note.</p>
<p>need to explore this</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb44" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">library</span>(tuneR)</span>
<span id="cb44-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Function to generate a complex tone</span></span>
<span id="cb44-3">generate_complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(duration, sampling_rate, frequencies, amplitudes) {</span>
<span id="cb44-4">  time_points <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>, duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span>sampling_rate)</span>
<span id="cb44-5">  complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sapply</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">seq_along</span>(frequencies), <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">function</span>(i) {</span>
<span id="cb44-6">    amplitudes[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sin</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span> <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> pi <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> frequencies[i] <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> time_points)</span>
<span id="cb44-7">  })</span>
<span id="cb44-8">  </span>
<span id="cb44-9">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">return</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rowSums</span>(complex_tone))</span>
<span id="cb44-10">}</span>
<span id="cb44-11"></span>
<span id="cb44-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Set parameters</span></span>
<span id="cb44-13">duration <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># seconds</span></span>
<span id="cb44-14">sampling_rate <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">44100</span>  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hz (standard audio sampling rate)</span></span>
<span id="cb44-15">frequencies <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">261.63</span>,</span>
<span id="cb44-16"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">277.18</span>,</span>
<span id="cb44-17"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">293.66</span>,</span>
<span id="cb44-18"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">311.13</span>,</span>
<span id="cb44-19"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">329.63</span>,</span>
<span id="cb44-20"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">349.23</span>,</span>
<span id="cb44-21"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">369.99</span>,</span>
<span id="cb44-22"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">392</span>,</span>
<span id="cb44-23"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">415.3</span>,</span>
<span id="cb44-24"><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">440</span>,</span>
<span id="cb44-25"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">466.16</span>,</span>
<span id="cb44-26"><span class="fl" style="color: #AD0000;
background-color: null;
font-style: inherit;">493.88</span>)  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># frequencies of sine waves in Hz</span></span>
<span id="cb44-27"></span>
<span id="cb44-28"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb44-29">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb44-30"></span>
<span id="cb44-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe with a C</span></span>
<span id="cb44-32"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Each of the 12 spots is a note, starting on C</span></span>
<span id="cb44-33">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C note'</span>,]</span>
<span id="cb44-34"></span>
<span id="cb44-35"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb44-36">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb44-37"></span>
<span id="cb44-38"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb44-39">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb44-40"></span>
<span id="cb44-41">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb44-42">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb44-43"></span>
<span id="cb44-44">amplitudes <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo   <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># amplitudes of sine waves</span></span>
<span id="cb44-45"></span>
<span id="cb44-46"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate complex tone</span></span>
<span id="cb44-47">complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">generate_complex_tone</span>(duration, sampling_rate, frequencies, amplitudes)</span>
<span id="cb44-48">complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(complex_tone))</span>
<span id="cb44-49">complex_tone <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> complex_tone<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32767</span></span>
<span id="cb44-50"></span>
<span id="cb44-51"></span>
<span id="cb44-52">wave <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">Wave</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">left =</span> complex_tone, </span>
<span id="cb44-53">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">right =</span> complex_tone,</span>
<span id="cb44-54">             <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">samp.rate =</span> sampling_rate, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">bit =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>)</span>
<span id="cb44-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#writeWave(wave,"test.wav")</span></span></code></pre></div>
</details>
</div>
<hr>
<p>experiment graveyard of fun ideas</p>
<p>extruding a subtracted echo from the middle out</p>
<div class="cell">
<details open="" class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb45" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Try minerva</span></span>
<span id="cb45-2">memory <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix</span>
<span id="cb45-3"></span>
<span id="cb45-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># probe using row names</span></span>
<span id="cb45-5">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> chord_matrix[<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">'C7'</span>,]</span>
<span id="cb45-6"></span>
<span id="cb45-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span>(i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">10</span>){</span>
<span id="cb45-8"></span>
<span id="cb45-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># compute similarities between probe and all traces</span></span>
<span id="cb45-10">similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(probe,memory)</span>
<span id="cb45-11"></span>
<span id="cb45-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># tuning function: raise similarities to a power </span></span>
<span id="cb45-13">activations <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> similarities<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span></span>
<span id="cb45-14"></span>
<span id="cb45-15">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">colSums</span>((memory<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(activations)))</span>
<span id="cb45-16">echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(echo))</span>
<span id="cb45-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#echo</span></span>
<span id="cb45-18"></span>
<span id="cb45-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add echo to probe</span></span>
<span id="cb45-20">subtracted_echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>probe <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rnorm</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">0</span>,.<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">05</span>)</span>
<span id="cb45-21">subtracted_echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtracted_echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">max</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">abs</span>(subtracted_echo))</span>
<span id="cb45-22">subtracted_echo <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtracted_echo<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">^</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb45-23"></span>
<span id="cb45-24">echo_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> RsemanticLibrarian<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine_x_to_m</span>(subtracted_echo, memory)</span>
<span id="cb45-25"></span>
<span id="cb45-26">df <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">data.frame</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chords =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(echo_similarities),</span>
<span id="cb45-27">                 <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">similarities =</span> echo_similarities) <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">%&gt;%</span></span>
<span id="cb45-28">  <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">arrange</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">desc</span>(echo_similarities))</span>
<span id="cb45-29"></span>
<span id="cb45-30">next_chord <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> df<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>chord[<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">sample</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)]</span>
<span id="cb45-31"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#probe &lt;- chord_matrix[next_chord,]</span></span>
<span id="cb45-32">probe <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> subtracted_echo</span>
<span id="cb45-33"></span>
<span id="cb45-34"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">print</span>(next_chord)</span>
<span id="cb45-35"></span>
<span id="cb45-36">}</span></code></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "D note"
[1] "C∆7"
[1] "D note"
[1] "Am9"
[1] "D note"
[1] "B7(#5)"
[1] "Asus"
[1] "A note"
[1] "E note"
[1] "A note"</code></pre>
</div>
</div>



</section>
</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0">
<div id="ref-hintzman1984" class="csl-entry">
Hintzman, Douglas L. 1984. <span>“MINERVA 2: A Simulation Model of Human Memory.”</span> <em>Behavior Research Methods, Instruments, &amp; Computers</em> 16 (2): 96101. <a href="https://doi.org/10.3758/BF03202365">https://doi.org/10.3758/BF03202365</a>.
</div>
<div id="ref-semon1923" class="csl-entry">
Semon, R. 1923. <span>“Mnemic Psychology (b. Duffy, Trans.).”</span> <em>Concord, Ma: George Allen &amp; Unwin.(original Work Published 1909)</em>.
</div>
</div></section></div> ]]></description>
  <category>chord similarity</category>
  <category>MINERVA</category>
  <guid>https://homophony.quest/blog/23_1_23_24_minerva/</guid>
  <pubDate>Tue, 23 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/23_1_23_24_minerva/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Chord Similarity analysis table</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/22_1_22_24_chord_similarity/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/22_1_22_24_chord_similarity/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>piano chord similarity analysis. cartoon. colorful. musical. science.</p>
</div></div><p>This is a quick post with some tools for looking at chord similarity.</p>
<p>I took all of the chords on this <a href="https://musictheory.pugetsound.edu/mt21c/ChordLabels.html">music theory page</a>, and represented them in a chord vector space using one-hot codes.</p>
<p>Each chord is represented as a vector with 12 features, corresponding to each of the 12 possible notes. If a note is in a chord, then the note feature get’s a 1 in the vector. All other features are set to 0.</p>
<p>Here’s a few examples of what the vectors look like.</p>
<div class="cell">
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 6%">
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
<col style="width: 4%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">key</th>
<th style="text-align: left;">type</th>
<th style="text-align: left;">item</th>
<th style="text-align: right;">C</th>
<th style="text-align: right;">Db</th>
<th style="text-align: right;">D</th>
<th style="text-align: right;">Eb</th>
<th style="text-align: right;">E</th>
<th style="text-align: right;">F</th>
<th style="text-align: right;">Gb</th>
<th style="text-align: right;">G</th>
<th style="text-align: right;">Ab</th>
<th style="text-align: right;">A</th>
<th style="text-align: right;">Bb</th>
<th style="text-align: right;">B</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">key</td>
<td style="text-align: left;">C note</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">scale</td>
<td style="text-align: left;">C major scale</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C major triad</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C minor triad</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">C</td>
<td style="text-align: left;">triads</td>
<td style="text-align: left;">C6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>I created vectors for 47 chords across all keys. This results in a matrix with 564 rows (for each chord vector) and 12 columns for each note feature.</p>
<p>Next, I used the <a href="https://en.wikipedia.org/wiki/Cosine_similarity">vector cosine</a> to compute the similarity between each chord and every other chords. That results in a 564x564 chord-similarity matrix.</p>
<p>In the matrix, similarity ranges from 0 (no similarity) to 1 (perfect similarity). The similarity function basically tracks how many overlapping features there are between two chords. If each chord has zero shared notes, then similarity will be 0. As a chord increases in the number of shared notes, then similarity increases.</p>
<p>If I have extra time I may play around with some additional ways to visualize this matrix. For now, I’m using the datatable library to load the matrix into this webpage. It’s a bit clunky and very large.</p>
<p>The table should scroll left and right. The columns can be sorted ascending or descending by clicking the little arrows beside a column name. Sorting from the largest value to the smallest value will re-arrange the row-names on the left side. This produces an ordered list of chords from most to least similar to the column name that was clicked.</p>
<section id="shiny-app" class="level2">
<h2 class="anchored" data-anchor-id="shiny-app">Shiny app</h2>
<p>update</p>
<p>There were originally tables in this post, but they were basically unusable. Ideally, I’d like to search the tables on my ipad while it is sitting on my piano.</p>
<p>I tried to make a shiny app using webr (that would run without a server), but I couldn’t make it work.</p>
<p>So, here is a shiny app that does work:</p>
<p><a href="https://crumplab.shinyapps.io/webr-chord-similarity/" class="uri">https://crumplab.shinyapps.io/webr-chord-similarity/</a></p>
</section>
<section id="first-order-chord-similarity" class="level2">
<h2 class="anchored" data-anchor-id="first-order-chord-similarity">First order chord similarity</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># import excel sheet</span></span>
<span id="cb1-2">c_chord_excel <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> rio<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">import</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"chord_vectors.xlsx"</span>)</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># grab feature vectors</span></span>
<span id="cb1-5">c_chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">as.matrix</span>(c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">15</span>])</span>
<span id="cb1-6"></span>
<span id="cb1-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># assign row names to the third column containing chord names</span></span>
<span id="cb1-8"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(c_chord_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>]</span>
<span id="cb1-9"></span>
<span id="cb1-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define all keys</span></span>
<span id="cb1-11">keys <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">c</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Db"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"D"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Eb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"E"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"F"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Gb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"G"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Ab"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"A"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Bb"</span>,<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"B"</span>)</span>
<span id="cb1-12"></span>
<span id="cb1-13"></span>
<span id="cb1-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># the excel sheet only has chords in C</span></span>
<span id="cb1-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># loop through the keys, permute the matrix to get the chords in the next key</span></span>
<span id="cb1-16"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># add the permuted matrix to new rows in the overall chord_matrix</span></span>
<span id="cb1-17"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> (i <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)) {</span>
<span id="cb1-18">  </span>
<span id="cb1-19">  <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> (i <span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>) {</span>
<span id="cb1-20">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># initialize chord_matrix with C matrix</span></span>
<span id="cb1-21">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> c_chord_matrix</span>
<span id="cb1-22">    </span>
<span id="cb1-23">  } <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">else</span> {</span>
<span id="cb1-24">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#permute the matrix as a function of iterator</span></span>
<span id="cb1-25">    new_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(c_chord_matrix[, (<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">14</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">12</span>],c_chord_matrix[, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">:</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>i)] )</span>
<span id="cb1-26">    </span>
<span id="cb1-27">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># rename the rows with the new key</span></span>
<span id="cb1-28">    new_names <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">gsub</span>(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"C"</span>, keys[i], c_chord_excel[,<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>])</span>
<span id="cb1-29">    <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(new_matrix) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> new_names</span>
<span id="cb1-30">    </span>
<span id="cb1-31">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># append the new_matrix to chord_matrix</span></span>
<span id="cb1-32">    chord_matrix <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rbind</span>(chord_matrix,new_matrix)</span>
<span id="cb1-33">  </span>
<span id="cb1-34">    }</span>
<span id="cb1-35">}</span>
<span id="cb1-36"></span>
<span id="cb1-37"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># calculate similarities between keys</span></span>
<span id="cb1-38">key_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(chord_matrix)</span>
<span id="cb1-39"></span>
<span id="cb1-40"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># calculate similarities between keys</span></span>
<span id="cb1-41">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix))</span>
<span id="cb1-42"></span>
<span id="cb1-43">chord_properties <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">tibble</span>(</span>
<span id="cb1-44">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">type =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(c_chord_excel<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">$</span>type,<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">length</span>(keys)),</span>
<span id="cb1-45">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">key =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">rep</span>(keys, <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">each =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">dim</span>(c_chord_matrix)[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>]),</span>
<span id="cb1-46">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">chord_names  =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_similarities)</span>
<span id="cb1-47">)</span>
<span id="cb1-48"></span>
<span id="cb1-49">chord_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(chord_properties,</span>
<span id="cb1-50">                            chord_similarities)</span>
<span id="cb1-51"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(chord_similarities) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb1-52"></span>
<span id="cb1-53"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print table</span></span>
<span id="cb1-54"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># try datatable options...didn't work as I wanted</span></span>
<span id="cb1-55"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># DT::datatable(</span></span>
<span id="cb1-56"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   chord_similarities[1:50,1:50],</span></span>
<span id="cb1-57"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   extensions = c("FixedColumns","SearchBuilder","Buttons"),</span></span>
<span id="cb1-58"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   options = list(</span></span>
<span id="cb1-59"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     paging = TRUE,</span></span>
<span id="cb1-60"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     pageLength =  25,</span></span>
<span id="cb1-61"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     fixedColumns = list(leftColumns = 4),</span></span>
<span id="cb1-62"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     dom = "BQlfrtip",</span></span>
<span id="cb1-63"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     searchBuilder = TRUE,</span></span>
<span id="cb1-64"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     search = list(return = TRUE),</span></span>
<span id="cb1-65"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#     buttons = 'colvis'</span></span>
<span id="cb1-66"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">#   )</span></span>
<span id="cb1-67"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># )</span></span>
<span id="cb1-68"></span>
<span id="cb1-69">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(</span>
<span id="cb1-70">  chord_similarities,</span>
<span id="cb1-71">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extensions =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"FixedColumns"</span>,</span>
<span id="cb1-72">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">options =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb1-73">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">paging =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb1-74">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pageLength =</span>  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>,</span>
<span id="cb1-75">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixedColumns =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">leftColumns =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb1-76">  )</span>
<span id="cb1-77">)</span></code></pre></div>
</div>
</section>
<section id="second-order-similarities" class="level2">
<h2 class="anchored" data-anchor-id="second-order-similarities">Second-order similarities</h2>
<p>update: this table has been moved to the shiny app</p>
<p>This table uses the above cosine similarity vectors for each chord as the basis vectors, and then computes another similarity matrix. The approach has interesting properties in other domains like computational modeling of word semantics. Just curious to look at it in this context.</p>
<p>One basic observation is that in the first-order similarity space (above), there are many 0 similarities between pairs. For example, the single note C has 0 similarity to every other single note, because each note only has one feature, and the features never overlap. However, in the second-order matrix, individual notes now have some positive similarity to each other. This is because the whole vector of similarities for C (from above), now has many shared elements with the vectors for the other chords, and a similarity can be computed.</p>
<p>I suspect this table will have some more musically interesting things going on.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1">first_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(<span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">t</span>(chord_matrix))</span>
<span id="cb2-2">second_order <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> lsa<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cosine</span>(first_order)</span>
<span id="cb2-3"></span>
<span id="cb2-4">second_order_similarities <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">cbind</span>(chord_properties,</span>
<span id="cb2-5">                                   second_order)</span>
<span id="cb2-6"><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">row.names</span>(second_order_similarities) <span class="ot" style="color: #003B4F;
background-color: null;
font-style: inherit;">&lt;-</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">NULL</span></span>
<span id="cb2-7"></span>
<span id="cb2-8">DT<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">::</span><span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">datatable</span>(</span>
<span id="cb2-9">  second_order_similarities,</span>
<span id="cb2-10">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">extensions =</span> <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"FixedColumns"</span>,</span>
<span id="cb2-11">  <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">options =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(</span>
<span id="cb2-12">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">paging =</span> <span class="cn" style="color: #8f5902;
background-color: null;
font-style: inherit;">TRUE</span>,</span>
<span id="cb2-13">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">pageLength =</span>  <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">25</span>,</span>
<span id="cb2-14">    <span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">fixedColumns =</span> <span class="fu" style="color: #4758AB;
background-color: null;
font-style: inherit;">list</span>(<span class="at" style="color: #657422;
background-color: null;
font-style: inherit;">leftColumns =</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)</span>
<span id="cb2-15">  )</span>
<span id="cb2-16">)</span></code></pre></div>
</div>


</section>

 ]]></description>
  <category>chord similarity</category>
  <guid>https://homophony.quest/blog/22_1_22_24_chord_similarity/</guid>
  <pubDate>Mon, 22 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/22_1_22_24_chord_similarity/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Expanding the chord reaction time test</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/21_1_21_24_chord_reaction_time/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/21_1_21_24_chord_reaction_time/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>cartoon thundercat scientist building a synthesizer. laboratory. science. 80s cartoon. space music.</p>
</div></div><p>I’ve been tinkering with a web-based “Chord Reaction Time” test to measure how fast I can play various chords on demand. The first version of the task had all the keys and three basic 7th chords (7, -7, ∆7). The newer version adds a selection screen, and more chords to practice. I don’t have a demo to share yet, but here’s a figure of what happens:</p>
<p><img src="https://homophony.quest/blog/21_1_21_24_chord_reaction_time/images/Screenshot 2024-01-21 at 8.05.10 AM.png" class="img-fluid"></p>
<p>At the moment, whenever I play a chord in response to a name, I have to simultaneously press the space bar on a bluetooth keyboard. That keypress records my reaction time to the chord and triggers the next trial. This coming week I’ll look into using the laptop microphone to record reaction time by analyzing amplitude changes (and then later something similar using MIDI).</p>
<p>Yesterday afternoon I tried my hand at all the chords in all the keys. I haven’t looked at the data yet, but I’m sure it will tell me that I’m slow at the chords that I already know I’m slow on.</p>
<p>This graph averages over keys and shows mean chord reaction time for each type of tested chord form.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/21_1_21_24_chord_reaction_time/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I should dedicate practice to all of the chords above the 2 second range.</p>
<p>One question I have is whether the performance on this kind of test would meaningfully predict my ability to fluently play through chord changes on lead sheets.</p>
<p>My experience right now is that I can often get through chord changes on a new song without too much trouble, but I’ll get tripped on the altered chords with flats and sharps. More like fall all over the place. I can’t dead reckon those chords. Instead, I’ll sit there and take 5 seconds or more to puzzle out the chord, which ruins the flow. If I’m feeling diligent I might work out a fingering pattern that makes it easy to play in that context. However, I don’t appear to retain any of that chord knowledge in a general way.</p>
<p>I assume that if I was able to play all my chords really well in the context of playing lead sheets then my reaction times in the above graph would be faster and more uniform. I could practice this test over and over, and I’m pretty confident that I would get faster on the slower chords. However, one possibility is that that this learning would be somewhat specific to the peculiar demands of this very non-musical chord production task. So, it’s not clear to me that improvements derived from practicing chording in this task would fully generalize to helping me play lead sheets. At the same time, If I can get all the chords down to under 2 seconds in all the keys, that’s gotta help.</p>
<p>Breakfast time.</p>
<hr>
<p>I did practice some of the extended chords yesterday. This morning I did a round of practice/testing on the 7b9 chords.</p>
<p>Yesterday, 7b9 were initially excruciatingly slow. I couldn’t play any of them and had to construct them on the fly. As the graph below shows, I took over 12 seconds to produce some of the chords.</p>
<p>Practice felt very slow and I didn’t feel like I was locking in new patterns at a fingering level. For example, I can visualize a C7 chord immediately, and still can’t visualize a C7b9 (even after all this practice).</p>
<p>Nevertheless, the graph shows some substantial gains in chord production time. There were a few stages in learning to play this chord. Stage 1 was having no clue and working out each chord anew. In stage 2, I settled on a method to get to the 7b9: play the 7th chord in root position, go up 1 inversion, but instead of playing the root at the top, play 1 semitone above the root. Stage 2 was pretty slow also. At some point I realized that I already knew all of these chords as o7 chords. For example C7b9 without the root has E-G-Bb-Db, which are all the notes in Eo7, Go7, Bbo7, and Dbo7. In stage 3, I switched to translating the chord name, “C7b9”, and thinking play the o7 on the third (or, in this case Eo7). That helped a little bit in terms of speed, and I think it makes musical sense to build mental associations between the 7b9 and o7 anyway.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/21_1_21_24_chord_reaction_time/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>```</p>



 ]]></description>
  <category>practice</category>
  <category>chord reaction time</category>
  <guid>https://homophony.quest/blog/21_1_21_24_chord_reaction_time/</guid>
  <pubDate>Sun, 21 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/21_1_21_24_chord_reaction_time/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Estimating practice time needed, and a bit on contextual interference</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/19_1_19_24_Contextual_Interference/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Repeating practice in a key vs.&nbsp;alternating practice across keys</p>
</div></div><p>I’ve been having so much fun making time for more music. I so needed this.</p>
<p>As my next semester at Brooklyn College is about to begin next week, I’m hoping I can keep up some of this momentum. Coincidentally, this semester I am planning to turn some of my research program in cognitive psychology towards aspects of music cognition, and I ended up <a href="https://www.crumplab.com/blog/660_music_cognition/">posting about that a little bit on my main research blog yesterday</a>. The research won’t necessarily mean playing more music, but it should at least keep me on my fingers, so to speak.</p>
<p>Today’s post continues in the spirit of intermingling my interests in cognition and piano practice.</p>
<section id="recap" class="level2">
<h2 class="anchored" data-anchor-id="recap">Recap</h2>
<p>Over the past few posts I’ve been focusing on getting command of the maj6 diminished scale in the key of B. <a href="https://homophony.quest/blog/18_1_18_24_Relearning/">I measured my improvement with practice</a> and found a few things were happening. When I sit down to play the scale (I’m playing it as a series of chords ascending), there is a big start-up cost. On the first go round it took me 104 seconds to play the scale. Then a day later only about 60 seconds. Last night I started up at about 20 seconds. For each practice set, I also continued to produce the scale for 10 minutes, by playing it over and over, in what I might term massed repetitive practice. Within each practice set, my scale completion times decreased with each attempt. I usually got down to about 10 seconds to complete the scale. Still pretty slow, but making progress.</p>
<p>I can play the 7th chords of a regular major scale in C in about 3 seconds, from a cold start. So, I’m using 3 seconds as a rough achievement criterion. If I can get my B maj6 diminished scale to 3 seconds, then I’ll have achieved that somewhat arbitrary criterion. And, then I would literally be confident that I could play it in my sleep. I was trying to play it going to sleep in my head last night, and it is still slow to visualize.</p>
<p>I am definitely hitting a floor right now at about 10 seconds, and there could be several problems that I need to sort out. I don’t often play in B, and it might be one of my weakest keys over all. Sometimes I get confused about whether I should be playing an E or F (yikes). The maj6 diminished scales adds a b6, and sometimes I get confused about that note (G). I don’t know why I sometimes want to play A. I conceptually know the correct chords and fingerings, but can’t execute everytime, especially with speed. So, in cognitive psychology terms, I am running up against the speed-accuracy tradeoff. I can go slow and accurate, but errors creep in approaching 10 seconds, and then they really popoff if I push past faster.</p>
<p>If I limit my musical goals to getting this one scale down, then I have so many questions about how to go about doing that. Overall, it is clear that I need to practice, practice, practice, and I will meet my fluency criterion eventually. But, there are lots of things to practice. I could practice the chords ascending only, which is how I’m measuring my performance. I could practice up and down, or arpeggios, and all sorts of other stuff. I could practice other scales. I could practice in lentghy repetitive sessions, or takes lots of breaks and practice every other day, or longer. Infinite practice variations here.</p>
<p>Almost done with the recap. All of the above is about to connect to a phenomena in cognitive psychology called contextual interference. This phenomena shows that repeatedly practicing a motor sequence versus alternating practice between different motor sequences, can have notable consequences for learning, performance, and retention. And, I’d like to explore that with my own practice this morning.</p>
<p>But, because I am full of tangents, I need to attempt an answer to a burning question first.</p>
<p>How many practice attempts do I need to get my B maj6 diminished scale under 3 seconds?</p>
</section>
<section id="estimating-how-much-practice-i-need-with-my-own-practice-curve" class="level2">
<h2 class="anchored" data-anchor-id="estimating-how-much-practice-i-need-with-my-own-practice-curve">Estimating how much practice I need with my own practice curve</h2>
<p>This graph shows my learning curves for three different sets of practice attempts. I start producing the scale slowly, and then as I repeatedly attempt the scale, I pick up speed until I get down to about 10 seconds.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>What I can do next is take an average of these three learning curves, which looks like this:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>There is debate in the cognitive science literature about the functional form of this curve. Maybe it’s a power function, maybe it’s an exponential function. They are both pretty similar looking. Here’s what a power function fit looks like:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = log(mean_ft) ~ log(sets), data = df_avg)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.46986 -0.09867  0.01724  0.16628  0.31374 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  4.49031    0.10817   41.51   &lt;2e-16 ***
log(sets)   -0.63201    0.03874  -16.32   &lt;2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1983 on 34 degrees of freedom
Multiple R-squared:  0.8867,    Adjusted R-squared:  0.8834 
F-statistic: 266.2 on 1 and 34 DF,  p-value: &lt; 2.2e-16</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Looks pretty good to me, the line is going right through dots. So, the line can represent a kind of average practice curve. The neat thing is that I can keep drawing the line out following the power function. This allows me to use my existing data to make a prediction about how many practice attempts I need to get down to 3 seconds.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>So, according to the limited data that I collected, I should be able to get down to 3 seconds in 219 practice attempts. If I add up all of the scale completion times from 1 to 219 (that are implied by this curve), then it will take 1568 seconds to get there, or 26 minutes of repeated practice.</p>
<p>Wow, that surprises me actually, I thought it would take longer. And, this is only an estimate, it could be way off in either direction. For example, I’ve already practiced a total of 30 minutes, over 3 sets of 10 minutes. Maybe I should have tried 26 minutes the first time and just got it over with!</p>
<p>TBH I kind of want to go try this for 26 minutes as see what happens. Maybe I will set that aside as something I do later and report back. Instead, I will continue with the goal of this post.</p>
</section>
<section id="contextual-interference-and-mixed-vs-random-practice" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="contextual-interference-and-mixed-vs-random-practice">Contextual interference and mixed vs random practice</h2>
<blockquote class="blockquote">
<p>Shea, J. B., &amp; Morgan, R. L. (1979). Contextual interference effects on the acquisition, retention, and transfer of a motor skill. Journal of Experimental psychology: Human Learning and memory, 5(2), 179.</p>
</blockquote>
<p>The above paper showed a curious effect possibly relevant to practicing music.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/images/Screenshot 2024-01-19 at 11.16.09 AM.png" class="img-fluid"></p>
</div></div><p>Shea &amp; Morgan had people practice sequences of motor movements on an unfamiliar device. The device is shown in the margin.</p>
<p>On each practice trial, one of the stimulus lights would turn on. The light indicated one of three movement sequences to perform. For example, one of the movement sequences was to grab the tennis ball in the middle, then strike down the gates in a particular order:</p>
<ul>
<li>right rear, left middle, right front</li>
<li>right front, left middle, right rear</li>
<li>left front, right middle, left rear</li>
</ul>
<p>This is abstractly similar to learning to play a series of notes on a strange instrument.</p>
<p>The important manipulation in their experiment involved whether or not people repeatedly practiced a sequence, or had to randomly alternate between sequences.</p>
<p>One group received “blocked” practice training. They got practice on each of the three sequences. Each sequence was performed 18 times in a row. So, each sequence was grouped into a “block” of 18 practice attempts. This group got to practice a sequence repeatedly until they ran out of attempts, and then they moved onto the next sequence and practiced it on repeat.</p>
<p>The other group received “random” practice training. They practiced each sequence 18 times overall, but the order was totally randomized by the stimulus lights. This involves many more switches between sequences during practice. Let’s take a look at the data from the study:</p>
<p><img src="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/images/Screenshot 2024-01-19 at 11.28.03 AM.png" class="img-fluid"></p>
<p>The y-axis shows total time in seconds, which measures how fast people were able to produce a sequence. In the acquisition phase (when they were practicing the sequences), both groups got faster with practice. The random group started out the slowest, and made large gains with practice, but they didn’t end up as fast as the blocked group. The blocked group started out pretty fast, made smaller gains with practice, but ended up the fastest.</p>
<p>+1 for blocked practice right?</p>
<p>Not so fast. Shea &amp; Morgan also included a retention test. Some subjects waited 10 minutes after the acquisition before attempting the sequences again, others waited 10 whole days before producing the sequence again.</p>
<p>The retention graph has several things going on here. I should also mention that the type retention test was counterbalanced. Some participants who received blocked training also received a blocked version of the retention test, but others received a random version of the retention test; and vice versa for the random group.</p>
<p>The basic pattern shown in the retention graph is that participants who received random practice retained the more than the participants who received blocked practice. This seems almost paradoxical. The blocked practice group “learned the most”, or “performed the best” during acquisition, but they also forgot the most when trying to redo the sequences later on. The random group appeared to have inferior learning, but they retained what they learned much better than the blocked group, and they even performed better on the retention test than the best scores from the block group.</p>
<p>Are there implications of this result for music training? A quick search on google scholar shows several papers looking at blocked vs random practice schedules in music learning contexts. I haven’t had time to read them yet, but I assume there are positive findings showing some influence of blocking or randomly varying practice on learning musical skills. In general, this phenomena has been demonstrated across a fairly wide range of tasks, so I would expect it to generalize to motor skills on piano.</p>
<hr>
<p>I need to interrupt this post. I had ambitions to try blocked vs random practice myself, and I was going to do it. But, then I thought more about how I would do it so that I can measure my performance times, as well as how would I randomly tell myself what scales to play…and, then I realized I had to do something else first.</p>
<p>Begin the process of building computational assessment methods. Should be fun. This semester I have some plans to get more serious about this using MIDI and jspsych.</p>
<p>For now, I’m going to try something as simple as possible. The basic idea is to be able to have my ipad present a target stimulus for practice, like “A major triad”, or “c major scale”, or “C7 chord”, or whatever I want. I’ll set my ipad up on the piano, wait for the stimulus, and the try to play it as fast as possible. I’ll also add a little button on the screen to press when I finish playing the target stimulus. This will be really hacky from a cogsci perspective, but I’ll improve the precision later. For now, this will work to collect some rough personal data on my progress learning the maj6 diminished scale.</p>
<p>Time to roll up the javascript programming sleeves.</p>


</section>

 ]]></description>
  <category>practice</category>
  <category>cogsci</category>
  <category>contextual interference</category>
  <category>estimating practice time</category>
  <category>practice schedules</category>
  <guid>https://homophony.quest/blog/19_1_19_24_Contextual_Interference/</guid>
  <pubDate>Fri, 19 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/19_1_19_24_Contextual_Interference/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Assessing my 7th chords with a reaction time test</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/20_1_19_24_7th_chords/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Testing myself on 7th chords using a choice-reaction time procedure</p>
</div></div><p>This post is about collecting some performance data on my ability to play stuff. I have some longer term plans to improve on these methods for research purposes, but for now, I’m just interested in roughly tracking my own abilities.</p>
<p>In my last post I was about try out some different practice schedules, one of which would require me to randomly pick which keys to practice. That kind of stuff is annoying to do without a computer. Plus, if I’m about to collect a bunch of data in a bunch of conditions, I’d rather not code things and do data entry by hand.</p>
<p>So, I jumped ship and decided to start building little computerized measurement tools.</p>
<p>I put together a really simple choice reaction test using <a href="https://www.jspsych.org/7.3/">jspsych</a>, the same JavaScript library that I use for online cognition experiments.</p>
<p>To start, I decided to test myself on basic seventh chords in all keys. There are 12 different keys, and for this test, I used ∆7, 7, and -7 chords, for a total of 36 different chords.</p>
<p>The choice reaction time test is very simple. The program takes all of the possible chord names, randomly shuffles them, and then presents each name on the screen one at a time. I put my laptop on top of my piano, waited for the chord name to appear, and then played the chord as fast as I could on the piano. At the same time, I had my left thumb on the spacebar, and I pressed the spacebar roughly at the same time that I played the chord. This allowed me to measure the reaction time for each chord. I also had the program repeat all the chords randomly twice, so that I got two reaction time measures per chord.</p>
<p>I love jspsych. It took like 15 minutes to make this happen (granted, I have a bunch of prior experience using that library, and I was doing something very simple). Still, I already made the program and ran the test, and collected the data as a JSON variable. Woo hoo!</p>
<p>And, of course, this is really messy data. Ideally, I would have the reaction times for each note, say using MIDI or something. But, that’s for later.</p>
<p>I’d really like to take a look at my own performance data. I know all of these chords pretty well, but I have never closely compared my ability to produce them on demand. I expect I’ll be pretty good in C, D, F, G, A, and worse in the other keys. But, I don’t really know what the pattern looks like.</p>
<p>So, let’s get to the data analysis.</p>
<p>I loaded in the data, computed the average chord-reaction time for each chord, and put them all in the following table and graph.</p>
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-190f1127080f6f229f3c" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-190f1127080f6f229f3c">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36"],["A-7","A7","Ab-7","Ab7","Ab∆7","A∆7","B-7","B7","Bb-7","Bb7","Bb∆7","B∆7","C-7","C7","C∆7","D-7","D7","Db-7","Db7","Db∆7","D∆7","E-7","E7","Eb-7","Eb7","Eb∆7","E∆7","F-7","F7","F∆7","G-7","G7","Gb-7","Gb7","Gb∆7","G∆7"],[901.5,1269.5,4730.5,2626.5,4038,1920.5,2974,2563.5,6454.5,3860.5,4595,3846,1414.5,1773.5,1231.5,1160.5,1206.5,3469,2383,3080.5,2951,1196.5,1698,4777.5,1878,2218,2951.5,1231.5,1478,1692,1508.5,1217.5,4033.5,4607,5124,2259]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>stimulus<\/th>\n      <th>mean_rt<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":2},{"orderable":false,"targets":0}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Neat. Close to what I expected in terms of which chords I think I’m better at. All of em could do with some extra practice. I suppose I should do more practice on the slow ones, because the fast ones don’t really need it.</p>
<hr>
<p>I was too hasty with my jspsych programming and totally forgot to add a few things that would make data analysis much easier. I’d like to be able to easily replot the data in a few different ways. One way is to group by maj7, min7, and dominant 7th. Another is to arrange the keys in ascending/descending order (rather than alphabetically), or in the order of the circle of fifths. I could add the necessary factor levels to the data file by hand, but I think I’ll add this to the jspsych program so that the data file includes this by default.</p>
<p>So, off to fixing the program, and then I’ll collect some more data and try a few different plots.</p>
<p>And, I’m back. I ran through the practice one more time. Now my data file should be easier to plot in different ways.</p>
<p>Here is the mean chord reaction time for each key, grouped by 7th chords.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I wanted to order the keys in terms of the circle of fifths, but there was another bug in the code, now fixed. I’ll need another round of data-collection to get that graph.</p>
<p>In terms of piano practice, I should get a bunch of these chord reaction times lower. Especially Gb, Ab, Bb, Eb, and Db, and B. I thought Bb would be better, but nope.</p>
<p>The program is not currently keeping track of practice attempts per chord, and I should add that.</p>
<hr>
<p>After some javascript nonsense, the program now runs in a loop. Each loop goes through a set of practice material and records the practice attempt number for each chord.</p>
<p>My loop of practice material is all the basic 7th chords. So, I’m about to practice them for a while and then plot the data.</p>
<p>One detail is whether to do away with the delay between trials. Right now there is a 2 second delay before the next chord. That’s nice and everything, but I feel like chomping through this, so I’ll get rid of that delay.</p>
<hr>
<p>I practiced all the chords in a random order for about 10 times each. This is a plot of my chord reaction times as a function of practice for all chords. A bit messy to look at.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>If I average over keys, did I get any faster?</p>
<p>There’s a downward trend I guess.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Averaging over chords and showing the individual keys:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>And, one last summary graph. Let’s average over repetitions, and arrange by the circle of fifths.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>I guess I should practice Gb and Db and Bb and flatten out this performance distribution.</p>
<hr>
<p>Alright, that’s basically all I wanted to accomplish today. Now I have a clunky little tool to relatively quickly assess where I am at on different musical elements. Time to go do something else.</p>
<hr>
<p>Practicing “Eb”,“Db”,“Gb”,“Ab”,“B” this morning, and plotting the reactions from yesterday (1), and today (2).</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Averaging over individual chords, and looking at mean chord reaction time yesterday and today on these chords.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Made a change to the program so that when I load it up I can select which keys to practice. I’m assuming that if I select only Gb and Ab (the slowest), I would be able to get them both under 2 seconds. I wonder if I would then maintain that level of performance when increasing the number of other chords in the test. Need to make breakfast first.</p>
<p>I put Gb and Ab and practiced those 7th chords for a while.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Nice, with 5 minutes or so of banging around those chords, I could get the times way down in the context of this much simpler test (fewer other chords to play, less hand movement between chords etc).</p>
<p>I’m curious whether this improvement for Gb and Ab would persist into a test using all of the keys.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/20_1_19_24_7th_chords/index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>When I added all of the keys back the RTs for Gb and Ab went up a little bit from the last time, but they are over all way down. Almost all of them are under 1500 ms now.</p>
<p>This practice isn’t very musical, but it seems to work out my ability to identify and then play chords on demand. Perhaps speeding up on this test would improve my ability to sight read chord changes.</p>



 ]]></description>
  <category>practice</category>
  <category>7th chords</category>
  <category>jspsych</category>
  <category>assessment</category>
  <guid>https://homophony.quest/blog/20_1_19_24_7th_chords/</guid>
  <pubDate>Fri, 19 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/20_1_19_24_7th_chords/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Savings in relearning</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/18_1_18_24_Relearning/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/18_1_18_24_Relearning/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>retro 80s computer with cartoon hands playing a synthesizer. computer with hands playing piano. - dreamshaper</p>
</div></div><p>Yesterday I spent some time practicing the maj6 diminished scale across all keys. I also posted about practice ideas in relation to cognitive psychology phenomena.</p>
<p>For reference, I can play a C major scale in 7th chords in just under 3 seconds without any warm-up. I’ve had a couple days to put some practice into the C major 6th diminished scale, and I times myself at 12 seconds to play through the chords there.</p>
<p>I timed myself going through several keys for the first time, and B was the slowest at 104 seconds. Then, just for B maj 6 diminished, I did a focused spurt of practice for 10 minutes on that scale. This involved playing the scale ascending in chords over and over again, and not doing anything else. If I made a mistake I would correct it, and if I couldn’t correct it I would start again. I used a stopwatch on my phone for the timer, and pressed the lap button every time I finished the scale.</p>
<p>I was interested in measuring a learning curve to track my progress with this scale. The data looked like this:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/18_1_18_24_Relearning/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>The graph shows that I reduced my time to complete the scale by quite a bit in just 10 minutes of practice, from 104 seconds to 21 seconds.</p>
<p>That was yesterday.</p>
<section id="retentionsavings-in-re-learning" class="level2">
<h2 class="anchored" data-anchor-id="retentionsavings-in-re-learning">Retention…Savings in re-learning?</h2>
<p>My question this morning is how much did I retain? I haven’t practiced the B maj6 diminished scaled since yesterday. My plan is to go sit down and play it ascending for the next 10 minutes, record my playing times, and then come back here and graph it.</p>
<p>One possibility is that I’ll start off around 21 seconds where I left off, and then maybe get a faster. That would indicate I retained almost all of whatever I learned yesterday. Another possibility is that I start back at the beginning, perhaps having retained not very much at all. Still, if that happened, it’s possible that I would re-learn faster the second time through.</p>
<p>Let’s find out.</p>
<p>I just put in 10 minutes of repetitive practice, and here are the results.</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/18_1_18_24_Relearning/index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>What happened? I ended up at about 20 seconds per run at the end of yesterday (last red dot), and today I started way back at about 60 seconds per run. That might look like almost no retention of whatever I “learned” yesterday. Yes, my first data point today was almost twice as fast as the first one from yesterday, but that could be an outlier. I remember making loads of mistakes the first time yesterday and restarting the scale several times.</p>
<p>Although my starting points are similar, it appears there was a decent amount of savings in relearning. Savings in relearning is a concept from <a href="https://www.crumplab.com/cognition/textbook/C8_Memory_I.html#ebbinghauss-forgetting">Hermann Ebbinghaus</a> and his research on forgetting. Ebbinghaus spent time learning lists of random syllables until he could recite them, and then he waited different amounts of time before trying to recall them from memory. Not surprisingly, he forgot items over time. However, he would also relearn lists a second time, after the delay, and often found savings in his relearning attempt. Even though he had forgotten items from the list, when he tried to relearn the list, it took less time (than the initial learning attempt) before he could recite it perfectly again.</p>
<p>Something similar is going on here. One possibility is that I forgot everything I learned since yesterday, and that’s why I was back at the beginning. However, even though the data show I was basically back at the beginning, it seems my practice from yesterday helped me relearn faster than before. The green dots go down faster over practice attempts than the red dots. Yesterday I only got 15 scales completed in 10 minutes, but this time I got through 30 attempts. I also got my time down to 8 or 9 seconds by the end.</p>
</section>
<section id="rd-attempt" class="level2">
<h2 class="anchored" data-anchor-id="rd-attempt">3rd attempt</h2>
<p>For now I’m not being systematic about any of this. It’s been a few hours since my second attempt at practicing the B maj6 diminished scale. What would happen if tried again, instead of waiting for a longer delay?</p>
<p>So, I went and tried again for 10 minutes. Here’s the data:</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/18_1_18_24_Relearning/index_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Overall, the blue dors are pretty similar to the green dots from this morning. Even though I got down to about 8 seconds this morning, I didn’t start from there when I went back to practice. My first run on the third attempt was a big improvement in some sense, but the second run was way worse.</p>
<p>I’ll sit back an do a bit of introspective psychology along with some hand-wavy data description about what seems to be happening. For convenience, I’ll split this into three phases.</p>
<p><em>Phase 1. Puzzling it out.</em> There is a lot action going on in the first 10 practice attempts. I start out really slow, and then make substantial speed gains across the first few attempts. Introspectively, this a very new scale to me. I can’t readily mentally visualize yet. By comparison say to a C major scale, the elements of which I can very easily bring to mind in terms of visual mental imagery or a mental sense of fingering chord shapes. Sitting here right now, I can think of a B maj6 chord now, but I’m drawing a blank when I think about the next chord. OK, it took at least 15 seconds to reconstruct the Dbdim7 chord in my mind. So, at this point in my B maj6 dim scale practice, when I go sit down to try playing it, I don’t have a great mental visualization of it, and I’m puzzling out each chord as I go through the scale.</p>
<p>If I zoom into the production of the scale it goes something like this. - OK, play the first chord…and, I’m practicing the B scale. - Look at B, but thumb on B (think that I should’ve practice B more as a kid). - I’m not slamming that B major triad…a little confused on whether to play E or Eb, or F or Gb. If things get really bad, then I can go back to first principles and work out the intervals in semitones, but I rarely need to do that for basic chords. However, this kind of mental puzzle talk is happening at the same time as important memories might come back. For example, I’m starting to get a nice mental image about the shape Bmaj6, with the B Eb Gb Ab. It’s a palpable kind of embodied knowledge or sense of the chord that is hard to describe, but has a lot to do with how my fingers and keyboard look and feel as they spread across and make contact with those notes. The B is the only white note, and the other three notes are pretty far away. I think the B-Gb perfect fifth might be physically the furthest on the piano. In any case, whatever this chord sense is, if I’m lucky enough for it to be “retrieved”, voila, I can use that memory and then play it (sidenote, this is basically the instance theory of automatization idea from an instrospective perspective). - Waiting for either the puzzling out process to find a solution, or for a memory of B maj6 to pop-up, is followed by playing the chord, ya I got it down. - At this point, I’m on the chord I was trying to play, and having trouble thinking up the next chord. - Another puzzling out process/waiting for a useful memory of the next chord ensues. Sometimes I just go for it and land the next chord not really knowing if it was going to work out. - I usually want to have some confidence that I will play the next chord correctly. So, I will sit on the current chord, stare at my fingers, and try to invoke the next chord. - Sometimes, I’m not particularly verbalizing or instructing myself about what the next chord is. Or, I’m changing the instruction. For example, if I’m on Bmaj6 and trying to play the next chord, I could be saying “play the next chord”, or “play the ii”, or “the next one is going to be the diminished chord, but what diminished chord is it?”, or “play the Db”, or “what is the Dbdim7”, and so on. Othertimes, there seems to be less inner voice, and more a sense of fingering patterns that need to change. - More recently, I’ve been trying to mentally visualize the next chord before I play it. Once I lock in the finger sense of what that chord will be, then I go to it. I find this usually helps with accuracy.</p>
<p>Taking all of this together I think provides some descriptive context to account for the lengthy inter-chord production times that appear in phase 1 (the first 10 practice attempts). I haven’t automatized these chords yet, and lot’s of different kinds of cognitive processing from active puzzling out a solution, to side conversations not super relevant to my current task, to losing track of what I’m doing, to finding that I do remember a chord— these activities all take some amount of time before the next chord is produced. And, those times can account for some of the time in-between each chord.</p>
<p>In my first few practice attempts, I find that some chords come back from memory, and others take some puzzling. And, that these can switch around sometimes, especially after going through the scale. There’s also room for a bunch of interference from other chord knowledge. For example, yesterday I did some focused practice on playing fully diminished 7th chords in every key. Now, this morning when I’m going through the Bmaj6 scale, even though I know that I should be alternating maj6 and dim7 chords across each note, sometimes I’ll be trying to play an Ebmaj6, but the Ebdim7 comes out. So, as I get into practicing the scale, achieving fluency also involves managing interference from other chords.</p>
<p><em>Phase 2. Almost getting it.</em> I would say phase 2 is what is happening in between practice attempts 10 and 30. I’m hitting a floor here of about 10-12 seconds. This is not very fast or fluid, but I’m able to consistently play through the scale without making too many errors. Introspectively, there is still a lot of thinking going on before many chords. Sometimes I get a nice fast run of three or four chords in a row, other times I might completely fall apart on a chord and have a very long pause before being able to play it.</p>
<p><em>Phase 3. Whispers of fluency</em>. In these very early practice attempts, by the time I get past 30 runs I’m starting to almost feel comfortable. I can begin to sense how the chords would be played in a fluent manner. If I go for it I can play it fast with lots of errors, but with the general feeling close to right.</p>
<p><em>Achieving actual fluency</em>. As a piano player, I’m just going to keep practicing this scale, mix it up, and have fun with it. Fluency will come with practice, and I’m not going to sweat about it, or really care too much about optimizing the process.</p>
<p>As a cognitive psychologist, I am nevertheless wondering about various practice schedules or approaches that could influence getting an unfamiliar musical concept into series of fluent actions that I don’t have to think about. There are lots of manipulations that could be interesting to try.</p>
<p>One approach is for me to go all out and just practice ascending chords in the Bmaj6 scale, as I’ve been doing, but go all day long until I reach some kind of fluency criterion that’s good enough for now. If I could play that scale in 3 seconds I would be very happy with that level of fluency. Could I get to 3 seconds by focused repetitive practice, drilling that puppy until I get there or go to sleep trying, or before piano mush brain sets in? Maybe? If I did get to that criterion, what kind of retention would I have tomorrow?</p>
<p>It’s possible that large swathes of the above practice schedule would be practically useless. I could get tired and sloppy. Maybe I need to have a sleep and rely on the magic of memory consolidation. Or perhaps spread out the practice with lots of other intervening stuff.</p>
<p>In the first scenario I might actually get to a reasonable level of fluency in this scale sometime today. In the second scenario, it could take days or months depending on how many things I did in between.</p>
<p>I’m realizing I have a bunch more to write about this, but not in this post. I think it’s time for some cross-posting between my <a href="https://www.crumplab.com/Blog.html">main research blog</a> and this here music blog.</p>


</section>

 ]]></description>
  <category>relearning</category>
  <category>practice</category>
  <category>scales</category>
  <guid>https://homophony.quest/blog/18_1_18_24_Relearning/</guid>
  <pubDate>Thu, 18 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/18_1_18_24_Relearning/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Practicing some Barry Harris methods</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/17_1_17_24_BarryHarris/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/17_1_17_24_BarryHarris/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Barry Harris - courtesy wikipedia</p>
</div></div><p>A couple of days ago I stumbled across the Barry Harris system as taught by one of his students Shan Verma, who also runs <a href="https://www.jazzskills.com" class="uri">https://www.jazzskills.com</a>.</p>
<p>I’ve been randomly watching a few videos from his <a href="https://www.youtube.com/@JazzSkills">youtube channel</a> and trying a few things out.</p>
<p>All of the practice is around learning the major 6th diminished scale, which has some very interesting properties, and sounds great.</p>
<p>These two videos show the two primary ideas for today’s practice.</p>
<ul>
<li><a href="https://www.youtube.com/watch?v=oALZ7xcEdJY&amp;list=PL2GT-F7_oAbkEGy3Sm5jjoowPJLGs6Zzd&amp;index=1">basics of the major 6th diminished scale</a>.</li>
<li><a href="https://www.youtube.com/watch?v=b_Th3Z6csbg&amp;list=PL2GT-F7_oAbkEGy3Sm5jjoowPJLGs6Zzd&amp;index=4">building up notes, contrary motion movement exercise</a></li>
</ul>
<section id="what-i-did-so-far" class="level2">
<h2 class="anchored" data-anchor-id="what-i-did-so-far">What I did so far</h2>
<p>Woke up and played the scale using alternating maj6 and dim7 chords. Played through C, F, and Bb. Also, ran through the building up notes exercise in each key, starting from each note in the scale for each key.</p>
</section>
<section id="practice-notes" class="level2">
<h2 class="anchored" data-anchor-id="practice-notes">Practice notes</h2>
<p><strong>C scale notes</strong>. I was playing through this one last night as well. In particular, I was attempting to get the ‘building up notes’ exercise fluid. If I played each step like a new chord it felt chunky. If I played each step like an ascending run in the right hand, and simultaneous descending run in the left hand it was fast. However, when I did those runs I was only playing single notes, and leaving out the internal notes that form the maj6 or dim7 chords. Then, I got into the swing of alternating my fingers properly.</p>
<p>The table shows the fingering for thumb to pinky (1-5), for the left and right hands. Start with both thumbs on the same note. Then, the index to pinky (2345) go on every note ascending on the right, and every note descending on the left.</p>
<table class="table">
<tbody>
<tr class="odd">
<td></td>
<td></td>
<td></td>
<td></td>
<td>1</td>
<td></td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td></td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td>2</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>3</td>
<td></td>
<td>1</td>
<td></td>
<td>1</td>
<td></td>
<td>3</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td></td>
<td>4</td>
<td></td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td>2</td>
<td></td>
<td>4</td>
<td></td>
</tr>
<tr class="odd">
<td>5</td>
<td></td>
<td>3</td>
<td></td>
<td>1</td>
<td></td>
<td>1</td>
<td></td>
<td>3</td>
<td></td>
<td>5</td>
</tr>
</tbody>
</table>
<p>Took a little while, but once the symmetry hits the fingering locked in pretty easily.</p>
<p>In C, starting from the Ab has a particularly nice symmetrical viewpoint.</p>
<p><strong>F scale notes</strong>. Practice went pretty well. This scale uses a different dim7 chord (GBbDdE). Felt like a little bit of interference from C. The Fmaj6 chord has the same shape and fingering as Cmaj6.</p>
<p>As I was playing the building up notes exercise through every note, I started to think more about how I could use the exercise. I started asking questions like, where does this movement want to go? For example, starting on the root, and “building up notes” seems to want to resolve on the V.</p>
<p><strong>Bb scale notes</strong>. These observations would apply to any of the other scales, but I roughly had these thoughts around this time in practice. So, I’m going to stop organizing notes by scale.</p>
</section>
<section id="scale-practice-checkbox" class="level2">
<h2 class="anchored" data-anchor-id="scale-practice-checkbox">Scale practice checkbox</h2>
<table class="table">
<colgroup>
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 8%">
</colgroup>
<thead>
<tr class="header">
<th>C</th>
<th>F</th>
<th>Bb</th>
<th>Eb</th>
<th>Ab</th>
<th>Db</th>
<th>Gb</th>
<th>B</th>
<th>E</th>
<th>A</th>
<th>D</th>
<th>G</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>x</td>
<td>x</td>
<td>x</td>
<td>x</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="more-practice-notes" class="level2">
<h2 class="anchored" data-anchor-id="more-practice-notes">More practice notes</h2>
<section id="whenwhere-to-start-building-up" class="level3">
<h3 class="anchored" data-anchor-id="whenwhere-to-start-building-up">When/Where to start building up?</h3>
<p>Noodling around in CMaj6…lots of CEGA. I started building up on C.</p>
<ul>
<li><p>step 1, playing a C is kind of redundant with the chord, but it sets the location</p></li>
<li><p>step 2. playing a BD is nice. It’s not part of CEGA, but it adds the maj7 and 9th. Easy to sprinkle in whenever, even if staying on CMaj6. sprinkles of possible movement.</p></li>
<li><p>step 3. ACE, restating the center, with minor vii feels</p></li>
<li><p>step 4. AbBDF, dominant chord, lots of possibilities, wants to go G</p></li>
</ul>
<p>Still playing over a Cmaj6, I did a little bit of starting the building up notes on different notes, but not too much. Need to do that more, to get a better sense of the directions.</p>
</section>
<section id="what-a-step-in-the-building-up-exercise-provides" class="level3">
<h3 class="anchored" data-anchor-id="what-a-step-in-the-building-up-exercise-provides">What a step in the building up exercise provides</h3>
<p>The building up notes exercise starts by emphasizing some particular note in the scale. This could be where you are at, say in a melody. Then, it alternates between adding the next notes in a maj6 chord, or a dim7 chord. I should sit down and spell this out for myself at some point after I get the fingering down across keys.</p>
<ul>
<li>in general, the exercise provides a way to start on a note in the scale, transition between restating aspects of the root (through the maj6), or the diminshed 7th chord, with very harmonious sounding transitions. The transitions already have a bit of movement, and they set up off-ramps into other directions. Especially from a dim7th chord, which can easily end up as four different 7th chords.</li>
</ul>
</section>
<section id="cognitive-science-notes-proactive-interference" class="level3">
<h3 class="anchored" data-anchor-id="cognitive-science-notes-proactive-interference">Cognitive science notes: proactive interference</h3>
<p>Proactive interference is a well-known phenomena in the learning and memory literature. The classic finding is from studies of free recall. Participants are given lists of items to study, like words, and then after a delay they are asked to recall as many as possible from the list. Pro-active interference occurs when your memory for items in the list is impaired by previous exposure and/or learning attempts to memorize other lists.</p>
<p><img src="https://homophony.quest/blog/17_1_17_24_BarryHarris/images/Screenshot 2024-01-17 at 9.44.43 AM.png" class="img-fluid"></p>
<p>The figure shows some recall data from Underwood (1957). The x-axis is number of previous lists. Some subjects were new to these kinds of studies, and they had not tried to memorize lists of items before. Their recall was pretty high. Other subjects had participated in these kinds of studies before, and had tried to memorize many different lists (up to 20 different lists). The more lists one had previously tried to learn, the worse participants did when trying to learn and recall a new list.</p>
<p>As I try to learn the maj6th diminished scale across all of the keys I’m wondering about the role of pre-active interference, as well as other kinds of interference. If learning scales was like learning random lists of words, then it is possible that every time I learn one scale, the next scale becomes harder to learn because of this so-called pro-active interference. My general sense is that this isn’t how learning scales works in practice, and that prior experience generally helps with learning new things. Not to say that there isn’t sometimes interference.</p>
<p>Eb practice…got through it, thought a little more about pro-active interference, and “task-switching” or key-switching.</p>
<p>It’s not clear to me that findings showing pro-active interference in free recall should neatly generalize to learning scales. One reason is that the free-recall studies usually used arbitrary lists of items with no particular relationships to one another. Part of the pro-active interference is that one accidentally recalls words from a previous list, and those get counted as errors. Also, learning additional lists of random items is like trying to grow a vocabulary of random words with no particular meaning.</p>
<p>In contrast to random lists of words, musical scales have many shared elements across keys. There is lots of opportunity for facilitation and interference. For example, learning to play the dim7 in the C major 6th diminished scale could facilitate learning the Eb, Gb, and A versions of that scale, because they use the same dim7 chord. At the same time, there could be associative interference at play based on prior learning attempts. For example, learning to interleave CEGA with DFAbB(dim7) could reinforce those interchord assocations, such as C6-Ddim7-E6. Then, consider moving to learn Eb major 6th diminshed. There is a C6-Ddim7-Eb6, and perhaps here the E6 will interfere with the Eb6? I wonder what a MINERVA process would do here…</p>
</section>
<section id="cogsci-notes-key-switching-costs" class="level3">
<h3 class="anchored" data-anchor-id="cogsci-notes-key-switching-costs">Cogsci notes: Key-switching costs</h3>
<p>Another classic finding in cognition is called the task-switching cost. This has been demonstrated in diverse task situations. The basic finding is that there are usually costs, in terms of time and accuracy, when switching from one task to another.</p>
<p>I’ve been practicing the build up exercise in C, F, Bb, and Eb. The fingerings are all different, but similar enough that my fluency is getting better, even as I switch to new keys.</p>
<p>These four keys share some notes. For example, C appears in all of C, F, Bb, and Eb scales. I did practice the build up for all four, across all notes of the scale, which means that I did start on C and do the build up for each key. However, I practiced the build up ascending and descending within each scale.</p>
<p>I am 100% experiencing pretty strong key-switching costs if I start on C alone, and try to then produce a build in the key of F, Bb, or Eb. It’s much easier to start on C major. Need to break out of the switch cost by practicing these more.</p>
<p>A musical benefit is that a build-up exercise starting say on C, can take you in lots of places, by building up into different keys from that one note. Opening so much opportunity for movement. Wow.</p>
</section>
<section id="cogsci-notes-spacing-and-repetition-during-practice" class="level3">
<h3 class="anchored" data-anchor-id="cogsci-notes-spacing-and-repetition-during-practice">Cogsci notes: Spacing and repetition during practice</h3>
<p>Another well-known set of phenomena in learning and memory are spacing and repetition effects. I have been thinking about these phenomena as I’ve been practicing, and I was probably thinking more about these than what I was trying to accomplish in Ab as I was learning the maj6 diminished scale in that key.</p>
<p>Spacing effects seem to be a common export of cognitive psychology, especially in various apps for ‘optimizing’ learning. For example, flashcard apps and language learning apps will build in a spacing algorithm. The purpose of the algorithm is to space out repetitions during practice, which can facilitate learning and memory (whether or not spacing effects have positive or negative benefits, or no effect can depend).</p>
<p>Repetition effects are another commonly studied phenomena. In general, repeatedly practicing an action, movement pattern, or series of movements, increases the fluency and “automaticity” of the action. Musician’s know this very well. If you haven’t practiced a Gb scale before, or in a while, your performance will be slow and error-prone. If you repeatedly play the scale up and down and up and down, over and over, it get’s easier, and your performance will become faster and more accurate. Repetitions can also make performance worse sometimes (but I’ll skip over those cogsci things for now).</p>
<p>Studies of practicing motor skills, like learning scales, typically show that performance gains follow a power or exponential functions (both are very similar looking), like the one below.</p>
<p><img src="https://homophony.quest/blog/17_1_17_24_BarryHarris/images/practice curve.jpg" class="img-fluid"></p>
<p>The general outcome is that measures of fluency, like scale speed, increase with more practice. However, the gains that are made with practice decrease. The biggest gains in performance are seen early on in practice, afterwards, it takes a lot of practice to make very tiny gains. There are lots of reasons for this basic curve. On a piano, one issue is that people can only move their fingers up to some limit, so there are hard limits to the floor of the function. And, it may take loads of practice to approach those near floor limits.</p>
<p>A related concept with repetitive practice is the idea of diminished returns. Repetitive practice will increase fluency for sure, but at some point in practice one becomes fluent enough, and further practice isn’t going to do much. So, the question becomes when to stop repeating and move onto something else? Which leads back to the spacing of repetitions question.</p>
<p>Let’s say you are trying to practice major scales in all of the keys. What kind of practice schedule should one adopt? There are lots of options, and depending on how you arrange things, the repeated attempts can be massed together or spread out. I’ve got more to say about this kind of stuff, but will get back to practicing Gb. Although, it would be possible to get fancy and use concepts from cognition, I’m just going through the circle of fifths. This has musical benefits, and moving in that direction involves going from one key to another that share many notes. As a result, I think I get a little bit of facilitation from learning one scale to another, and also a little of bit of a discriminative challenge to make sure I’m not playing the previous one. Seems like a productive level of difficulty.</p>
<p>Lunch break</p>
</section>
<section id="turning-up-the-interference" class="level3">
<h3 class="anchored" data-anchor-id="turning-up-the-interference">Turning up the interference</h3>
<p>All the above being said, over lunch I was wondering about maximum interference practice schedules. For example, consider this build-up note exercise. I could write a computer program to tell me what note to start on, and what key to build on, and have this be totally random. That would be a great little practice tool (note to self to make some midi javascript stuff later). But, it would be hard. Especially for me right now because I don’t know the build-up patterns in most keys yet.</p>
<p>Something more approachable, but still hard, would be for me to do much less repetition as I practice the remaining keys (I think I have about 8 left). Up until this point, I have been doing a lot of varied practice within each key. Something like this for each key:</p>
<ul>
<li><p>play the all the notes of the scale up and down, and all around</p></li>
<li><p>play them all at the same time to “see the notes all together”</p></li>
<li><p>play them in sets of 4 or 5, starting on different notes</p></li>
<li><p>play them up and down starting on different notes</p></li>
<li><p>play the maj6 inversions as chords, then as arpeggios</p></li>
<li><p>play the dim7 inversions as chords, then as arpeggios</p></li>
<li><p>put the alternating chords together, play through the scale up and down in chords</p></li>
<li><p>play through the scale up an down in arpeggios</p></li>
<li><p>Start playing the build-up exercise on each note of the scale. Do this up and down and all around</p></li>
</ul>
<p>That’s a lot of different kinds of repetition, and it seems to work pretty well. My fingers get used to the pattern of notes in the key, and then I’m on my way. Still, playing the scale in terms of chords is slow at first, and I’m not getting very fast, but it does become comfortably slow fairly quickly.</p>
<p>A different sort of practice schedule would be more painful. For example, I could go immediately to playing the chords of the maj6 diminished scaled in Db, which is the next key I need to practice. This will be new for me, and I know it will take sometimes a few seconds or more of staring and thinking, and getting a bit lost, to press the first chord, and then the second and so on. I will be working it out on the fly. After going up the scale one time, I could decide to stop Db, and switch to Gb (the next one in my anti-clockwise circle of fifths practice cycle). That would be new and somewhat painful too. In other words, the harder, less repetitive, more spaced out practice schedule could be: once up then switch to new key.</p>
<p>Maybe I will try this next I’m not sure if I have the patience for it…as I like to feel the progress. However, I can imagine some potentially interesting side effects (benefits? or at least potential consequences) of this switchy schedule. One possibility is that this schedule may increase associative linkages between a current musical goal and an intended outcome. One reason this might happen is that when attempting new patterns, the goal may be clear (e.g., play the third chord of the maj6 dim scale in Gb), but the action and corresponding pattern may not be clear. So, one is keeping the goal in mind as an instruction, and trying to work out the pattern, and then execute. As a result, this constitutes a processing episode where the goal was in mind at the same time as a puzzling out process, as well as an action being executed. According some theories of learning and memory the things that happen during an episode of learning are preserved in memory, and later retrieved when similar circumstance are re-encountered. Not sure what the practical consequences would be for learning scales in this manner…maybe I should go try this.</p>
<p>Alright…not as bad as I thought that would feel. Here’s a practice table with some scale completion time data:</p>
<table class="table">
<thead>
<tr class="header">
<th>Key</th>
<th>Finishing time (minutes)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Db</td>
<td>1:23</td>
</tr>
<tr class="even">
<td>Gb</td>
<td>1:00</td>
</tr>
<tr class="odd">
<td>B</td>
<td>1:44</td>
</tr>
<tr class="even">
<td>E</td>
<td>1:30</td>
</tr>
<tr class="odd">
<td>A</td>
<td>:49</td>
</tr>
<tr class="even">
<td>D</td>
<td>1:17</td>
</tr>
<tr class="odd">
<td>G</td>
<td>:56</td>
</tr>
<tr class="even">
<td>Well-practiced (C)</td>
<td>:12</td>
</tr>
</tbody>
</table>
<p>This was pretty slow going, and fairly cognitively taxing. Was constantly reminding myself what I was trying to do, while puzzling out what to play. Not too bad though. Perhaps this caused me to make some more deliberate connections than I otherwise would have, not sure. My times were generally getting faster as I moved anti-clockwise, but that could reflect my overall fluency in those keys in general. I hadn’t tried the major 6 dim scale in any of these keys before and all the completion times (to play the chord for each note ascending) are about a minute or longer. By comparison, I went back to the piano and played through the C scale in 12 seconds…still pretty slow. For another comparison, I went back and played a regular C major scale in 7th chords in less than 3 seconds. Presumably with enough practice I get the above scales down under 3 seconds too. In C, I’ve already got down to 12 seconds. Not bad.</p>
<p>I had the worst time on B. I’m also curious on what kind of fluency gains I would make by just repeating this over and over. I think I should practice this a bunch of times in a row and see what the learning curve looks like. I’m using anything fancy, just the stopwatch on my iphone. I will play the scale in chords ascending, and press the lap button every time I’m finished. Let’s put in 10 minutes of repetitive practice and see where that gets me.</p>
<p>Done. And, time plot the data in R!</p>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.3     ✔ readr     2.1.4
✔ forcats   1.0.0     ✔ stringr   1.5.0
✔ ggplot2   3.4.2     ✔ tibble    3.2.1
✔ lubridate 1.9.2     ✔ tidyr     1.3.0
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="https://homophony.quest/blog/17_1_17_24_BarryHarris/index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>It’s not a pretty power curve, but at least it is generally decreasing. I was hovering around a minute per ascending attempt for the first 7 attempts. Then, a few things started to get easier, and I started speeding up. I cut my time by more than half, yah! Still a long way to go to get faster than 3 seconds. And, I suppose this gives me some perspective on what I got out 10 minutes of this kind of practice.</p>
<p>I’m going to try one more 10 minute burst for fun. This time I’ll do the scale in E, which was my second slowest time. However, instead of playing the scale ascending over and over for 10 minutes. I’m going to do whatever I want for 10 minutes, and see what happens. More specifically, I’ll take the list of things I mentioned earlier that I was doing, that helped me get my fingers into the key, and all that kind of stuff. Then, in the 9th minute, I’ll start timing my ascending runs. Maybe my more varied practice version of 10 minutes would get that scale into shape faster than just focusing on ascending runs…Or maybe not?</p>
<p>Did that. At the end I did a run of chords in E in about 20 seconds. But, my second attempt ended around 30 seconds with lots of errors. I was probably getting a bit better at all of the other things I was practicing, rather than being able to specifically do the ascending chords.</p>
<p>Also, starting to experience brain melt from too much piano practice. Maybe I should call it a day :)</p>


</section>
</section>

 ]]></description>
  <category>Barry Harris</category>
  <category>practice</category>
  <guid>https://homophony.quest/blog/17_1_17_24_BarryHarris/</guid>
  <pubDate>Wed, 17 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/17_1_17_24_BarryHarris/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Transitions in wonderland</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/16_1_16_24_transitions/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/16_1_16_24_transitions/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“piano chords arrows. Moving from one chord to another. Transitioning. morphing. colorful jazz piano. cartoon. graffiti. retro 80s.” - dreamshaper-xl-turbo</p>
</div></div><p>Not sure where today’s post will take me, exciting times! The plan is to write a little bit in the morning, go play, write a little bit more, and so on. I’m hoping the writing will help focus my playing goals. Plus, I need to get back in the habit of writing everyday as the new semester approaches. So, win win.</p>
<section id="explanatory-and-descriptive-theory" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="explanatory-and-descriptive-theory">Explanatory and descriptive theory</h2>
<p>The title of this post is transitions. Mostly, I want to focus this on changes from one musical element to another. Before I head in that direction, I’ve been mulling over a more theoretical transition that has been helpful. My own mental transition from thinking about music theory as explanatory versus descriptive.</p>
<p>When I was first learning music theory (Royal Conservatory of Music, Canadian styles) I was a kid and didn’t have a wide exposure to different ways of thinking about music or theory in general. I remember working through music theory exercise books as homework. I don’t remember what was in those books necessarily, but probably they gave me a lot of basic names and definitions for musical elements.</p>
<p>In high school and early undergrad years I was still playing music when I could, and was getting much more heavily into jazz and improvising. I was also learning more about science, philosophy of science, and cognitive psychology, which shaped a general interest in theory. My day job is now as a cognitive psychology prof, and after many years of that job, the topic of theory still holds my interest. For example, in cognitive psychology a common goal is to develop theories that “explain” some phenomena of interest. Given the complexity of human/animal cognition, explaining how something works is usually a very tall order. This also raises the question of what gets to count as a successful explanation. Mechanistic theories are often held in high regard, as they would describe how individual components of some system work together to produce the phenomena of interest. Here, a phenomena is “explained” in terms of the way that it’s component pieces/processes work together.</p>
<p>When I became interested in learning “jazz” chords I was also scrambling to connect what I was learning back to music theory concepts I had been taught growing up. I can’t remember what my piano teachers had told me about what kind of “theory” music theory was supposed to be…I’m not sure that issue ever came up. Looking back, there were definitely a few years where I thought that music theory was somehow “explanatory”. For example, I would be analyzing a lead sheet trying to use music theory concepts to “understand” and “explain” why the melody went from here to there, or why the chord changed from this to that. Although sizeable chunks of a given song could be readily described using music theory concepts I had learned, there would be lots of changes that didn’t make sense to me. Sometimes a particularly inexplicable change would lead to hours of pondering possible contortions of music theory that might explain why something sounded good or made sense. I’ll give an example soon, but this is all to say that I was frustrated by looking toward music theory for explanation.</p>
<p>At that time I think I was missing the concept of “descriptive theory”. In cognitive science there are lots of examples of researchers using descriptive theories. Many of theses example derive from a logical positivist approach to science. Here, a primary goal is to predict and control a phenomena of interest. A common strategy is to create a descriptive system that can provide names for elements of a system, and mathematical functions to relate how elements move together or interact with one another. If a system can be well described using mathematical functions then it can be predicted and controlled. In this framework, the correspondence between reality and the descriptive system matters less than the amount of prediction and control achieved by the system. I’m getting too caught up here, and need to get back on track so I can practice more piano.</p>
<p>Here’s a point I have been slowly internalizing. Music theory provides a systematic way of describing some musical elements. But, it’s a descriptive theory, not an explanatory theory. Music theory doesn’t explain many important aspects of music. For example, it doesn’t explain how feelings of tension and resolution and created by musical elements. Music theory is not very generative. I may understand the C major scale, and the modes, and the chords that come from the C major scale, but this understanding does not show me how to compose any given song with C as a tonal center.</p>
<p>At least in my experience (and I don’t have an advanced degree in music theory), music theory is less of a theory and more of a naming convention system, rather than a fully worked out descriptive theory that a logical positivist would be proud of. Potato, tomato.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="https://homophony.quest/blog/16_1_16_24_transitions/images/2fg4dr.jpg" class="img-fluid"></p>
</div></div><p>Whereas earlier I would go down “beautiful mind” rabbit holes trying to “explain” a lead sheet from a music theory point of view, now I’m much more content for music theory to be the exceptional descriptive system that it is. Exceptional in the sense that exceptions are used whenever they are needed. And, that’s just the way it is.</p>
<section id="alice-in-wonderland" class="level3">
<h3 class="anchored" data-anchor-id="alice-in-wonderland">Alice in wonderland</h3>
<p>Here’s an example of the rabbit holes I go down from “Alice in Wonderland”. And, maybe it would all “make sense” if only I knew more music theory 🤷.</p>
<p><img src="https://homophony.quest/blog/16_1_16_24_transitions/images/IMG_0428.jpeg" class="img-fluid"></p>
<p>The first seven chords follow a similar pattern, and there is more than one way to describe it. I used the blue pen to show the pattern in terms of leading 7ths being resolved to thirds in the next chord. For example, the first chord change is from D-7 to G7. In D-7, C is the 7th note, which moves down one semitone to a B, or major third in G7. In G7, F is the 7th note, which moves down one semitone to an E, or major third of C∆7.</p>
<p>Aspects of this pattern repeat until it starts breaking. The transition between B-7b5 and E7 is a little bit exceptional. Up until this point all of the notes are in the C major scale. If I was focusing on music theory as explanation I would ask, “what is G# doing in there?”. It sort of fits the pattern in that the 7th of of B-7b5 (A) is resolved to the third of E7 (G#). But, the pattern really breaks when going from A-7 to Eb7. Now, the 7th of A-7 (G) is repeated as the third in Eb7 (G), and all of the other notes in Eb7 (Eb Bb Db) are not in C major. There is also some interesting symmetry in the exceptions. The -iii7 chord in C is E-7, or EGBD. The E7 chord is close, and it sharpens the third EG#BD. Similarly, the Eb7 chord is close, but it keeps the G, and flattens the other notes, EbGBbDb. A kind of chordal call and response in terms of playing with exceptions to the C major scale.</p>
<p>It’s also possible to describe the chord changes from other perspectives. For example, instead of 7ths to 3rds, the pattern is also 1sts to 5ths. The root in D-7 becomes the fifth in G7. The root in G7 becomes the fifth in C∆7, and so on. This keeps repeating until the root in A-7 becomes a Bb in Eb7, which I guess is close enough.</p>
<p>My younger, and even older self on occasion, would get flustered by the Eb7, and consider questions like, “what music theory concepts make sense of these exceptions?”. It’s a fun question kind of question to ponder, but I’m more aware now of not getting too lost in pondering for too long.</p>
<p>Now it’s flavor over explanation every time.</p>
</section>
<section id="cocktail-music" class="level3">
<h3 class="anchored" data-anchor-id="cocktail-music">Cocktail music</h3>
<p>Music is more like mixing cocktails. It should taste good and be interesting. I’m no mixologist, but I’ll mix up a Negroni once in a while with 1 part gin, 1 part vermouth, and 1 part campari. This cocktail is amenable to lots of variations. Switch the gin to bourbon for a boulevardier. Add a twist. Play with the ratios. Add little bits of more stuff for extra fun.</p>
<p>With the cocktail metaphor we can have an almost useless generic descriptive theory of cocktails. Cocktails are composed of multiple component parts, usually liquids, but not always, in particular ratios to each other. This kind of theory isn’t useful for making any cocktails. It can be useful to describe a cocktail using the system and then notice elements that might be analogized to other cocktails. For example, a negroni is 3 equal parts with lots of options for substitutions, implying a whole family of negroni-like drinks. So, the system could be used to explore negroni-style drinks by switching out pieces, trying different amaros instead of campari, etc. And, by giving names to components of cocktails, similarities may appear to arise between cocktails based on the collections of components. For example, the Manhattan is 2 parts bourbon 1 part red vermouth. It’s like a boulevardier, but substituting campari for more whiskey. In any case, I don’t need cocktails to make sense, they just need to taste good. And, they often taste exceptional when they contain some random stuff from left field that I never expected.</p>
<p>So, with music, the mood is to trod around in places that seem to have nice regular structure, and then throw in the good tasty flavors as much as possible.</p>
<p>And, now to the thing I actually wanted to write about.</p>
</section>
</section>
<section id="transitions-and-movement" class="level2">
<h2 class="anchored" data-anchor-id="transitions-and-movement">Transitions and movement</h2>
<p>This should probably be a second post, but the above is a preface on transitions. I actually failed to state one of the main points I intended to make in the above discussion—perspective does make things seem different. Even though music theory is more of a descriptive than explanatory theory, the descriptions change perspective, even if they are describing the same thing. For example, a D-7 chord invokes certain concepts for me. It’s the -ii in C major. It’s D Dorian. It sounds a certain way, etc. That same chord in the 1st inversion is FACD, which is also an Fmaj6 chord that invites a different set of musical ideas. As a sidenote, it would be interesting to discuss these perspective shifts a bit further from a cognitive psychology perspective (e.g., in terms of the associative fan effect, and other phenomena).</p>
<p>Now, onto the main post.</p>
<p>On review, much of the exercises I have been working on lately are “noun” focused. I’ve been working on chords and modes mostly in the major scale, and trying to get all of that stuff more accessible to my fingers when I am playing. I could also call this “object” focused, where I’m trying to increase the fluency in my object production, where the objects are chords or scales. I’m getting better, so that’s good.</p>
<p>But, a question is looming that I have not been very actively addressing. These are questions about movement and transition. If I am here…where do I go from here. Where is there?</p>
<p>I need to start shifting my exercise into a verb focus, where I’m taking actions with musical elements, rather than just being a finger factory that produces musical doo-dads with high fluency for no reason.</p>
<p>Enter dominant chords, piano YouTube, and Barry Harris.</p>
<p>I’m not sure how organized the next stuff will be. Mostly a scratch pad.</p>
</section>
<section id="fully-diminished-chords-and-more" class="level2">
<h2 class="anchored" data-anchor-id="fully-diminished-chords-and-more">Fully diminished chords and more</h2>
<p>I feel confident that I learned important things about fully diminished 7th chords when I was younger. But, I completely forget about them until yesterday when I started watching Shan Verma discussing <a href="https://www.youtube.com/watch?v=kbvxlzGReVA">Alice in Wonderland on youtube</a>.</p>
<p>This quickly led to a series of rabbit holes about fully diminished 7th chords, <a href="https://barryharrisinstituteofjazz.org">Barry Harris</a> and his system, and the major 6th diminished scale.</p>
<p>But, before I get to that. I need to go make lunch.</p>
<hr>
<p>Lunch break is over. Now, my goal is to put down some breadcrumbs and then get back to the piano.</p>
<section id="breadcrumb-1---fully-diminished-7th-chords" class="level3">
<h3 class="anchored" data-anchor-id="breadcrumb-1---fully-diminished-7th-chords">Breadcrumb 1 - Fully Diminished 7th chords</h3>
<p>These are composed of entirely of minor 3rds. So, a fully diminished Cbb7 is CEbGbA.</p>
<p>Randomly came across this <a href="https://vi-control.net/community/threads/dim7-chord-modulation-map-doorways-to-anywhere.99826/">series of observations about using these chords for transitions</a></p>
<p>There are only three different versions of this chord–C, Db and D–as the inversions cover all of the roots.</p>
<p>They are very useful for transitions.</p>
<p>Moving any note down a semitone turns the chord into a dominant 7th chord. Very useful for modulation.</p>
</section>
<section id="breadcrumb-2---major-6th-diminished-scale" class="level3">
<h3 class="anchored" data-anchor-id="breadcrumb-2---major-6th-diminished-scale">Breadcrumb 2 - major 6th diminished scale</h3>
<p>This scale has 8 notes, adding a flat 6 to the major scale</p>
<p>C D E F G A Ab B</p>
</section>
<section id="breadcrumb-3---barry-harriss-system" class="level3">
<h3 class="anchored" data-anchor-id="breadcrumb-3---barry-harriss-system">Breadcrumb 3 - Barry Harris’s system</h3>
<p>I haven’t had enough to time to learn what this whole system is. So far, I have just watched one youtube <a href="https://www.youtube.com/watch?v=Q41nPrt0Ji0&amp;t=726s">video from Shan Verma</a> on this.</p>
<p>The trail of breadcrumbs started at the beginning of his <a href="https://www.youtube.com/watch?v=kbvxlzGReVA">Alice in Wonderland analysis video</a>. In that video he played alternating inversions of maj6 and fully diminished chords, and that immediately clicked something for me.</p>
<p>There are four inversions of Cmaj6 (CEGA), starting on each note in chord. These are also four of the notes in the major 6th diminished scale.</p>
<p>There are four inversions of Ddim7 (DFAbB), starting on each note in the chord. These are also the four remaining notes in the major 6th diminished scale.</p>
<p>It is possible to play each note of that scale as a series of maj6 and dim7 chords.</p>
<table class="table">
<thead>
<tr class="header">
<th>C</th>
<th>D</th>
<th>E</th>
<th>F</th>
<th>G</th>
<th>A</th>
<th>Ab</th>
<th>B</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1st</td>
<td>1st</td>
<td>2nd</td>
<td>2nd</td>
<td>3rd</td>
<td>3rd</td>
<td>4th</td>
<td>4th</td>
</tr>
<tr class="even">
<td>CMaj6</td>
<td>Ddim7</td>
<td>CMaj6</td>
<td>Ddim7</td>
<td>CMaj6</td>
<td>Ddim7</td>
<td>CMaj6</td>
<td>Ddim7</td>
</tr>
<tr class="odd">
<td>CEGA</td>
<td>DFAbB</td>
<td>EGAC</td>
<td>FAbBD</td>
<td>GACE</td>
<td>ACEG</td>
<td>AbBDF</td>
<td>BDFAb</td>
</tr>
</tbody>
</table>
<p>This is basically where I am at right. I spent the morning locking my fingers into these inversions so I could play through the scale in chords. Loving the sound and the possibilities. Giving me lots to think about.</p>
<p>Next up is to practice through the other diminished chords.</p>
<p>Did a bit of that. Got through C, F, and Bb. Time to make another table for my reference.</p>
<p>This shows the notes in every the major 6th diminished scale. I think I fixed all the typos. The scales are ordered in terms of the circle of fifths, going anti-clockwise. The bolded notes are fully diminished 7ths.</p>
</section>
</section>
<section id="tables-major-6th-diminished-scale" class="level2">
<h2 class="anchored" data-anchor-id="tables-major-6th-diminished-scale">Tables: Major 6th diminished scale</h2>
<table class="table">
<thead>
<tr class="header">
<th>i</th>
<th>ii</th>
<th>iii</th>
<th>iv</th>
<th>v</th>
<th>vi</th>
<th>vii</th>
<th>viii</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C</td>
<td><strong>D</strong></td>
<td>E</td>
<td><strong>F</strong></td>
<td>G</td>
<td><strong>Ab</strong></td>
<td>A</td>
<td><strong>B</strong></td>
</tr>
<tr class="even">
<td>F</td>
<td><strong>G</strong></td>
<td>A</td>
<td><strong>Bb</strong></td>
<td>C</td>
<td><strong>Db</strong></td>
<td>D</td>
<td><strong>E</strong></td>
</tr>
<tr class="odd">
<td>Bb</td>
<td><strong>C</strong></td>
<td>D</td>
<td><strong>Eb</strong></td>
<td>F</td>
<td><strong>Gb</strong></td>
<td>G</td>
<td><strong>A</strong></td>
</tr>
<tr class="even">
<td>Eb</td>
<td><strong>F</strong></td>
<td>G</td>
<td><strong>Ab</strong></td>
<td>Bb</td>
<td><strong>B</strong></td>
<td>C</td>
<td><strong>D</strong></td>
</tr>
<tr class="odd">
<td>Ab</td>
<td><strong>Bb</strong></td>
<td>C</td>
<td><strong>Db</strong></td>
<td>Eb</td>
<td><strong>E</strong></td>
<td>F</td>
<td><strong>G</strong></td>
</tr>
<tr class="even">
<td>Db</td>
<td><strong>Eb</strong></td>
<td>F</td>
<td><strong>Gb</strong></td>
<td>Ab</td>
<td><strong>A</strong></td>
<td>Bb</td>
<td><strong>C</strong></td>
</tr>
<tr class="odd">
<td>Gb</td>
<td><strong>Ab</strong></td>
<td>Bb</td>
<td><strong>B</strong></td>
<td>Db</td>
<td><strong>D</strong></td>
<td>Eb</td>
<td><strong>F</strong></td>
</tr>
<tr class="even">
<td>B</td>
<td><strong>Db</strong></td>
<td>Eb</td>
<td><strong>E</strong></td>
<td>Gb</td>
<td><strong>G</strong></td>
<td>Ab</td>
<td><strong>Bb</strong></td>
</tr>
<tr class="odd">
<td>E</td>
<td><strong>Gb</strong></td>
<td>Ab</td>
<td><strong>A</strong></td>
<td>B</td>
<td><strong>C</strong></td>
<td>Db</td>
<td><strong>Eb</strong></td>
</tr>
<tr class="even">
<td>A</td>
<td><strong>B</strong></td>
<td>Db</td>
<td><strong>D</strong></td>
<td>E</td>
<td><strong>F</strong></td>
<td>Gb</td>
<td><strong>Ab</strong></td>
</tr>
<tr class="odd">
<td>D</td>
<td><strong>E</strong></td>
<td>Gb</td>
<td><strong>G</strong></td>
<td>A</td>
<td><strong>Bb</strong></td>
<td>B</td>
<td><strong>Db</strong></td>
</tr>
<tr class="even">
<td>G</td>
<td><strong>A</strong></td>
<td>B</td>
<td><strong>C</strong></td>
<td>D</td>
<td><strong>Eb</strong></td>
<td>E</td>
<td><strong>Gb</strong></td>
</tr>
</tbody>
</table>
<p>This is the same table, but the scales are grouped in terms whether they share the same diminished chord.</p>
<table class="table">
<thead>
<tr class="header">
<th>i</th>
<th>ii</th>
<th>iii</th>
<th>iv</th>
<th>v</th>
<th>vi</th>
<th>vii</th>
<th>viii</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C</td>
<td><strong>D</strong></td>
<td>E</td>
<td><strong>F</strong></td>
<td>G</td>
<td><strong>Ab</strong></td>
<td>A</td>
<td><strong>B</strong></td>
</tr>
<tr class="even">
<td>Eb</td>
<td><strong>F</strong></td>
<td>G</td>
<td><strong>Ab</strong></td>
<td>Bb</td>
<td><strong>B</strong></td>
<td>C</td>
<td><strong>D</strong></td>
</tr>
<tr class="odd">
<td>Gb</td>
<td><strong>Ab</strong></td>
<td>Bb</td>
<td><strong>B</strong></td>
<td>Db</td>
<td><strong>D</strong></td>
<td>Eb</td>
<td><strong>F</strong></td>
</tr>
<tr class="even">
<td>A</td>
<td><strong>B</strong></td>
<td>Db</td>
<td><strong>D</strong></td>
<td>E</td>
<td><strong>F</strong></td>
<td>Gb</td>
<td><strong>Ab</strong></td>
</tr>
<tr class="odd">
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="even">
<td>F</td>
<td><strong>G</strong></td>
<td>A</td>
<td><strong>Bb</strong></td>
<td>C</td>
<td><strong>Db</strong></td>
<td>D</td>
<td><strong>E</strong></td>
</tr>
<tr class="odd">
<td>Ab</td>
<td><strong>Bb</strong></td>
<td>C</td>
<td><strong>Db</strong></td>
<td>Eb</td>
<td><strong>E</strong></td>
<td>F</td>
<td><strong>G</strong></td>
</tr>
<tr class="even">
<td>B</td>
<td><strong>Db</strong></td>
<td>Eb</td>
<td><strong>E</strong></td>
<td>Gb</td>
<td><strong>G</strong></td>
<td>Ab</td>
<td><strong>Bb</strong></td>
</tr>
<tr class="odd">
<td>D</td>
<td><strong>E</strong></td>
<td>Gb</td>
<td><strong>G</strong></td>
<td>A</td>
<td><strong>Bb</strong></td>
<td>B</td>
<td><strong>Db</strong></td>
</tr>
<tr class="even">
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="odd">
<td>Bb</td>
<td><strong>C</strong></td>
<td>D</td>
<td><strong>Eb</strong></td>
<td>F</td>
<td><strong>Gb</strong></td>
<td>G</td>
<td><strong>A</strong></td>
</tr>
<tr class="even">
<td>Db</td>
<td><strong>Eb</strong></td>
<td>F</td>
<td><strong>Gb</strong></td>
<td>Ab</td>
<td><strong>A</strong></td>
<td>Bb</td>
<td><strong>C</strong></td>
</tr>
<tr class="odd">
<td>E</td>
<td><strong>Gb</strong></td>
<td>Ab</td>
<td><strong>A</strong></td>
<td>B</td>
<td><strong>C</strong></td>
<td>Db</td>
<td><strong>Eb</strong></td>
</tr>
<tr class="even">
<td>G</td>
<td><strong>A</strong></td>
<td>B</td>
<td><strong>C</strong></td>
<td>D</td>
<td><strong>Eb</strong></td>
<td>E</td>
<td><strong>Gb</strong></td>
</tr>
</tbody>
</table>
<p>Same table again with some extra stuff. I started playing through these scales and was trying to figure out what aspects would be new to me. For each grouping of four, it is nice that that the diminished chord is the same, it is just expressed as a different inversion. Within each scale, the major chord is also the same, just expressed as a different inversion.</p>
<p>The new column simply points out the maj6/min7 relations.</p>
<table class="table">
<colgroup>
<col style="width: 18%">
<col style="width: 7%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 12%">
<col style="width: 7%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>maj6 = -7</th>
<th>i</th>
<th>ii</th>
<th>iii</th>
<th>iv</th>
<th>v</th>
<th>vi</th>
<th>vii</th>
<th>viii</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>C6 = A-7</td>
<td>C</td>
<td><strong>D</strong></td>
<td>E</td>
<td><strong>F</strong></td>
<td>G</td>
<td><strong>Ab</strong></td>
<td>A</td>
<td><strong>B</strong></td>
</tr>
<tr class="even">
<td>Eb6 = C-7</td>
<td>Eb</td>
<td><strong>F</strong></td>
<td>G</td>
<td><strong>Ab</strong></td>
<td>Bb</td>
<td><strong>B</strong></td>
<td>C</td>
<td><strong>D</strong></td>
</tr>
<tr class="odd">
<td>Gb6 = Eb-7</td>
<td>Gb</td>
<td><strong>Ab</strong></td>
<td>Bb</td>
<td><strong>B</strong></td>
<td>Db</td>
<td><strong>D</strong></td>
<td>Eb</td>
<td><strong>F</strong></td>
</tr>
<tr class="even">
<td>A6 = Gb-7</td>
<td>A</td>
<td><strong>B</strong></td>
<td>Db</td>
<td><strong>D</strong></td>
<td>E</td>
<td><strong>F</strong></td>
<td>Gb</td>
<td><strong>Ab</strong></td>
</tr>
<tr class="odd">
<td></td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="even">
<td>F6 = D-7</td>
<td>F</td>
<td><strong>G</strong></td>
<td>A</td>
<td><strong>Bb</strong></td>
<td>C</td>
<td><strong>Db</strong></td>
<td>D</td>
<td><strong>E</strong></td>
</tr>
<tr class="odd">
<td>Ab6 = F-7</td>
<td>Ab</td>
<td><strong>Bb</strong></td>
<td>C</td>
<td><strong>Db</strong></td>
<td>Eb</td>
<td><strong>E</strong></td>
<td>F</td>
<td><strong>G</strong></td>
</tr>
<tr class="even">
<td>B6 = Ab-7</td>
<td>B</td>
<td><strong>Db</strong></td>
<td>Eb</td>
<td><strong>E</strong></td>
<td>Gb</td>
<td><strong>G</strong></td>
<td>Ab</td>
<td><strong>Bb</strong></td>
</tr>
<tr class="odd">
<td>D6 = B-7</td>
<td>D</td>
<td><strong>E</strong></td>
<td>Gb</td>
<td><strong>G</strong></td>
<td>A</td>
<td><strong>Bb</strong></td>
<td>B</td>
<td><strong>Db</strong></td>
</tr>
<tr class="even">
<td></td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
<td>–</td>
</tr>
<tr class="odd">
<td>Bb6 = G-7</td>
<td>Bb</td>
<td><strong>C</strong></td>
<td>D</td>
<td><strong>Eb</strong></td>
<td>F</td>
<td><strong>Gb</strong></td>
<td>G</td>
<td><strong>A</strong></td>
</tr>
<tr class="even">
<td>Db6 = Bb-7</td>
<td>Db</td>
<td><strong>Eb</strong></td>
<td>F</td>
<td><strong>Gb</strong></td>
<td>Ab</td>
<td><strong>A</strong></td>
<td>Bb</td>
<td><strong>C</strong></td>
</tr>
<tr class="odd">
<td>E6 = Db-7</td>
<td>E</td>
<td><strong>Gb</strong></td>
<td>Ab</td>
<td><strong>A</strong></td>
<td>B</td>
<td><strong>C</strong></td>
<td>Db</td>
<td><strong>Eb</strong></td>
</tr>
<tr class="even">
<td>G6 = E-7</td>
<td>G</td>
<td><strong>A</strong></td>
<td>B</td>
<td><strong>C</strong></td>
<td>D</td>
<td><strong>Eb</strong></td>
<td>E</td>
<td><strong>Gb</strong></td>
</tr>
</tbody>
</table>
<p>This table could be useful for tapping into things I already know. I can play 6th chords fairly well, but I already know my min7 chords very well. Sometimes thinking about a chord in terms of another helps me play it, and it encourages shifting perspectives on the same thing. The Eb scale got easier to play once I realized the Eb6 was just a 1st inversion C-7 chord waiting to happen…and then I’m like, OMG C-7 is an Eb major 6th 🤯.</p>


</section>

 ]]></description>
  <category>scales</category>
  <category>music theory</category>
  <category>movement</category>
  <category>diminished chords</category>
  <guid>https://homophony.quest/blog/16_1_16_24_transitions/</guid>
  <pubDate>Tue, 16 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/16_1_16_24_transitions/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Modes…sigh</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/15_1_13_24_modes/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/15_1_13_24_modes/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“musical modes. Ionian, Dorian, Phrygian, Lydian, Mixolydian, Aeolian and Locrian. piano. theory. music. colorful. lino cut. cartoon. illustration. thinking.” - dreamshaper-xl-turbo</p>
</div></div><p>I’m not friends with modes yet. Barely an acquaintance, even after all these years.</p>
<p>Today’s practice is focusing on modes, yet again. This morning I am thinking of modes like a Donald Rumsfeld quote. Modes for me are known knowns, known unknowns, and unknown unknowns.</p>
<section id="modes-as-known-knowns" class="level2">
<h2 class="anchored" data-anchor-id="modes-as-known-knowns">Modes as known knowns</h2>
<p>I’m not sure when I first learned about modes, but probably some time in middle school. Since then I have– in a definitional sense– known what they were.</p>
<p>The way I encoded them as a piano player was in terms of the C major scale. There are 7 modes of the major scale, corresponding to each key of the major scale. Each mode involves playing the major scale from a different root note. This got turned into a heuristic like, play all the white keys from C to C…then play them from D to D, E to E, and so on. Those are the modes. That’s it. Also, the major scale modes have these Greek names:</p>
<table class="table">
<thead>
<tr class="header">
<th>Mode Name</th>
<th>Starting Note</th>
<th>Notes in C Major</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ionian</td>
<td>I</td>
<td>CDEFGABC</td>
</tr>
<tr class="even">
<td>Dorian</td>
<td>II</td>
<td>DEFGACBD</td>
</tr>
<tr class="odd">
<td>Phrygian</td>
<td>III</td>
<td>EFGABCDE</td>
</tr>
<tr class="even">
<td>Lydian</td>
<td>IV</td>
<td>FGABCDEF</td>
</tr>
<tr class="odd">
<td>Mixolydian</td>
<td>V</td>
<td>GABCDEFG</td>
</tr>
<tr class="even">
<td>Aeolian</td>
<td>VI</td>
<td>ABCDEFGA</td>
</tr>
<tr class="odd">
<td>Locrian</td>
<td>VII</td>
<td>BCDEFGAB</td>
</tr>
</tbody>
</table>
<p>The mode concept is a descriptive one. Other scales have can be described as having modes using the same principles as above.</p>
<p>That’s about as far the known knowns go for me. I don’t really think in terms of modes when I play. Also, that’s why I’m working on thinking in terms of modes again. For the extra flavor and different perspective that they bring.</p>
</section>
<section id="modes-as-known-unknowns" class="level2">
<h2 class="anchored" data-anchor-id="modes-as-known-unknowns">Modes as known unknowns</h2>
<p>There’s lots of other stuff that I in some sense “know” about modes. But, in practice, that conceptual knowledge is not well integrated into my playing.</p>
<p>The best example is that I never really bothered to automatize the modes across all of the keys. Oops. Here again is a strange failure of generalization.</p>
<p>On the one hand, I have practiced all of the modes across all of the keys. For example, over the past month I’ve been doing a lot of major scale work going up and down the major scale in every key, in every mode. I can play them all reasonably quickly now. So, that’s great. I must know my modes right? Not really.</p>
<p>On the other hand, I wasn’t thinking about modes, mode names, or modal relationships as I was playing through those scales. So, for example, I knew it would be hard to play C scales in the different modes. Of course I know C ionian. But, what is C dorian? Mind goes blank. Then slowly, “yes, C is the II of Bb”, so then C dorian is, “play a Bb major scale starting from C.” Then, what is the third mode even? Can’t remember…oh yes, Phrygian. What is C Phrygian? ummm….blah.</p>
<p>Of course, I can play an Ab major scale, but thinking of C Phygrian as Ab is one of those known unknowns. It’s the kind of missing connections I know are there, but haven’t bothered to glue together.</p>
<p>More generally, I’m hoping that working through modes will help me firm up these kinds of relations between notes so that they are within striking distance of my finger tips. For example:</p>
<ul>
<li><p>C as a I (Ionian) in C</p></li>
<li><p>C as a II (dorian) in Bb</p></li>
<li><p>C as a III (phrygian) in Ab</p></li>
<li><p>C as a IV (Lydian) in G</p></li>
<li><p>C as a V (Mixolydian) in F</p></li>
<li><p>C as a VI (Aeolian) in Eb</p></li>
<li><p>C as a VII (Locrian) in Db</p></li>
</ul>
<p>And, then all of those same relationships for every note.</p>
</section>
<section id="modes-and-unknown-unknowns" class="level2">
<h2 class="anchored" data-anchor-id="modes-and-unknown-unknowns">Modes and unknown unknowns</h2>
<p>I suppose this is the stuff I’ll discover later on when I know my modes better.</p>
<p>One example from this morning was noticing patterns of harmonic ambiguity that are mildly interesting. For example, let’s say you play a C and G, which could be described as a perfect fifth in the key of C. What else could it be? Those notes are in the C major scale, so they could imply C Ionian. Those notes are also in the Bb major scale (the II and VI), so they could imply Bb as the tonal center, and in that case playing notes from C dorian would help fill in that implication. The same goes for all of the other modes of C (except for locrian where the G is diminished). And this is a fun little toy to play with, like a jack-in-the-box. Playing Cs and Gs is like turning the gear of the box, building expectations about what kind of jack will pop up, and then OMG, it’s a locrian scale.</p>
</section>
<section id="modes-by-accident" class="level2">
<h2 class="anchored" data-anchor-id="modes-by-accident">Modes by accident</h2>
<p>I still can’t remember the names of modes. And, I haven’t encoded them in terms of their accidental values. So, that’s why I am making this table. These are the different modes of C.</p>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 33%">
<col style="width: 20%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>Mode Name</th>
<th>Accidental</th>
<th>Major scale</th>
<th>C scale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Ionian I</td>
<td>none</td>
<td>C</td>
<td>C D E F G A B C</td>
</tr>
<tr class="even">
<td>Dorian II</td>
<td>bIII, bVII</td>
<td>Bb (C is -ii)</td>
<td>C D Eb F G A Bb C</td>
</tr>
<tr class="odd">
<td>Phrygian III</td>
<td>bII, bIII, bVI, bVII</td>
<td>Ab (C is -iii)</td>
<td>C Db Eb F G Ab Bb C</td>
</tr>
<tr class="even">
<td>Lydian IV</td>
<td>#IV</td>
<td>G (C is iv)</td>
<td>C D E F# G A B C</td>
</tr>
<tr class="odd">
<td>Mixolydian V</td>
<td>bVII</td>
<td>F (C is v)</td>
<td>C D E F G A Bb C</td>
</tr>
<tr class="even">
<td>Aeolian VI</td>
<td>bIII, bVI, bVII</td>
<td>Eb (C is -vi)</td>
<td>C D Eb F G Ab Bb C</td>
</tr>
<tr class="odd">
<td>Locrian VII</td>
<td>bII, bIII, bV, bVI, bVII</td>
<td>Db (C is vii)</td>
<td>C Db Eb F Gb Ab Bb C</td>
</tr>
</tbody>
</table>
<p>So, a new goal will be to play the modes in each key from this point of view.</p>
<p>The I (ionian), IV (lydian), and V (mixolydian) modes are “major” flavor, and the II (dorian), III (phrygian), IV (aeolian), and VII (locrian) modes are “minor” flavor.</p>
<p>I’m going to re-order the modes in terms of the circle of fifths.</p>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 33%">
<col style="width: 20%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>Mode Name</th>
<th>Accidental</th>
<th>Major scale</th>
<th>C scale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Lydian IV</td>
<td>#IV</td>
<td>G (C is iv)</td>
<td>C D E F# G A B C</td>
</tr>
<tr class="even">
<td>Ionian I</td>
<td>none</td>
<td>C</td>
<td>C D E F G A B C</td>
</tr>
<tr class="odd">
<td>Mixolydian V</td>
<td>bVII</td>
<td>F (C is v)</td>
<td>C D E F G A Bb C</td>
</tr>
<tr class="even">
<td>Dorian II</td>
<td>bIII, bVII</td>
<td>Bb (C is -ii)</td>
<td>C D Eb F G A Bb C</td>
</tr>
<tr class="odd">
<td>Aeolian VI</td>
<td>bIII, bVI, bVII</td>
<td>Eb (C is -vi)</td>
<td>C D Eb F G Ab Bb C</td>
</tr>
<tr class="even">
<td>Phrygian III</td>
<td>bII, bIII, bVI, bVII</td>
<td>Ab (C is -iii)</td>
<td>C Db Eb F G Ab Bb C</td>
</tr>
<tr class="odd">
<td>Locrian VII</td>
<td>bII, bIII, bV, bVI, bVII</td>
<td>Db (C is vii)</td>
<td>C Db Eb F Gb Ab Bb C</td>
</tr>
</tbody>
</table>
<p>From this point of view there are five increasingly “minor” modes, going from Mixolydian to Locrian. Thinking in terms of what spices are added to the C major, the mixolydian adds a Bb. If you play a C and the dominant 7th (Bb), then there is a kind of question…how many more minor spices are there going to be? When I’m cooking a minor chord, there’s lots of spices to be added. There’s less major spice options, but throw in the tri-tone once in a while I guess.</p>
<p>More notes…The same table as above, using arabic numerals, and re-ordering in terms how the flats are added in the circle of fifths.</p>
<table class="table">
<colgroup>
<col style="width: 17%">
<col style="width: 33%">
<col style="width: 20%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>Mode Name</th>
<th>Accidental</th>
<th>Major scale</th>
<th>C scale</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Lydian IV</td>
<td>#4</td>
<td>G (C is iv)</td>
<td>C D E F# G A B C</td>
</tr>
<tr class="even">
<td>Ionian I</td>
<td>none</td>
<td>C</td>
<td>C D E F G A B C</td>
</tr>
<tr class="odd">
<td>Mixolydian V</td>
<td>b7</td>
<td>F (C is v)</td>
<td>C D E F G A Bb C</td>
</tr>
<tr class="even">
<td>Dorian II</td>
<td>b7, b3</td>
<td>Bb (C is -ii)</td>
<td>C D Eb F G A Bb C</td>
</tr>
<tr class="odd">
<td>Aeolian VI</td>
<td>b7, b3, b6</td>
<td>Eb (C is -vi)</td>
<td>C D Eb F G Ab Bb C</td>
</tr>
<tr class="even">
<td>Phrygian III</td>
<td>b7, b3, b6, b2</td>
<td>Ab (C is -iii)</td>
<td>C Db Eb F G Ab Bb C</td>
</tr>
<tr class="odd">
<td>Locrian VII</td>
<td>b7, b3, b6, b2, b5</td>
<td>Db (C is vii)</td>
<td>C Db Eb F Gb Ab Bb C</td>
</tr>
</tbody>
</table>
</section>
<section id="modes-as-slashpolychords" class="level2">
<h2 class="anchored" data-anchor-id="modes-as-slashpolychords">Modes as slash/polychords</h2>
<p>I’ve seen different definitions of slash and polychords. One definition of a slash chord (say D/F#) is to play the numerator triad (D) with the denominator bass note (F#). And, a polychord would be playing one triad with the right hand (D) and another with the left hand (F#).</p>
<p>Another way to think of playing modes is in terms of slash chords or poly chords; or, I guess slash scales or poly scales. For example, consider a G/C. That could indicate a G major scale over a C bass note. Playing the G major scale starting and ending on C is the same as C lydian.</p>
<p>In the next table the note in the denominator is the root. The note in the numerator is the major scale to be played over the root (starting and ending on the root). The roman numerals show interval relations between the root and scale. For example, in the lydian column, the root is the fourth note in the corresponding scale (C is the fourth of G, G is the fourth of C). Modifying the major scale in the denominator by the accidental yields the major scale in the numerator (For Bb/C, flattening the 37 in C is B-&gt; Bb and E -&gt; Eb, which then turns the C scale into a Bb scale). The table is arranged in terms of the circle of fifths.</p>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 18%">
<col style="width: 12%">
<col style="width: 14%">
<col style="width: 15%">
<col style="width: 14%">
</colgroup>
<thead>
<tr class="header">
<th>Lydian</th>
<th>Ionian</th>
<th>Mixolydian</th>
<th>Dorian</th>
<th>Aeolian</th>
<th>Phrygian</th>
<th>Locrian</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Majory</td>
<td>Major</td>
<td>Majorish</td>
<td>Minor</td>
<td>even</td>
<td>more</td>
<td>MINOR</td>
</tr>
<tr class="even">
<td>IV</td>
<td>I</td>
<td>V</td>
<td>II</td>
<td>VI</td>
<td>III</td>
<td>VII</td>
</tr>
<tr class="odd">
<td>#4</td>
<td>–</td>
<td>b7</td>
<td>b73</td>
<td>b736</td>
<td>b7362</td>
<td>b73625</td>
</tr>
<tr class="even">
<td>G/C</td>
<td>C/C</td>
<td>F/C</td>
<td>Bb/C</td>
<td>Eb/C</td>
<td>Ab/C</td>
<td>Db/C</td>
</tr>
<tr class="odd">
<td>C/F</td>
<td>F/F</td>
<td>Bb/F</td>
<td>Eb/F</td>
<td>Ab/F</td>
<td>Db/F</td>
<td>Gb/F</td>
</tr>
<tr class="even">
<td>F/Bb</td>
<td>Bb/Bb</td>
<td>Eb/Bb</td>
<td>Ab/Bb</td>
<td>Db/Bb</td>
<td>Gb/Bb</td>
<td>B/Bb</td>
</tr>
<tr class="odd">
<td>Bb/Eb</td>
<td>Eb/Eb</td>
<td>Ab/Eb</td>
<td>Db/Eb</td>
<td>Gb/Eb</td>
<td>B/Eb</td>
<td>E/Eb</td>
</tr>
<tr class="even">
<td>Eb/Ab</td>
<td>Ab/Ab</td>
<td>Db/Ab</td>
<td>Gb/Ab</td>
<td>B/Ab</td>
<td>E/Ab</td>
<td>A/Ab</td>
</tr>
<tr class="odd">
<td>Ab/Db</td>
<td>Db/Db</td>
<td>Gb/Db</td>
<td>B/Db</td>
<td>E/Db</td>
<td>A/Db</td>
<td>D/Db</td>
</tr>
<tr class="even">
<td>Db/Gb</td>
<td>Gb/Gb</td>
<td>B/Gb</td>
<td>E/Gb</td>
<td>A/Gb</td>
<td>D/Gb</td>
<td>G/Gb</td>
</tr>
<tr class="odd">
<td>Gb/B</td>
<td>B/B</td>
<td>E/B</td>
<td>A/B</td>
<td>D/B</td>
<td>G/B</td>
<td>C/B</td>
</tr>
<tr class="even">
<td>B/E</td>
<td>E/E</td>
<td>A/E</td>
<td>D/E</td>
<td>G/E</td>
<td>C/E</td>
<td>F/E</td>
</tr>
<tr class="odd">
<td>E/A</td>
<td>A/A</td>
<td>D/A</td>
<td>G/A</td>
<td>C/A</td>
<td>F/A</td>
<td>Bb/A</td>
</tr>
<tr class="even">
<td>A/D</td>
<td>D/D</td>
<td>G/D</td>
<td>C/D</td>
<td>F/D</td>
<td>Bb/D</td>
<td>Eb/D</td>
</tr>
<tr class="odd">
<td>D/G</td>
<td>G/G</td>
<td>C/G</td>
<td>F/G</td>
<td>Bb/G</td>
<td>Eb/G</td>
<td>Ab/G</td>
</tr>
</tbody>
</table>
<p>Thinking in terms of the circle of fifths. Playing a slash scale one fifth above the root is Lydian. Playing a scale in the root is Ionian. Playing slash scales down the circle of fifths (anti-clockwise) is Mixolydian, Dorian, Aeolian, Phrygian, Locrian.</p>
</section>
<section id="playing-the-sound-of-the-modes" class="level2">
<h2 class="anchored" data-anchor-id="playing-the-sound-of-the-modes">Playing the sound of the modes</h2>
<p>Note to self to just get into it.</p>


</section>

 ]]></description>
  <category>modes</category>
  <category>scales</category>
  <category>music theory</category>
  <category>practice</category>
  <guid>https://homophony.quest/blog/15_1_13_24_modes/</guid>
  <pubDate>Sat, 13 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/15_1_13_24_modes/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>The VERY Expressive Osmose</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/14_1_12_24_osmose/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/14_1_12_24_osmose/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“synthesizer dreamland. explosions of joyful expression. expressive happiness. dancing music. colorful. neon. modular synth. eurorack. cartoon, woodcut, linocut.” - dreamshaper-xl-turbo</p>
</div></div><p>I’ve been really curious about the <a href="https://www.expressivee.com/2-osmose">Expressive Osmose</a> keyboard for a while now. So, I picked one up yesterday.</p>
<p>Basically all I have to say is: HOLY WOW.</p>
<p>I might have more to say later, and I may add notes to this post about the osmose as I go through the <a href="https://www.youtube.com/watch?v=Y02SCLQSnzw">7 stages of osmose ownership</a>.</p>
<p>For, now I need to get back to pitch bending every note into a tornado of meowing cats.</p>
<blockquote class="blockquote">
<p>Actually, this was the expressive controller/synthesizer I was looking for – reply to Obi-Wan Kenobi</p>
</blockquote>
<p>Early afternoon update. I have been noodling away roughly alphabetically through the 500 presets. I’m just starting the ones that begin with C. It’s easy to get lost in fun for hours doing this. Not that I want to take the fun away, but I should start integrating this a little bit more into my setup. Probably the next step will be recording the noodles.</p>
<p>Here are some notes so far on playing the osmose. These are notes to self to help me progress through this thing.</p>
<section id="velocity-and-pressure" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="velocity-and-pressure">Velocity and pressure</h2>
<p>The osmose has several dimensions of expressive control. Like most standard midi keyboards it has note velocity, but it also has pressure, aftertouch, and pitch bend for each key independently, with 24 voice polyphony!</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><img src="https://product.hstatic.net/1000342432/product/1-roland-hp-5600.jpg" class="img-fluid"></p>
</div></div><p>A digression into my past life of utterly not liking midi keyboards. I grew up playing a Roland 5600 with a MC-300 (or 500?) and MT-32 (where much was had with the orchestra hit sound). I would go to my piano teacher’s houses for lessons on a real piano, and practice on the midi piano at home. It was fun to make different sounds on the roland, but I always wanted a real piano as a kid.</p>
<p>I still love the action of a real piano. It turns out I also love the action of my rhodes 88 key electric piano. But, I have never loved the action of any midi keyboard that I have ever owned or played. Not the hammer action ones. Not any of them.</p>
<p>In 2019 I got to play a CS-80 one time in Melbourne and I could not believe how much a difference polyphonic aftertouch made. It’s so sad that midi keyboards suck so much for so long.</p>
<p>Maybe I didn’t spend enough time with the other midi keyboards that I didn’t like. Most recently I brought home a Nord 88 key stage piano to use a controller, and it was just ok…one key broke, and there is an uncurable noisy power supply. Plus, these things never feel like an instrument to me, so they just constantly suck joy.</p>
<p>I have tried to adjust velocity curves and find something that seems better, but never got there. It’s possible I just don’t like how velocity is usually implemented, or that velocity is missing something for me. In any case, when I play on my acoustic or electric piano, even though both keyboards have very different action, they are both very playable and immediately expressive. I don’t have think about it, the expression is just there.</p>
<p>This is what I now adore about the osmose. The expression is right there at my finger tips.</p>
<p>I really like that they have pressure per key too.</p>
</section>
<section id="squishy-goodness" class="level2">
<h2 class="anchored" data-anchor-id="squishy-goodness">Squishy goodness</h2>
<p>It’s hard to describe what the action feels like. There is some initial resistance to the keys, but not too much. This is great for light and/or bouncy tapping and slowly applying pressure to the keys. Many of the presets make sound from pressure alone, and sometimes different sounds from pressure or velocity.</p>
<p>The aftertouch is the best feeling aftertouch I’ve ever played. There is a slight difference in resistance when you get to aftertouch land, and way more travel down into the aftertouch than on typical midi keyboards. It feels like the key keeps going down into it’s aftertouch home, where it belongs sometimes.</p>
<p>Similarly, the key’s pick up side-to-side wiggling throughout the travel of the key and into aftertouch range. This parameter is usually applied to pitch bend. It get’s a bit easier to wiggle when the key is pressed down a bit, but over all it’s very natural.</p>
</section>
<section id="presets" class="level2">
<h2 class="anchored" data-anchor-id="presets">Presets</h2>
<p>Lots of juicy stuff in the presets, all powered by <a href="https://www.hakenaudio.com/sound-engine">EaganMatrix</a>. It’ll be a while before I go into that thing.</p>
<p>There are a few onboard effects like a reverb and delays. The reverb can sound pretty good, especially with extend “on”.</p>
<p>I don’t like menu diving, and it’s pretty fast to make changes to sounds and to sensitivity parameters of the controller. Very happy with that.</p>
<p>Need to go play it some more.</p>
</section>
<section id="mpe-controller" class="level2">
<h2 class="anchored" data-anchor-id="mpe-controller">MPE controller</h2>
<p>I’ve got it hooked up to the OB-6 and it works very well. Whenever I need the sound to go to 11, I just back it up with some OB-6. The more the scarier.</p>
</section>
<section id="recording-midi-in-ableton-live" class="level2">
<h2 class="anchored" data-anchor-id="recording-midi-in-ableton-live">Recording midi in ableton live</h2>
<p>I was recording for a bit with one midi track and one audio track. Things seemed to be going fine, but Ableton started freezing up once in a while, and the midi recordings were sometimes really off. The likely culprit is me trying to record MPE midi for the first time.</p>
<p>It seems there are some MPE midi settings that are important, like from this <a href="https://www.youtube.com/watch?v=Xxtjvn5PrUo">video</a></p>
<p>Still crashing ableton a bunch. A problem for another day.</p>
<!--

Velocity and pressure

- i'm a piano player and love the action of some pianos...
- not liking most/if any midi keyboards that I've used in the past.
- is this to do with how velocity is implemented?

Loving the pressure sensitivity along with velocity implementation.

Really fun icons for the macros and other controls

Fairly quick to access aspects of sound control...sensitivity adjustments are great, feels like I'm tweaking an instrument.
- a little awkward getting around...matrix


-->


</section>

 ]]></description>
  <category>gear</category>
  <category>osmose</category>
  <category>MPE</category>
  <guid>https://homophony.quest/blog/14_1_12_24_osmose/</guid>
  <pubDate>Fri, 12 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/14_1_12_24_osmose/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Turtle TRS-80 variations</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/13_1_9_24_turtle_ep133/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/13_1_9_24_turtle_ep133/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“Can’t remember exactly. TRS computers, turtle connecting to the universe with a modem. Thundercats. woodcut cartoon vibes.” - dreamshaper-xl-turbo</p>
</div></div><div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/oEqS-yKuJQ8?si=vsCeNk1WKdqAGTIQ" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p>I did my piano practice in A major today following the 7th chord themes from previous posts.</p>
<p>Then I accidentally spent too much time generating turtle cartoons with dreamshaper. So, I made a beat with the EP-133 and set them to music.</p>
<p>So many variations of the same thing.</p>



 ]]></description>
  <category>track</category>
  <guid>https://homophony.quest/blog/13_1_9_24_turtle_ep133/</guid>
  <pubDate>Tue, 09 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/13_1_9_24_turtle_ep133/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>D major practice</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/12_1_8_24_Dmajor/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/12_1_8_24_Dmajor/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“D major scale. Piano. Circle of fifths. D major 7th chords played on an infinite universe piano. synthesizer keyboard universe.” - dreamshaper-xl-turbo</p>
</div></div><p>Continuing from yesterday’s G major practice I moved onto D major.</p>
<p>Played the D major scale up and down using 7th chords. Did this multiple times with each inversion.</p>
<p>Noted that I liked the sound of the 3rd inversion the best. Ran up and down enough times that I could play fairly fluently, almost into melody territory. Will likely continue this sort of practice across other keys.</p>
<hr>
<p>Aside…I’ve been messing around with huggingface models as a possible way to generate visual stimuli for some experiments this semester. The class of latent consistency models can generate decent images fairly quickly. This morning I downloaded the “dreamshaper-xl-turbo” model to test it out. Today’s blog picture was generated from this model.</p>



 ]]></description>
  <category>practice</category>
  <guid>https://homophony.quest/blog/12_1_8_24_Dmajor/</guid>
  <pubDate>Mon, 08 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/12_1_8_24_Dmajor/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Screaming modems</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/12_1_8_24_screaming_modems/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/12_1_8_24_screaming_modems/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“massive synthesizer, dueling guitar playing giant robots. guitar looks like an old fashioned modem. speakers. stereo. modular synth. eurorack. cartoon, thundercats, woodcut, linocut.” - dreamshaper-xl-turbo</p>
</div></div><p><audio controls=""> <source src="screaming_modems.mp3" type="audio/wav"> </audio></p>
<p>Sometimes I’ll just give up and go with screaming modems dueling in stereo sonic nonsense…that is unnecessarily too long…courtesy of the OB-6. Not much else to say really.</p>



 ]]></description>
  <category>track</category>
  <guid>https://homophony.quest/blog/12_1_8_24_screaming_modems/</guid>
  <pubDate>Mon, 08 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/12_1_8_24_screaming_modems/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Back in the saddle</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/11_1_7_24_saddle/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/11_1_7_24_saddle/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>“a piano riding a horse. piano rides horse. piano riding a horse. piano keys. synthesizer keyboard.” - LCM_Dreamshaper_v7</p>
</div></div><p>Vacation was nice. Easing back into practice.</p>
<ol type="1">
<li>Played through each scale using 7ths chords going anti-clockwise through the circle of fifths.</li>
</ol>
<p>I’ve overplayed the C major scale for decades and should probably just stop practicing in C. At the same time, I can rip through the C major scale using 7th chords very quickly. In addition to practice, it seems easier to “see” the 7th chords in C major– they all have the same shape and use only white keys. It would be nice to have that immediacy for all of the other scales, and this is something I’m slowly working towards.</p>
<ol start="2" type="1">
<li>Did a little bit of focused practice in G. Played through the G Major scale using 7th chords to build up speed. Played up and down using each inversion of each 7th chord.</li>
</ol>



 ]]></description>
  <category>practice</category>
  <guid>https://homophony.quest/blog/11_1_7_24_saddle/</guid>
  <pubDate>Sat, 06 Jan 2024 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/11_1_7_24_saddle/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Quantum Freeloader</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/10_12_30_23_Quantum_Freeloader/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/10_12_30_23_Quantum_Freeloader/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Tape cassette robot shooting lasers of music at a concert with massive speakers and a universe in the sky. - LCM_Dreamshaper_v7</p>
</div></div><p><audio controls=""> <source src="Quantum_freeloader_take_1_01.mp3" type="audio/wav"> </audio></p>
<p>This is a mash-up of a few things I’ve been working on and covered in previous posts.</p>
<ol type="1">
<li><p>I spent some time learning solo parts from Wynton Kelly’s piano solo on Miles Davis’ Freddie Freeloader</p></li>
<li><p>I did some beat recreation from Quantic’s Life in the Rain. This ended up as a midi track with lots of added notes and modified note probabilities to make the beat have more natural and interesting variation.</p></li>
</ol>
<p>The track is in the style of Freddie Freeloader. The chords and melody are different, but they are still variations of the general idea.</p>



 ]]></description>
  <category>practice</category>
  <guid>https://homophony.quest/blog/10_12_30_23_Quantum_Freeloader/</guid>
  <pubDate>Sat, 30 Dec 2023 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/10_12_30_23_Quantum_Freeloader/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Breaking out of the 4 bar drum loop</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/9_12_29_23_morethan4/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/9_12_29_23_morethan4/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>A tape cassette robot playing a drum kit. Massive speakers in the background. Super funky beats - LCM_Dreamshaper_v7</p>
</div></div><p>I have a really lazy habit with drum beats that I need to fix. It goes something like this: make a 4 bar beat, loop it, jam endlessly inside a 4 bar beat that gets boring and has no fills.</p>
<p>Yesterday I had some fun recreating a 4 bar beat from Quantic’s “Life in the Rain”. Today, the plan is to make this into a 12-bar beat with a reasonable amount of variation and some simple fills.</p>
<p>…Does some things in Ableton that didn’t take that long…Should do this kind of thing more often. Now I have a 12-bar drum part with a decent amount of variation. But, it’s on my upstairs computer and I need to get this into a new project on my downstairs computer. I’ve been using Ableton since forever and I don’t think I’ve ever tried to copy or import a midi track from one project to another. It must be possible. Going to play some music over these drums.</p>



 ]]></description>
  <category>practice</category>
  <guid>https://homophony.quest/blog/9_12_29_23_morethan4/</guid>
  <pubDate>Fri, 29 Dec 2023 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/9_12_29_23_morethan4/cover.jpg" medium="image" type="image/jpeg"/>
</item>
<item>
  <title>Recreating a beat from Quantic’s Life in the Rain</title>
  <dc:creator>Matt Crump</dc:creator>
  <link>https://homophony.quest/blog/8_12_27_23_quantic_rain/</link>
  <description><![CDATA[ 




<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="https://homophony.quest/blog/8_12_27_23_quantic_rain/cover.jpg" class="img-fluid quarto-figure quarto-figure-left figure-img" style="width:50.0%"></p>
</figure>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>Album cover - The 5th Exotic by Quantic</p>
</div></div><ol type="1">
<li>Record this thing into Ableton and grab the beat.</li>
</ol>
<p>Sidenote. Attempting this on a new mac. I was going to record from Apple Music into Ableton, but I wasn’t setup for that. I used to use soundflower to route audio, and now I’m going to try <a href="https://rogueamoeba.com/loopback/">loopback</a>.</p>
<p>Really annoying to install on my new mac because of the process of allowing kernel extensions. ugh. Will it work? OK, it worked.</p>
<ol start="2" type="1">
<li>Here’s 8 bars from Quantic. The first 4 are a bit of cymabals, and the beat comes in on the last 4. It’s the last 4 that I’m interested.</li>
</ol>
<p><audio controls=""> <source src="main_beat.mp3" type="audio/wav"> </audio></p>
<ol start="3" type="1">
<li>Set up some drums in Ableton and MIDIfy this beat.</li>
</ol>
<ul>
<li>This took a little while. Not a huge fan of penciling in midi markers on my computer to make beats.</li>
<li>Set up a basic drum rack, found some close enough sounds</li>
<li>Used the EP-133 as a midi controller to pound in the beats, that was more fun</li>
<li>Nudged things around etc.</li>
<li>got close</li>
</ul>
<p>I ended up with this version of the main beat:</p>
<p><audio controls=""> <source src="midi_100.mp3" type="audio/wav"> </audio></p>
<p>Then, what’s fun with having everything as a midi note is to play around with note probability, and with adding hits that weren’t there, but now have a small probability of being there. Here’s an example of setting most of the sounds to a 50% probability.</p>
<p><audio controls=""> <source src="midi_50.mp3" type="audio/wav"> </audio></p>
<p>It’s more airy, but still carries the groove.</p>
<p>Practice notes: More or less accomplished the goal for this drum recreation exercise. Did not mix the drum voices to taste.</p>
<p>To Do:</p>
<ul>
<li>[] Use this somehow.</li>
<li>[] Learn a little bit more about saving midi clips/audio etc. in ableton so that it is easy for me to re-use this later.</li>
<li>[] See about programming this beat into the Varigate 8+, and or Hermod, so I have a modular version</li>
</ul>



 ]]></description>
  <category>practice</category>
  <guid>https://homophony.quest/blog/8_12_27_23_quantic_rain/</guid>
  <pubDate>Thu, 28 Dec 2023 05:00:00 GMT</pubDate>
  <media:content url="https://homophony.quest/blog/8_12_27_23_quantic_rain/cover.jpg" medium="image" type="image/jpeg"/>
</item>
</channel>
</rss>
